"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[477],{477:(yo,mn,mr)=>{mr.r(mn),mr.d(mn,{jeep_sqlite:()=>Xn});var O=mr(467),Zt=mr(9657);const pr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function pn(){throw new Error("setTimeout has not been defined")}function yn(){throw new Error("clearTimeout has not been defined")}var Lt=pn,Mt=yn;function gn(o){if(Lt===setTimeout)return setTimeout(o,0);if((Lt===pn||!Lt)&&setTimeout)return Lt=setTimeout,setTimeout(o,0);try{return Lt(o,0)}catch{try{return Lt.call(null,o,0)}catch{return Lt.call(this,o,0)}}}"function"==typeof pr.setTimeout&&(Lt=setTimeout),"function"==typeof pr.clearTimeout&&(Mt=clearTimeout);var Qt,jt=[],or=!1,xr=-1;function hi(){!or||!Qt||(or=!1,Qt.length?jt=Qt.concat(jt):xr=-1,jt.length&&vn())}function vn(){if(!or){var o=gn(hi);or=!0;for(var t=jt.length;t;){for(Qt=jt,jt=[];++xr<t;)Qt&&Qt[xr].run();xr=-1,t=jt.length}Qt=null,or=!1,function fi(o){if(Mt===clearTimeout)return clearTimeout(o);if((Mt===yn||!Mt)&&clearTimeout)return Mt=clearTimeout,clearTimeout(o);try{return Mt(o)}catch{try{return Mt.call(null,o)}catch{return Mt.call(this,o)}}}(o)}}function bn(o,t){this.fun=o,this.array=t}function Xt(){}bn.prototype.run=function(){this.fun.apply(null,this.array)};var Ai=Xt,Ti=Xt,ki=Xt,xi=Xt,Pi=Xt,Si=Xt,Di=Xt,ar=pr.performance||{},Ni=ar.now||ar.mozNow||ar.msNow||ar.oNow||ar.webkitNow||function(){return(new Date).getTime()},Bi=new Date,$i={nextTick:function di(o){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];jt.push(new bn(o,t)),1===jt.length&&!or&&gn(vn)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Ai,addListener:Ti,once:ki,off:xi,removeListener:Pi,removeAllListeners:Si,emit:Di,binding:function Ii(o){throw new Error("process.binding is not supported")},cwd:function ji(){return"/"},chdir:function Ri(o){throw new Error("process.chdir is not supported")},umask:function Oi(){return 0},hrtime:function Ci(o){var t=.001*Ni.call(ar),e=Math.floor(t),r=Math.floor(t%1*1e9);return o&&(e-=o[0],(r-=o[1])<0&&(e--,r+=1e9)),[e,r]},platform:"browser",release:{},config:{},uptime:function Fi(){return(new Date-Bi)/1e3}};const zt=$i;var kt=[],gt=[],Mi=typeof Uint8Array<"u"?Uint8Array:Array,Qr=!1;function _n(){Qr=!0;for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)kt[t]=o[t],gt[o.charCodeAt(t)]=t;gt[45]=62,gt[95]=63}function qi(o){return kt[o>>18&63]+kt[o>>12&63]+kt[o>>6&63]+kt[63&o]}function Ui(o,t,e){for(var n=[],i=t;i<e;i+=3)n.push(qi((o[i]<<16)+(o[i+1]<<8)+o[i+2]));return n.join("")}function Pr(o,t,e,r,n){var i,s,c=8*n-r-1,f=(1<<c)-1,u=f>>1,p=-7,m=e?n-1:0,v=e?-1:1,g=o[t+m];for(m+=v,i=g&(1<<-p)-1,g>>=-p,p+=c;p>0;i=256*i+o[t+m],m+=v,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=r;p>0;s=256*s+o[t+m],m+=v,p-=8);if(0===i)i=1-u;else{if(i===f)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,r),i-=u}return(g?-1:1)*s*Math.pow(2,i-r)}function En(o,t,e,r,n,i){var s,c,f,u=8*i-n-1,p=(1<<u)-1,m=p>>1,v=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,E=r?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-s))<1&&(s--,f*=2),(t+=s+m>=1?v/f:v*Math.pow(2,1-m))*f>=2&&(s++,f/=2),s+m>=p?(c=0,s=p):s+m>=1?(c=(t*f-1)*Math.pow(2,n),s+=m):(c=t*Math.pow(2,m-1)*Math.pow(2,n),s=0));n>=8;o[e+g]=255&c,g+=E,c/=256,n-=8);for(s=s<<n|c,u+=n;u>0;o[e+g]=255&s,g+=E,s/=256,u-=8);o[e+g-E]|=128*b}var Wi={}.toString,An=Array.isArray||function(o){return"[object Array]"==Wi.call(o)};function Xr(){return re.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Rt(o,t){if(Xr()<t)throw new RangeError("Invalid typed array length");return re.TYPED_ARRAY_SUPPORT?(o=new Uint8Array(t)).__proto__=re.prototype:(null===o&&(o=new re(t)),o.length=t),o}function re(o,t,e){if(!(re.TYPED_ARRAY_SUPPORT||this instanceof re))return new re(o,t,e);if("number"==typeof o){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Jr(this,o)}return Tn(this,o,t,e)}function Tn(o,t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?function Ki(o,t,e,r){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),re.TYPED_ARRAY_SUPPORT?(o=t).__proto__=re.prototype:o=en(o,t),o}(o,t,e,r):"string"==typeof t?function Hi(o,t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!re.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|xn(t,e),n=(o=Rt(o,r)).write(t,e);return n!==r&&(o=o.slice(0,n)),o}(o,t,e):function Yi(o,t){if(xt(t)){var e=0|tn(t.length);return 0===(o=Rt(o,e)).length||t.copy(o,0,0,e),o}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function ms(o){return o!=o}(t.length)?Rt(o,0):en(o,t);if("Buffer"===t.type&&An(t.data))return en(o,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(o,t)}function kn(o){if("number"!=typeof o)throw new TypeError('"size" argument must be a number');if(o<0)throw new RangeError('"size" argument must not be negative')}function Jr(o,t){if(kn(t),o=Rt(o,t<0?0:0|tn(t)),!re.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)o[e]=0;return o}function en(o,t){var e=t.length<0?0:0|tn(t.length);o=Rt(o,e);for(var r=0;r<e;r+=1)o[r]=255&t[r];return o}function tn(o){if(o>=Xr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Xr().toString(16)+" bytes");return 0|o}function xt(o){return!(null==o||!o._isBuffer)}function xn(o,t){if(xt(o))return o.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(o)||o instanceof ArrayBuffer))return o.byteLength;"string"!=typeof o&&(o=""+o);var e=o.length;if(0===e)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return Ir(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return Cn(o).length;default:if(r)return Ir(o).length;t=(""+t).toLowerCase(),r=!0}}function Zi(o,t,e){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(t>>>=0))return"";for(o||(o="utf8");;)switch(o){case"hex":return os(this,t,e);case"utf8":case"utf-8":return In(this,t,e);case"ascii":return is(this,t,e);case"latin1":case"binary":return ss(this,t,e);case"base64":return rs(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return as(this,t,e);default:if(r)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),r=!0}}function Jt(o,t,e){var r=o[t];o[t]=o[e],o[e]=r}function Pn(o,t,e,r,n){if(0===o.length)return-1;if("string"==typeof e?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=n?0:o.length-1),e<0&&(e=o.length+e),e>=o.length){if(n)return-1;e=o.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof t&&(t=re.from(t,r)),xt(t))return 0===t.length?-1:Sn(o,t,e,r,n);if("number"==typeof t)return t&=255,re.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(o,t,e):Uint8Array.prototype.lastIndexOf.call(o,t,e):Sn(o,[t],e,r,n);throw new TypeError("val must be string, number or Buffer")}function Sn(o,t,e,r,n){var u,i=1,s=o.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(o.length<2||t.length<2)return-1;i=2,s/=2,c/=2,e/=2}function f(g,E){return 1===i?g[E]:g.readUInt16BE(E*i)}if(n){var p=-1;for(u=e;u<s;u++)if(f(o,u)===f(t,-1===p?0:u-p)){if(-1===p&&(p=u),u-p+1===c)return p*i}else-1!==p&&(u-=u-p),p=-1}else for(e+c>s&&(e=s-c),u=e;u>=0;u--){for(var m=!0,v=0;v<c;v++)if(f(o,u+v)!==f(t,v)){m=!1;break}if(m)return u}return-1}function Qi(o,t,e,r){e=Number(e)||0;var n=o.length-e;r?(r=Number(r))>n&&(r=n):r=n;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var c=parseInt(t.substr(2*s,2),16);if(isNaN(c))return s;o[e+s]=c}return s}function Xi(o,t,e,r){return jr(Ir(t,o.length-e),o,e,r)}function Dn(o,t,e,r){return jr(function hs(o){for(var t=[],e=0;e<o.length;++e)t.push(255&o.charCodeAt(e));return t}(t),o,e,r)}function Ji(o,t,e,r){return Dn(o,t,e,r)}function es(o,t,e,r){return jr(Cn(t),o,e,r)}function ts(o,t,e,r){return jr(function ds(o,t){for(var e,r,i=[],s=0;s<o.length&&!((t-=2)<0);++s)r=(e=o.charCodeAt(s))>>8,i.push(e%256),i.push(r);return i}(t,o.length-e),o,e,r)}function rs(o,t,e){return function wn(o){Qr||_n();for(var t,e=o.length,r=e%3,n="",i=[],s=16383,c=0,f=e-r;c<f;c+=s)i.push(Ui(o,c,c+s>f?f:c+s));return 1===r?(n+=kt[(t=o[e-1])>>2],n+=kt[t<<4&63],n+="=="):2===r&&(n+=kt[(t=(o[e-2]<<8)+o[e-1])>>10],n+=kt[t>>4&63],n+=kt[t<<2&63],n+="="),i.push(n),i.join("")}(0===t&&e===o.length?o:o.slice(t,e))}function In(o,t,e){e=Math.min(o.length,e);for(var r=[],n=t;n<e;){var f,u,p,m,i=o[n],s=null,c=i>239?4:i>223?3:i>191?2:1;if(n+c<=e)switch(c){case 1:i<128&&(s=i);break;case 2:128==(192&(f=o[n+1]))&&(m=(31&i)<<6|63&f)>127&&(s=m);break;case 3:u=o[n+2],128==(192&(f=o[n+1]))&&128==(192&u)&&(m=(15&i)<<12|(63&f)<<6|63&u)>2047&&(m<55296||m>57343)&&(s=m);break;case 4:u=o[n+2],p=o[n+3],128==(192&(f=o[n+1]))&&128==(192&u)&&128==(192&p)&&(m=(15&i)<<18|(63&f)<<12|(63&u)<<6|63&p)>65535&&m<1114112&&(s=m)}null===s?(s=65533,c=1):s>65535&&(r.push((s-=65536)>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=c}return function ns(o){var t=o.length;if(t<=jn)return String.fromCharCode.apply(String,o);for(var e="",r=0;r<t;)e+=String.fromCharCode.apply(String,o.slice(r,r+=jn));return e}(r)}re.TYPED_ARRAY_SUPPORT=void 0===pr.TYPED_ARRAY_SUPPORT||pr.TYPED_ARRAY_SUPPORT,re.poolSize=8192,re._augment=function(o){return o.__proto__=re.prototype,o},re.from=function(o,t,e){return Tn(null,o,t,e)},re.TYPED_ARRAY_SUPPORT&&(re.prototype.__proto__=Uint8Array.prototype,re.__proto__=Uint8Array),re.alloc=function(o,t,e){return function Vi(o,t,e,r){return kn(t),t<=0?Rt(o,t):void 0!==e?"string"==typeof r?Rt(o,t).fill(e,r):Rt(o,t).fill(e):Rt(o,t)}(null,o,t,e)},re.allocUnsafe=function(o){return Jr(null,o)},re.allocUnsafeSlow=function(o){return Jr(null,o)},re.isBuffer=function ps(o){return null!=o&&(!!o._isBuffer||Bn(o)||function ys(o){return"function"==typeof o.readFloatLE&&"function"==typeof o.slice&&Bn(o.slice(0,0))}(o))},re.compare=function(t,e){if(!xt(t)||!xt(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},re.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},re.concat=function(t,e){if(!An(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return re.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=re.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!xt(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},re.byteLength=xn,re.prototype._isBuffer=!0,re.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Jt(this,e,e+1);return this},re.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Jt(this,e,e+3),Jt(this,e+1,e+2);return this},re.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Jt(this,e,e+7),Jt(this,e+1,e+6),Jt(this,e+2,e+5),Jt(this,e+3,e+4);return this},re.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?In(this,0,t):Zi.apply(this,arguments)},re.prototype.equals=function(t){if(!xt(t))throw new TypeError("Argument must be a Buffer");return this===t||0===re.compare(this,t)},re.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},re.prototype.compare=function(t,e,r,n,i){if(!xt(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),c=(r>>>=0)-(e>>>=0),f=Math.min(s,c),u=this.slice(n,i),p=t.slice(e,r),m=0;m<f;++m)if(u[m]!==p[m]){s=u[m],c=p[m];break}return s<c?-1:c<s?1:0},re.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},re.prototype.indexOf=function(t,e,r){return Pn(this,t,e,r,!0)},re.prototype.lastIndexOf=function(t,e,r){return Pn(this,t,e,r,!1)},re.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return Qi(this,t,e,r);case"utf8":case"utf-8":return Xi(this,t,e,r);case"ascii":return Dn(this,t,e,r);case"latin1":case"binary":return Ji(this,t,e,r);case"base64":return es(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ts(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var jn=4096;function is(o,t,e){var r="";e=Math.min(o.length,e);for(var n=t;n<e;++n)r+=String.fromCharCode(127&o[n]);return r}function ss(o,t,e){var r="";e=Math.min(o.length,e);for(var n=t;n<e;++n)r+=String.fromCharCode(o[n]);return r}function os(o,t,e){var r=o.length;(!t||t<0)&&(t=0),(!e||e<0||e>r)&&(e=r);for(var n="",i=t;i<e;++i)n+=fs(o[i]);return n}function as(o,t,e){for(var r=o.slice(t,e),n="",i=0;i<r.length;i+=2)n+=String.fromCharCode(r[i]+256*r[i+1]);return n}function rt(o,t,e){if(o%1!=0||o<0)throw new RangeError("offset is not uint");if(o+t>e)throw new RangeError("Trying to access beyond buffer length")}function lt(o,t,e,r,n,i){if(!xt(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<i)throw new RangeError('"value" argument is out of bounds');if(e+r>o.length)throw new RangeError("Index out of range")}function Sr(o,t,e,r){t<0&&(t=65535+t+1);for(var n=0,i=Math.min(o.length-e,2);n<i;++n)o[e+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function Dr(o,t,e,r){t<0&&(t=4294967295+t+1);for(var n=0,i=Math.min(o.length-e,4);n<i;++n)o[e+n]=t>>>8*(r?n:3-n)&255}function Rn(o,t,e,r,n,i){if(e+r>o.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function On(o,t,e,r,n){return n||Rn(o,0,e,4),En(o,t,e,r,23,4),e+4}function Nn(o,t,e,r,n){return n||Rn(o,0,e,8),En(o,t,e,r,52,8),e+8}re.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),re.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=re.prototype;else{var i=e-t;n=new re(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},re.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||rt(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n},re.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||rt(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},re.prototype.readUInt8=function(t,e){return e||rt(t,1,this.length),this[t]},re.prototype.readUInt16LE=function(t,e){return e||rt(t,2,this.length),this[t]|this[t+1]<<8},re.prototype.readUInt16BE=function(t,e){return e||rt(t,2,this.length),this[t]<<8|this[t+1]},re.prototype.readUInt32LE=function(t,e){return e||rt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},re.prototype.readUInt32BE=function(t,e){return e||rt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},re.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||rt(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},re.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||rt(t,e,this.length);for(var n=e,i=1,s=this[t+--n];n>0&&(i*=256);)s+=this[t+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},re.prototype.readInt8=function(t,e){return e||rt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},re.prototype.readInt16LE=function(t,e){e||rt(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},re.prototype.readInt16BE=function(t,e){e||rt(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},re.prototype.readInt32LE=function(t,e){return e||rt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},re.prototype.readInt32BE=function(t,e){return e||rt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},re.prototype.readFloatLE=function(t,e){return e||rt(t,4,this.length),Pr(this,t,!0,23,4)},re.prototype.readFloatBE=function(t,e){return e||rt(t,4,this.length),Pr(this,t,!1,23,4)},re.prototype.readDoubleLE=function(t,e){return e||rt(t,8,this.length),Pr(this,t,!0,52,8)},re.prototype.readDoubleBE=function(t,e){return e||rt(t,8,this.length),Pr(this,t,!1,52,8)},re.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||lt(this,t,e,r,Math.pow(2,8*r)-1,0);var s=1,c=0;for(this[e]=255&t;++c<r&&(s*=256);)this[e+c]=t/s&255;return e+r},re.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||lt(this,t,e,r,Math.pow(2,8*r)-1,0);var s=r-1,c=1;for(this[e+s]=255&t;--s>=0&&(c*=256);)this[e+s]=t/c&255;return e+r},re.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,1,255,0),re.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},re.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Sr(this,t,e,!0),e+2},re.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Sr(this,t,e,!1),e+2},re.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Dr(this,t,e,!0),e+4},re.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Dr(this,t,e,!1),e+4},re.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);lt(this,t,e,r,i-1,-i)}var s=0,c=1,f=0;for(this[e]=255&t;++s<r&&(c*=256);)t<0&&0===f&&0!==this[e+s-1]&&(f=1),this[e+s]=(t/c|0)-f&255;return e+r},re.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);lt(this,t,e,r,i-1,-i)}var s=r-1,c=1,f=0;for(this[e+s]=255&t;--s>=0&&(c*=256);)t<0&&0===f&&0!==this[e+s+1]&&(f=1),this[e+s]=(t/c|0)-f&255;return e+r},re.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,1,127,-128),re.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},re.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Sr(this,t,e,!0),e+2},re.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Sr(this,t,e,!1),e+2},re.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,4,2147483647,-2147483648),re.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Dr(this,t,e,!0),e+4},re.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Dr(this,t,e,!1),e+4},re.prototype.writeFloatLE=function(t,e,r){return On(this,t,e,!0,r)},re.prototype.writeFloatBE=function(t,e,r){return On(this,t,e,!1,r)},re.prototype.writeDoubleLE=function(t,e,r){return Nn(this,t,e,!0,r)},re.prototype.writeDoubleBE=function(t,e,r){return Nn(this,t,e,!1,r)},re.prototype.copy=function(t,e,r,n){if(r||(r=0),!n&&0!==n&&(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var s,i=n-r;if(this===t&&r<e&&e<n)for(s=i-1;s>=0;--s)t[s+e]=this[s+r];else if(i<1e3||!re.TYPED_ARRAY_SUPPORT)for(s=0;s<i;++s)t[s+e]=this[s+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},re.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!re.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var c=xt(t)?t:Ir(new re(t,n).toString()),f=c.length;for(s=0;s<r-e;++s)this[s+e]=c[s%f]}return this};var cs=/[^+\/0-9A-Za-z-_]/g;function fs(o){return o<16?"0"+o.toString(16):o.toString(16)}function Ir(o,t){t=t||1/0;for(var e,r=o.length,n=null,i=[],s=0;s<r;++s){if((e=o.charCodeAt(s))>55295&&e<57344){if(!n){if(e>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}n=e;continue}if(e<56320){(t-=3)>-1&&i.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(t-=3)>-1&&i.push(239,191,189);if(n=null,e<128){if((t-=1)<0)break;i.push(e)}else if(e<2048){if((t-=2)<0)break;i.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;i.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return i}function Cn(o){return function zi(o){Qr||_n();var t,e,r,n,i,s,c=o.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=new Mi(3*c/4-(i="="===o[c-2]?2:"="===o[c-1]?1:0)),r=i>0?c-4:c;var f=0;for(t=0,e=0;t<r;t+=4,e+=3)n=gt[o.charCodeAt(t)]<<18|gt[o.charCodeAt(t+1)]<<12|gt[o.charCodeAt(t+2)]<<6|gt[o.charCodeAt(t+3)],s[f++]=n>>16&255,s[f++]=n>>8&255,s[f++]=255&n;return 2===i?(n=gt[o.charCodeAt(t)]<<2|gt[o.charCodeAt(t+1)]>>4,s[f++]=255&n):1===i&&(n=gt[o.charCodeAt(t)]<<10|gt[o.charCodeAt(t+1)]<<4|gt[o.charCodeAt(t+2)]>>2,s[f++]=n>>8&255,s[f++]=255&n),s}(function us(o){if((o=function ls(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}(o).replace(cs,"")).length<2)return"";for(;o.length%4!=0;)o+="=";return o}(o))}function jr(o,t,e,r){for(var n=0;n<r&&!(n+e>=t.length||n>=o.length);++n)t[n+e]=o[n];return n}function Bn(o){return!!o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o)}var qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fn(o){if(o.__esModule)return o;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(o).forEach(function(e){var r=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return o[e]}})}),t}function Ut(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $n={exports:{}};const gs=Fn(Object.freeze({__proto__:null,default:{}}));function Ln(o,t){for(var e=0,r=o.length-1;r>=0;r--){var n=o[r];"."===n?o.splice(r,1):".."===n?(o.splice(r,1),e++):e&&(o.splice(r,1),e--)}if(t)for(;e--;e)o.unshift("..");return o}var vs=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,rn=function(o){return vs.exec(o).slice(1)};function Rr(){for(var o="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var r=e>=0?arguments[e]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(o=r+"/"+o,t="/"===r.charAt(0))}return(t?"/":"")+(o=Ln(on(o.split("/"),function(n){return!!n}),!t).join("/"))||"."}function nn(o){var t=sn(o),e="/"===_s(o,-1);return!(o=Ln(on(o.split("/"),function(r){return!!r}),!t).join("/"))&&!t&&(o="."),o&&e&&(o+="/"),(t?"/":"")+o}function sn(o){return"/"===o.charAt(0)}function Mn(){return nn(on(Array.prototype.slice.call(arguments,0),function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function zn(o,t){function e(u){for(var p=0;p<u.length&&""===u[p];p++);for(var m=u.length-1;m>=0&&""===u[m];m--);return p>m?[]:u.slice(p,m-p+1)}o=Rr(o).substr(1),t=Rr(t).substr(1);for(var r=e(o.split("/")),n=e(t.split("/")),i=Math.min(r.length,n.length),s=i,c=0;c<i;c++)if(r[c]!==n[c]){s=c;break}var f=[];for(c=s;c<r.length;c++)f.push("..");return(f=f.concat(n.slice(s))).join("/")}function Wn(o){var t=rn(o),e=t[0],r=t[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."}function Gn(o,t){var e=rn(o)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e}function Vn(o){return rn(o)[3]}function on(o,t){if(o.filter)return o.filter(t);for(var e=[],r=0;r<o.length;r++)t(o[r],r,o)&&e.push(o[r]);return e}var _s=function(o,t,e){return o.substr(t,e)};const ws=Fn(Object.freeze({__proto__:null,resolve:Rr,normalize:nn,isAbsolute:sn,join:Mn,relative:zn,sep:"/",delimiter:":",dirname:Wn,basename:Gn,extname:Vn,default:{extname:Vn,basename:Gn,dirname:Wn,sep:"/",delimiter:":",relative:zn,join:Mn,isAbsolute:sn,normalize:nn,resolve:Rr}}));var o,e,r;e=void 0,r=function(n){return e||(e=new Promise(function(i,s){var u,c=typeof n<"u"?n:{},f=c.onAbort;c.onAbort=function(a){s(new Error(a)),f&&f(a)},c.postRun=c.postRun||[],c.postRun.push(function(){i(c)}),o=void 0,u||(u=typeof c<"u"?c:{}),u.onRuntimeInitialized=function(){function a(U,ce){switch(typeof ce){case"boolean":mo(U,ce?1:0);break;case"number":lo(U,ce);break;case"string":fo(U,ce,-1,-1);break;case"object":if(null===ce)ci(U);else if(null!=ce.length){var Te=Ht(ce,dr);ho(U,Te,ce.length,-1),Kr(Te)}else Zr(U,"Wrong API use : tried to return a value of an unknown type ("+ce+").",-1);break;default:ci(U)}}function l(U,ce){for(var Te=[],De=0;De<U;De+=1){var Be=K(ce+4*De,"i32"),He=so(Be);if(1===He||2===He)Be=uo(Be);else if(3===He)Be=ao(Be);else if(4===He){Be=oo(He=Be),He=co(He);for(var At=new Uint8Array(Be),bt=0;bt<Be;bt+=1)At[bt]=te[He+bt];Be=At}else Be=null;Te.push(Be)}return Te}function h(U,ce){this.La=U,this.db=ce,this.Ja=1,this.fb=[]}function w(U,ce){if(this.db=ce,ce=et(U)+1,this.Ya=Hr(ce),null===this.Ya)throw Error("Unable to allocate memory for the SQL string");ct(U,de,this.Ya,ce),this.eb=this.Ya,this.Ua=this.ib=null}function I(U){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=U){var ce=this.filename,Te="/",De=ce;if(Te&&(Te="string"==typeof Te?Te:nr(Te),De=ce?z(Te+"/"+ce):Te),De=ur(De,4095&(void 0!==(ce=cr(!0,!0))?ce:438)|32768,0),U){if("string"==typeof U){Te=Array(U.length);for(var Be=0,He=U.length;Be<He;++Be)Te[Be]=U.charCodeAt(Be);U=Te}fr(De,146|ce),Gr(Te=It(De,577),U,0,U.length,0),wr(Te),fr(De,ce)}}this.handleError(Se(this.filename,V)),this.db=K(V,"i32"),li(this.db),this.Za={},this.Na={}}var V=Yt(4),ee=u.cwrap,Se=ee("sqlite3_open","number",["string","number"]),Me=ee("sqlite3_close_v2","number",["number"]),Ne=ee("sqlite3_exec","number",["number","string","number","number","number"]),tt=ee("sqlite3_changes","number",["number"]),nt=ee("sqlite3_prepare_v2","number",["number","string","number","number","number"]),ni=ee("sqlite3_sql","string",["number"]),qs=ee("sqlite3_normalized_sql","string",["number"]),ii=ee("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Us=ee("sqlite3_bind_text","number",["number","number","number","number","number"]),si=ee("sqlite3_bind_blob","number",["number","number","number","number","number"]),Ws=ee("sqlite3_bind_double","number",["number","number","number"]),Gs=ee("sqlite3_bind_int","number",["number","number","number"]),Vs=ee("sqlite3_bind_parameter_index","number",["number","string"]),Hs=ee("sqlite3_step","number",["number"]),Ks=ee("sqlite3_errmsg","string",["number"]),Ys=ee("sqlite3_column_count","number",["number"]),Zs=ee("sqlite3_data_count","number",["number"]),Qs=ee("sqlite3_column_double","number",["number","number"]),oi=ee("sqlite3_column_text","string",["number","number"]),Xs=ee("sqlite3_column_blob","number",["number","number"]),Js=ee("sqlite3_column_bytes","number",["number","number"]),eo=ee("sqlite3_column_type","number",["number","number"]),to=ee("sqlite3_column_name","string",["number","number"]),ro=ee("sqlite3_reset","number",["number"]),no=ee("sqlite3_clear_bindings","number",["number"]),io=ee("sqlite3_finalize","number",["number"]),ai=ee("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),so=ee("sqlite3_value_type","number",["number"]),oo=ee("sqlite3_value_bytes","number",["number"]),ao=ee("sqlite3_value_text","string",["number"]),co=ee("sqlite3_value_blob","number",["number"]),uo=ee("sqlite3_value_double","number",["number"]),lo=ee("sqlite3_result_double","",["number","number"]),ci=ee("sqlite3_result_null","",["number"]),fo=ee("sqlite3_result_text","",["number","string","number","number"]),ho=ee("sqlite3_result_blob","",["number","number","number","number"]),mo=ee("sqlite3_result_int","",["number","number"]),Zr=ee("sqlite3_result_error","",["number","string","number"]),ui=ee("sqlite3_aggregate_context","number",["number","number"]),li=ee("RegisterExtensionFunctions","number",["number"]);h.prototype.bind=function(U){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(U)?this.wb(U):null==U||"object"!=typeof U||this.xb(U)},h.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var U=Hs(this.La);switch(U){case 100:return!0;case 101:return!1;default:throw this.db.handleError(U)}},h.prototype.rb=function(U){return null==U&&(U=this.Ja,this.Ja+=1),Qs(this.La,U)},h.prototype.Ab=function(U){if(null==U&&(U=this.Ja,this.Ja+=1),U=oi(this.La,U),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(U)},h.prototype.Bb=function(U){return null==U&&(U=this.Ja,this.Ja+=1),oi(this.La,U)},h.prototype.getBlob=function(U){null==U&&(U=this.Ja,this.Ja+=1);var ce=Js(this.La,U);U=Xs(this.La,U);for(var Te=new Uint8Array(ce),De=0;De<ce;De+=1)Te[De]=te[U+De];return Te},h.prototype.get=function(U,ce){ce=ce||{},null!=U&&this.bind(U)&&this.step(),U=[];for(var Te=Zs(this.La),De=0;De<Te;De+=1)switch(eo(this.La,De)){case 1:var Be=ce.useBigInt?this.Ab(De):this.rb(De);U.push(Be);break;case 2:U.push(this.rb(De));break;case 3:U.push(this.Bb(De));break;case 4:U.push(this.getBlob(De));break;default:U.push(null)}return U},h.prototype.getColumnNames=function(){for(var U=[],ce=Ys(this.La),Te=0;Te<ce;Te+=1)U.push(to(this.La,Te));return U},h.prototype.getAsObject=function(U,ce){U=this.get(U,ce),ce=this.getColumnNames();for(var Te={},De=0;De<ce.length;De+=1)Te[ce[De]]=U[De];return Te},h.prototype.getSQL=function(){return ni(this.La)},h.prototype.getNormalizedSQL=function(){return qs(this.La)},h.prototype.run=function(U){return null!=U&&this.bind(U),this.step(),this.reset()},h.prototype.nb=function(U,ce){null==ce&&(ce=this.Ja,this.Ja+=1),U=st(U);var Te=Ht(U,dr);this.fb.push(Te),this.db.handleError(Us(this.La,ce,Te,U.length-1,0))},h.prototype.vb=function(U,ce){null==ce&&(ce=this.Ja,this.Ja+=1);var Te=Ht(U,dr);this.fb.push(Te),this.db.handleError(si(this.La,ce,Te,U.length,0))},h.prototype.mb=function(U,ce){null==ce&&(ce=this.Ja,this.Ja+=1),this.db.handleError((U===(0|U)?Gs:Ws)(this.La,ce,U))},h.prototype.yb=function(U){null==U&&(U=this.Ja,this.Ja+=1),si(this.La,U,0,0,0)},h.prototype.ob=function(U,ce){switch(null==ce&&(ce=this.Ja,this.Ja+=1),typeof U){case"string":return void this.nb(U,ce);case"number":return void this.mb(U,ce);case"bigint":return void this.nb(U.toString(),ce);case"boolean":return void this.mb(U+0,ce);case"object":if(null===U)return void this.yb(ce);if(null!=U.length)return void this.vb(U,ce)}throw"Wrong API use : tried to bind a value of an unknown type ("+U+")."},h.prototype.xb=function(U){var ce=this;return Object.keys(U).forEach(function(Te){var De=Vs(ce.La,Te);0!==De&&ce.ob(U[Te],De)}),!0},h.prototype.wb=function(U){for(var ce=0;ce<U.length;ce+=1)this.ob(U[ce],ce+1);return!0},h.prototype.reset=function(){return this.freemem(),0===no(this.La)&&0===ro(this.La)},h.prototype.freemem=function(){for(var U;void 0!==(U=this.fb.pop());)Kr(U)},h.prototype.free=function(){this.freemem();var U=0===io(this.La);return delete this.db.Za[this.La],this.La=0,U},w.prototype.next=function(){if(null===this.Ya)return{done:!0};if(null!==this.Ua&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var U=Tr(),ce=Yt(4);S(V),S(ce);try{this.db.handleError(ii(this.db.db,this.eb,-1,V,ce)),this.eb=K(ce,"i32");var Te=K(V,"i32");return 0===Te?(this.gb(),{done:!0}):(this.Ua=new h(Te,this.db),this.db.Za[Te]=this.Ua,{value:this.Ua,done:!1})}catch(De){throw this.ib=ne(this.eb),this.gb(),De}finally{kr(U)}},w.prototype.gb=function(){Kr(this.Ya),this.Ya=null},w.prototype.getRemainingSQL=function(){return null!==this.ib?this.ib:ne(this.eb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(w.prototype[Symbol.iterator]=function(){return this}),I.prototype.run=function(U,ce){if(!this.db)throw"Database closed";if(ce){U=this.prepare(U,ce);try{U.step()}finally{U.free()}}else this.handleError(Ne(this.db,U,0,0,V));return this},I.prototype.exec=function(U,ce,Te){if(!this.db)throw"Database closed";var De=Tr(),Be=null;try{var He=Ft(U),At=Yt(4);for(U=[];0!==K(He,"i8");){S(V),S(At),this.handleError(ii(this.db,He,-1,V,At));var bt=K(V,"i32");if(He=K(At,"i32"),0!==bt){var yt=null;for(Be=new h(bt,this),null!=ce&&Be.bind(ce);Be.step();)null===yt&&(yt={columns:Be.getColumnNames(),values:[]},U.push(yt)),yt.values.push(Be.get(null,Te));Be.free()}}return U}catch(Tt){throw Be&&Be.free(),Tt}finally{kr(De)}},I.prototype.each=function(U,ce,Te,De,Be){"function"==typeof ce&&(De=Te,Te=ce,ce=void 0),U=this.prepare(U,ce);try{for(;U.step();)Te(U.getAsObject(null,Be))}finally{U.free()}if("function"==typeof De)return De()},I.prototype.prepare=function(U,ce){if(S(V),this.handleError(nt(this.db,U,-1,V,0)),0===(U=K(V,"i32")))throw"Nothing to prepare";var Te=new h(U,this);return null!=ce&&Te.bind(ce),this.Za[U]=Te},I.prototype.iterateStatements=function(U){return new w(U,this)},I.prototype.export=function(){Object.values(this.Za).forEach(function(ce){ce.free()}),Object.values(this.Na).forEach($t),this.Na={},this.handleError(Me(this.db));var U=function hn(a){var l,h=It(a,h||0);a=Vt(a).size;var w=new Uint8Array(a);return hr(h,w,0,a,0),l=w,wr(h),l}(this.filename);return this.handleError(Se(this.filename,V)),this.db=K(V,"i32"),li(this.db),U},I.prototype.close=function(){null!==this.db&&(Object.values(this.Za).forEach(function(U){U.free()}),Object.values(this.Na).forEach($t),this.Na={},this.handleError(Me(this.db)),_r("/"+this.filename),this.db=null)},I.prototype.handleError=function(U){if(0===U)return null;throw U=Ks(this.db),Error(U)},I.prototype.getRowsModified=function(){return tt(this.db)},I.prototype.create_function=function(U,ce){Object.prototype.hasOwnProperty.call(this.Na,U)&&($t(this.Na[U]),delete this.Na[U]);var Te=Vr(function(De,Be,He){Be=l(Be,He);try{var At=ce.apply(null,Be)}catch(bt){return void Zr(De,bt,-1)}a(De,At)},"viii");return this.Na[U]=Te,this.handleError(ai(this.db,U,ce.length,1,0,Te,0,0,0)),this},I.prototype.create_aggregate=function(U,ce){var Te=ce.init||function(){return null},De=ce.finalize||function(yt){return yt},Be=ce.step;if(!Be)throw"An aggregate function must have a step function in "+U;var He={};Object.hasOwnProperty.call(this.Na,U)&&($t(this.Na[U]),delete this.Na[U]),ce=U+"__finalize",Object.hasOwnProperty.call(this.Na,ce)&&($t(this.Na[ce]),delete this.Na[ce]);var At=Vr(function(yt,Tt,dn){var sr=ui(yt,1);Object.hasOwnProperty.call(He,sr)||(He[sr]=Te()),Tt=l(Tt,dn),Tt=[He[sr]].concat(Tt);try{He[sr]=Be.apply(null,Tt)}catch(po){delete He[sr],Zr(yt,po,-1)}},"viii"),bt=Vr(function(yt){var Tt=ui(yt,1);try{var dn=De(He[Tt])}catch(sr){return delete He[Tt],void Zr(yt,sr,-1)}a(yt,dn),delete He[Tt]},"vi");return this.Na[U]=At,this.Na[ce]=bt,this.handleError(ai(this.db,U,Be.length-1,1,0,0,At,bt,0)),this},u.Database=I};var T,A,P,p=Object.assign({},u),m="./this.program",v="object"==typeof window,g="function"==typeof importScripts,E="object"==typeof zt&&"object"==typeof zt.versions&&"string"==typeof zt.versions.node,b="";if(E){var N=gs,M=ws;b=g?M.dirname(b)+"/":"/Volumes/Development_Lacie/Development/new/jeep-sqlite/node_modules/sql.js/dist/",T=(a,l)=>(a=Ue(a)?new URL(a):M.normalize(a),N.readFileSync(a,l?void 0:"utf8")),P=a=>((a=T(a,!0)).buffer||(a=new Uint8Array(a)),a),A=(a,l,h,w=!0)=>{a=Ue(a)?new URL(a):M.normalize(a),N.readFile(a,w?void 0:"utf8",(I,V)=>{I?h(I):l(w?V.buffer:V)})},!u.thisProgram&&1<zt.argv.length&&(m=zt.argv[1].replace(/\\/g,"/")),zt.argv.slice(2),o.exports=u,u.inspect=()=>"[Emscripten Module object]"}else(v||g)&&(g?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=0!==b.indexOf("blob:")?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",T=a=>{var l=new XMLHttpRequest;return l.open("GET",a,!1),l.send(null),l.responseText},g&&(P=a=>{var l=new XMLHttpRequest;return l.open("GET",a,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),A=(a,l,h)=>{var w=new XMLHttpRequest;w.open("GET",a,!0),w.responseType="arraybuffer",w.onload=()=>{200==w.status||0==w.status&&w.response?l(w.response):h()},w.onerror=h,w.send(null)});var q,D=u.print||console.log.bind(console),H=u.printErr||console.error.bind(console);Object.assign(u,p),p=null,u.thisProgram&&(m=u.thisProgram),u.wasmBinary&&(q=u.wasmBinary),"object"!=typeof WebAssembly&&ve("no native wasm support detected");var Q,te,de,j,L,y,J,xe,Y=!1;function ae(){var a=Q.buffer;u.HEAP8=te=new Int8Array(a),u.HEAP16=j=new Int16Array(a),u.HEAPU8=de=new Uint8Array(a),u.HEAPU16=new Uint16Array(a),u.HEAP32=L=new Int32Array(a),u.HEAPU32=y=new Uint32Array(a),u.HEAPF32=J=new Float32Array(a),u.HEAPF64=xe=new Float64Array(a)}var Ie=[],fe=[],Pe=[];function G(){var a=u.preRun.shift();Ie.unshift(a)}var W=0,Ee=null;function ve(a){var l,h;throw null===(l=(h=u).onAbort)||void 0===l||l.call(h,a),H(a="Aborted("+a+")"),Y=!0,new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.")}var Ke,ge=a=>a.startsWith("data:application/octet-stream;base64,"),Ue=a=>a.startsWith("file://");if(!ge(Ke="sql-wasm.wasm")){var Ce=Ke;Ke=u.locateFile?u.locateFile(Ce,b):b+Ce}function $e(a){if(a==Ke&&q)return new Uint8Array(q);if(P)return P(a);throw"both async and sync fetching of the wasm failed"}function Ve(a,l,h){return function Je(a){if(!q&&(v||g)){if("function"==typeof fetch&&!Ue(a))return fetch(a,{credentials:"same-origin"}).then(l=>{if(!l.ok)throw"failed to load wasm binary file at '"+a+"'";return l.arrayBuffer()}).catch(()=>$e(a));if(A)return new Promise((l,h)=>{A(a,w=>l(new Uint8Array(w)),h)})}return Promise.resolve().then(()=>$e(a))}(a).then(w=>WebAssembly.instantiate(w,l)).then(w=>w).then(h,w=>{H(`failed to asynchronously prepare wasm: ${w}`),ve(w)})}var we,d,Z=a=>{for(;0<a.length;)a.shift()(u)};function K(a,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":return te[0|a];case"i16":return j[a>>1];case"i32":return L[a>>2];case"i64":ve("to do getValue(i64) use WASM_BIGINT");case"float":return J[a>>2];case"double":return xe[a>>3];case"*":return y[a>>2];default:ve(`invalid type for getValue: ${l}`)}}function S(a){var l="i32";switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":te[0|a]=0;break;case"i16":j[a>>1]=0;break;case"i32":L[a>>2]=0;break;case"i64":ve("to do setValue(i64) use WASM_BIGINT");case"float":J[a>>2]=0;break;case"double":xe[a>>3]=0;break;case"*":y[a>>2]=0;break;default:ve(`invalid type for setValue: ${l}`)}}var x=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,C=(a,l,h)=>{var w=l+h;for(h=l;a[h]&&!(h>=w);)++h;if(16<h-l&&a.buffer&&x)return x.decode(a.subarray(l,h));for(w="";l<h;){var I=a[l++];if(128&I){var V=63&a[l++];if(192==(224&I))w+=String.fromCharCode((31&I)<<6|V);else{var ee=63&a[l++];65536>(I=224==(240&I)?(15&I)<<12|V<<6|ee:(7&I)<<18|V<<12|ee<<6|63&a[l++])?w+=String.fromCharCode(I):(I-=65536,w+=String.fromCharCode(55296|I>>10,56320|1023&I))}}else w+=String.fromCharCode(I)}return w},ne=(a,l)=>a?C(de,a,l):"",se=(a,l)=>{for(var h=0,w=a.length-1;0<=w;w--){var I=a[w];"."===I?a.splice(w,1):".."===I?(a.splice(w,1),h++):h&&(a.splice(w,1),h--)}if(l)for(;h;h--)a.unshift("..");return a},z=a=>{var l="/"===a.charAt(0),h="/"===a.substr(-1);return(a=se(a.split("/").filter(w=>!!w),!l).join("/"))||l||(a="."),a&&h&&(a+="/"),(l?"/":"")+a},he=a=>{var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1);return a=l[0],l=l[1],a||l?(l&&(l=l.substr(0,l.length-1)),a+l):"."},be=a=>{if("/"===a)return"/";var l=(a=(a=z(a)).replace(/\/$/,"")).lastIndexOf("/");return-1===l?a:a.substr(l+1)},Ae=a=>(Ae=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return h=>crypto.getRandomValues(h);if(E)try{var a=mr(1426);if(a.randomFillSync)return h=>a.randomFillSync(h);var l=a.randomBytes;return h=>(h.set(l(h.byteLength)),h)}catch{}ve("initRandomDevice")})())(a);function Le(){for(var a="",l=!1,h=arguments.length-1;-1<=h&&!l;h--){if("string"!=typeof(l=0<=h?arguments[h]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";a=l+"/"+a,l="/"===l.charAt(0)}return(l?"/":"")+(a=se(a.split("/").filter(w=>!!w),!l).join("/"))||"."}var Re=[],et=a=>{for(var l=0,h=0;h<a.length;++h){var w=a.charCodeAt(h);127>=w?l++:2047>=w?l+=2:55296<=w&&57343>=w?(l+=4,++h):l+=3}return l},ct=(a,l,h,w)=>{if(!(0<w))return 0;var I=h;w=h+w-1;for(var V=0;V<a.length;++V){var ee=a.charCodeAt(V);if(55296<=ee&&57343>=ee&&(ee=65536+((1023&ee)<<10)|1023&a.charCodeAt(++V)),127>=ee){if(h>=w)break;l[h++]=ee}else{if(2047>=ee){if(h+1>=w)break;l[h++]=192|ee>>6}else{if(65535>=ee){if(h+2>=w)break;l[h++]=224|ee>>12}else{if(h+3>=w)break;l[h++]=240|ee>>18,l[h++]=128|ee>>12&63}l[h++]=128|ee>>6&63}l[h++]=128|63&ee}}return l[h]=0,h-I};function st(a,l){var h=Array(et(a)+1);return a=ct(a,h,0,h.length),l&&(h.length=a),h}var wt=[];function We(a,l){wt[a]={input:[],output:[],Xa:l},vr(a,St)}var St={open(a){var l=wt[a.node.rdev];if(!l)throw new ye(43);a.tty=l,a.seekable=!1},close(a){a.tty.Xa.fsync(a.tty)},fsync(a){a.tty.Xa.fsync(a.tty)},read(a,l,h,w){if(!a.tty||!a.tty.Xa.sb)throw new ye(60);for(var I=0,V=0;V<w;V++){try{var ee=a.tty.Xa.sb(a.tty)}catch{throw new ye(29)}if(void 0===ee&&0===I)throw new ye(6);if(null==ee)break;I++,l[h+V]=ee}return I&&(a.node.timestamp=Date.now()),I},write(a,l,h,w){if(!a.tty||!a.tty.Xa.jb)throw new ye(60);try{for(var I=0;I<w;I++)a.tty.Xa.jb(a.tty,l[h+I])}catch{throw new ye(29)}return w&&(a.node.timestamp=Date.now()),I}},tr={sb(){e:{if(!Re.length){var a=null;if(E){var l=re.alloc(256),h=0,w=zt.stdin.fd;try{h=N.readSync(w,l)}catch(I){if(!I.toString().includes("EOF"))throw I;h=0}a=0<h?l.slice(0,h).toString("utf-8"):null}else typeof window<"u"&&"function"==typeof window.prompt?null!==(a=window.prompt("Input: "))&&(a+="\n"):"function"==typeof readline&&null!==(a=readline())&&(a+="\n");if(!a){a=null;break e}Re=st(a,!0)}a=Re.shift()}return a},jb(a,l){null===l||10===l?(D(C(a.output,0)),a.output=[]):0!=l&&a.output.push(l)},fsync(a){a.output&&0<a.output.length&&(D(C(a.output,0)),a.output=[])},Mb:()=>({Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),Nb:()=>0,Ob:()=>[24,80]},mt={jb(a,l){null===l||10===l?(H(C(a.output,0)),a.output=[]):0!=l&&a.output.push(l)},fsync(a){a.output&&0<a.output.length&&(H(C(a.output,0)),a.output=[])}};function Ot(a,l){var h=a.Ia?a.Ia.length:0;h>=l||(l=Math.max(l,h*(1048576>h?2:1.125)>>>0),0!=h&&(l=Math.max(l,256)),h=a.Ia,a.Ia=new Uint8Array(l),0<a.Ma&&a.Ia.set(h.subarray(0,a.Ma),0))}var je={Qa:null,Ra:()=>je.createNode(null,"/",16895,0),createNode(a,l,h,w){if(24576==(61440&h)||4096==(61440&h))throw new ye(63);return je.Qa||(je.Qa={dir:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa,lookup:je.Ga.lookup,ab:je.Ga.ab,rename:je.Ga.rename,unlink:je.Ga.unlink,rmdir:je.Ga.rmdir,readdir:je.Ga.readdir,symlink:je.Ga.symlink},stream:{Ta:je.Ha.Ta}},file:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa},stream:{Ta:je.Ha.Ta,read:je.Ha.read,write:je.Ha.write,lb:je.Ha.lb,bb:je.Ha.bb,cb:je.Ha.cb}},link:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa,readlink:je.Ga.readlink},stream:{}},pb:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa},stream:fn}}),ut((h=Fr(a,l,h,w)).mode)?(h.Ga=je.Qa.dir.node,h.Ha=je.Qa.dir.stream,h.Ia={}):32768==(61440&h.mode)?(h.Ga=je.Qa.file.node,h.Ha=je.Qa.file.stream,h.Ma=0,h.Ia=null):40960==(61440&h.mode)?(h.Ga=je.Qa.link.node,h.Ha=je.Qa.link.stream):8192==(61440&h.mode)&&(h.Ga=je.Qa.pb.node,h.Ha=je.Qa.pb.stream),h.timestamp=Date.now(),a&&(a.Ia[l]=h,a.timestamp=h.timestamp),h},Lb:a=>a.Ia?a.Ia.subarray?a.Ia.subarray(0,a.Ma):new Uint8Array(a.Ia):new Uint8Array(0),Ga:{Pa(a){var l={};return l.dev=8192==(61440&a.mode)?a.id:1,l.ino=a.id,l.mode=a.mode,l.nlink=1,l.uid=0,l.gid=0,l.rdev=a.rdev,l.size=ut(a.mode)?4096:32768==(61440&a.mode)?a.Ma:40960==(61440&a.mode)?a.link.length:0,l.atime=new Date(a.timestamp),l.mtime=new Date(a.timestamp),l.ctime=new Date(a.timestamp),l.zb=4096,l.blocks=Math.ceil(l.size/l.zb),l},Oa(a,l){if(void 0!==l.mode&&(a.mode=l.mode),void 0!==l.timestamp&&(a.timestamp=l.timestamp),void 0!==l.size&&a.Ma!=(l=l.size))if(0==l)a.Ia=null,a.Ma=0;else{var h=a.Ia;a.Ia=new Uint8Array(l),h&&a.Ia.set(h.subarray(0,Math.min(l,a.Ma))),a.Ma=l}},lookup(){throw yr[44]},ab:(a,l,h,w)=>je.createNode(a,l,h,w),rename(a,l,h){if(ut(a.mode)){try{var w=Ct(l,h)}catch{}if(w)for(var I in w.Ia)throw new ye(55)}delete a.parent.Ia[a.name],a.parent.timestamp=Date.now(),a.name=h,l.Ia[h]=a,l.timestamp=a.parent.timestamp,a.parent=l},unlink(a,l){delete a.Ia[l],a.timestamp=Date.now()},rmdir(a,l){var w,h=Ct(a,l);for(w in h.Ia)throw new ye(55);delete a.Ia[l],a.timestamp=Date.now()},readdir(a){var h,l=[".",".."];for(h of Object.keys(a.Ia))l.push(h);return l},symlink:(a,l,h)=>((a=je.createNode(a,l,41471,0)).link=h,a),readlink(a){if(40960!=(61440&a.mode))throw new ye(28);return a.link}},Ha:{read(a,l,h,w,I){var V=a.node.Ia;if(I>=a.node.Ma)return 0;if(8<(a=Math.min(a.node.Ma-I,w))&&V.subarray)l.set(V.subarray(I,I+a),h);else for(w=0;w<a;w++)l[h+w]=V[I+w];return a},write(a,l,h,w,I,V){if(l.buffer===te.buffer&&(V=!1),!w)return 0;if((a=a.node).timestamp=Date.now(),l.subarray&&(!a.Ia||a.Ia.subarray)){if(V)return a.Ia=l.subarray(h,h+w),a.Ma=w;if(0===a.Ma&&0===I)return a.Ia=l.slice(h,h+w),a.Ma=w;if(I+w<=a.Ma)return a.Ia.set(l.subarray(h,h+w),I),w}if(Ot(a,I+w),a.Ia.subarray&&l.subarray)a.Ia.set(l.subarray(h,h+w),I);else for(V=0;V<w;V++)a.Ia[I+V]=l[h+V];return a.Ma=Math.max(a.Ma,I+w),w},Ta(a,l,h){if(1===h?l+=a.position:2===h&&32768==(61440&a.node.mode)&&(l+=a.node.Ma),0>l)throw new ye(28);return l},lb(a,l,h){Ot(a.node,l+h),a.node.Ma=Math.max(a.node.Ma,l+h)},bb(a,l,h,w,I){if(32768!=(61440&a.node.mode))throw new ye(43);if(a=a.node.Ia,2&I||a.buffer!==te.buffer){if((0<h||h+l<a.length)&&(a=a.subarray?a.subarray(h,h+l):Array.prototype.slice.call(a,h,h+l)),h=!0,l=65536*Math.ceil(l/65536),(I=ti(65536,l))?(de.fill(0,I,I+l),l=I):l=0,!l)throw new ye(48);te.set(a,l)}else h=!1,l=a.byteOffset;return{Db:l,ub:h}},cb:(a,l,h,w)=>(je.Ha.write(a,l,0,w,h,!1),0)}},cr=(a,l)=>{var h=0;return a&&(h|=365),l&&(h|=146),h},dt=null,rr={},pt=[],Nt=1,Dt=null,Cr=!0,ye=null,yr={};function ot(a,l={}){if(!(a=Le(a)))return{path:"",node:null};if(8<(l=Object.assign({qb:!0,kb:0},l)).kb)throw new ye(32);a=a.split("/").filter(ee=>!!ee);for(var h=dt,w="/",I=0;I<a.length;I++){var V=I===a.length-1;if(V&&l.parent)break;if(h=Ct(h,a[I]),w=z(w+"/"+a[I]),h.Va&&(!V||V&&l.qb)&&(h=h.Va.root),!V||l.Sa)for(V=0;40960==(61440&h.mode);)if(h=Gt(w),h=ot(w=Le(he(w),h),{kb:l.kb+1}).node,40<V++)throw new ye(32)}return{path:w,node:h}}function nr(a){for(var l;;){if(a===a.parent)return a=a.Ra.tb,l?"/"!==a[a.length-1]?`${a}/${l}`:a+l:a;l=l?`${a.name}/${l}`:a.name,a=a.parent}}function gr(a,l){for(var h=0,w=0;w<l.length;w++)h=(h<<5)-h+l.charCodeAt(w)|0;return(a+h>>>0)%Dt.length}function Br(a){var l=gr(a.parent.id,a.name);if(Dt[l]===a)Dt[l]=a.Wa;else for(l=Dt[l];l;){if(l.Wa===a){l.Wa=a.Wa;break}l=l.Wa}}function Ct(a,l){var h;if(h=(h=Wt(a,"x"))?h:a.Ga.lookup?0:2)throw new ye(h,a);for(h=Dt[gr(a.id,l)];h;h=h.Wa)if(h.parent.id===a.id&&h.name===l)return h;return a.Ga.lookup(a,l)}function Fr(a,l,h,w){return l=gr((a=new Jn(a,l,h,w)).parent.id,a.name),a.Wa=Dt[l],Dt[l]=a}function ut(a){return 16384==(61440&a)}function $r(a){var l=["r","w","rw"][3&a];return 512&a&&(l+="w"),l}function Wt(a,l){return Cr?0:!l.includes("r")||292&a.mode?l.includes("w")&&!(146&a.mode)||l.includes("x")&&!(73&a.mode)?2:0:2}function Lr(a,l){try{return Ct(a,l),20}catch{}return Wt(a,"wx")}function Mr(a,l,h){try{var w=Ct(a,l)}catch(I){return I.Ka}if(a=Wt(a,"wx"))return a;if(h){if(!ut(w.mode))return 54;if(w===w.parent||"/"===nr(w))return 10}else if(ut(w.mode))return 31;return 0}function it(a){if(!(a=pt[a]))throw new ye(8);return a}function zr(a,l=-1){return F||((F=function(){this.$a={}}).prototype={},Object.defineProperties(F.prototype,{object:{get(){return this.node},set(h){this.node=h}},flags:{get(){return this.$a.flags},set(h){this.$a.flags=h}},position:{get(){return this.$a.position},set(h){this.$a.position=h}}})),a=Object.assign(new F,a),-1==l&&(l=function ln(){for(var a=0;4096>=a;a++)if(!pt[a])return a;throw new ye(33)}()),a.fd=l,pt[l]=a}var R,fn={open(a){var l,h;a.Ha=rr[a.node.rdev].Ha,null===(l=(h=a.Ha).open)||void 0===l||l.call(h,a)},Ta(){throw new ye(70)}};function vr(a,l){rr[a]={Ha:l}}function qr(a,l){var h="/"===l,w=!l;if(h&&dt)throw new ye(10);if(!h&&!w){var I=ot(l,{qb:!1});if(l=I.path,(I=I.node).Va)throw new ye(10);if(!ut(I.mode))throw new ye(54)}(a=a.Ra(l={type:a,Pb:{},tb:l,Cb:[]})).Ra=l,l.root=a,h?dt=a:I&&(I.Va=l,I.Ra&&I.Ra.Cb.push(l))}function ur(a,l,h){var w=ot(a,{parent:!0}).node;if(!(a=be(a))||"."===a||".."===a)throw new ye(28);var I=Lr(w,a);if(I)throw new ye(I);if(!w.Ga.ab)throw new ye(63);return w.Ga.ab(w,a,l,h)}function vt(a,l){return ur(a,1023&(void 0!==l?l:511)|16384,0)}function lr(a,l,h){typeof h>"u"&&(h=l,l=438),ur(a,8192|l,h)}function br(a,l){if(!Le(a))throw new ye(44);var h=ot(l,{parent:!0}).node;if(!h)throw new ye(44);var w=Lr(h,l=be(l));if(w)throw new ye(w);if(!h.Ga.symlink)throw new ye(63);h.Ga.symlink(h,l,a)}function Ur(a){var l=ot(a,{parent:!0}).node,h=Ct(l,a=be(a)),w=Mr(l,a,!0);if(w)throw new ye(w);if(!l.Ga.rmdir)throw new ye(63);if(h.Va)throw new ye(10);l.Ga.rmdir(l,a),Br(h)}function _r(a){var l=ot(a,{parent:!0}).node;if(!l)throw new ye(44);var h=Ct(l,a=be(a)),w=Mr(l,a,!1);if(w)throw new ye(w);if(!l.Ga.unlink)throw new ye(63);if(h.Va)throw new ye(10);l.Ga.unlink(l,a),Br(h)}function Gt(a){if(!(a=ot(a).node))throw new ye(44);if(!a.Ga.readlink)throw new ye(28);return Le(nr(a.parent),a.Ga.readlink(a))}function Vt(a,l){if(!(a=ot(a,{Sa:!l}).node))throw new ye(44);if(!a.Ga.Pa)throw new ye(63);return a.Ga.Pa(a)}function Bt(a){return Vt(a,!0)}function fr(a,l){if(!(a="string"==typeof a?ot(a,{Sa:!0}).node:a).Ga.Oa)throw new ye(63);a.Ga.Oa(a,{mode:4095&l|-4096&a.mode,timestamp:Date.now()})}function ir(a,l){if(0>l)throw new ye(28);if(!(a="string"==typeof a?ot(a,{Sa:!0}).node:a).Ga.Oa)throw new ye(63);if(ut(a.mode))throw new ye(31);if(32768!=(61440&a.mode))throw new ye(28);var h=Wt(a,"w");if(h)throw new ye(h);a.Ga.Oa(a,{size:l,timestamp:Date.now()})}function It(a,l,h){if(""===a)throw new ye(44);if("string"==typeof l){var w={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[l];if(typeof w>"u")throw Error(`Unknown file open mode: ${l}`);l=w}if(h=64&l?4095&(typeof h>"u"?438:h)|32768:0,"object"==typeof a)var I=a;else{a=z(a);try{I=ot(a,{Sa:!(131072&l)}).node}catch{}}if(w=!1,64&l)if(I){if(128&l)throw new ye(20)}else I=ur(a,h,0),w=!0;if(!I)throw new ye(44);if(8192==(61440&I.mode)&&(l&=-513),65536&l&&!ut(I.mode))throw new ye(54);if(!w&&(h=I?40960==(61440&I.mode)?32:ut(I.mode)&&("r"!==$r(l)||512&l)?31:Wt(I,$r(l)):44))throw new ye(h);return 512&l&&!w&&ir(I,0),l&=-131713,(I=zr({node:I,path:nr(I),flags:l,seekable:!0,position:0,Ha:I.Ha,Fb:[],error:!1})).Ha.open&&I.Ha.open(I),!u.logReadFiles||1&l||(X||(X={}),a in X||(X[a]=1)),I}function wr(a){if(null===a.fd)throw new ye(8);a.hb&&(a.hb=null);try{a.Ha.close&&a.Ha.close(a)}catch(l){throw l}finally{pt[a.fd]=null}a.fd=null}function Wr(a,l,h){if(null===a.fd)throw new ye(8);if(!a.seekable||!a.Ha.Ta)throw new ye(70);if(0!=h&&1!=h&&2!=h)throw new ye(28);a.position=a.Ha.Ta(a,l,h),a.Fb=[]}function hr(a,l,h,w,I){if(0>w||0>I)throw new ye(28);if(null===a.fd)throw new ye(8);if(1==(2097155&a.flags))throw new ye(8);if(ut(a.node.mode))throw new ye(31);if(!a.Ha.read)throw new ye(28);var V=typeof I<"u";if(V){if(!a.seekable)throw new ye(70)}else I=a.position;return l=a.Ha.read(a,l,h,w,I),V||(a.position+=l),l}function Gr(a,l,h,w,I){if(0>w||0>I)throw new ye(28);if(null===a.fd)throw new ye(8);if(!(2097155&a.flags))throw new ye(8);if(ut(a.node.mode))throw new ye(31);if(!a.Ha.write)throw new ye(28);a.seekable&&1024&a.flags&&Wr(a,0,2);var V=typeof I<"u";if(V){if(!a.seekable)throw new ye(70)}else I=a.position;return l=a.Ha.write(a,l,h,w,I,void 0),V||(a.position+=l),l}function _(){ye||((ye=function(a,l){this.name="ErrnoError",this.node=l,this.Eb=function(h){this.Ka=h},this.Eb(a),this.message="FS error"}).prototype=Error(),ye.prototype.constructor=ye,[44].forEach(a=>{yr[a]=new ye(a),yr[a].stack="<generic error, no stack>"}))}function k(a,l,h){a=z("/dev/"+a);var w=cr(!!l,!!h);$||($=64);var I=$++<<8;vr(I,{open(V){V.seekable=!1},close(){var V;null!=h&&null!==(V=h.buffer)&&void 0!==V&&V.length&&h(10)},read(V,ee,Se,Me){for(var Ne=0,tt=0;tt<Me;tt++){try{var nt=l()}catch{throw new ye(29)}if(void 0===nt&&0===Ne)throw new ye(6);if(null==nt)break;Ne++,ee[Se+tt]=nt}return Ne&&(V.node.timestamp=Date.now()),Ne},write(V,ee,Se,Me){for(var Ne=0;Ne<Me;Ne++)try{h(ee[Se+Ne])}catch{throw new ye(29)}return Me&&(V.node.timestamp=Date.now()),Ne}}),lr(a,w,I)}var $,F,X,B={};function oe(a,l,h){if("/"===l.charAt(0))return l;if(a=-100===a?"/":it(a).path,0==l.length){if(!h)throw new ye(44);return a}return z(a+"/"+l)}function ue(a,l,h){try{var w=a(l)}catch(V){if(V&&V.node&&z(l)!==z(nr(V.node)))return-54;throw V}L[h>>2]=w.dev,L[h+4>>2]=w.mode,y[h+8>>2]=w.nlink,L[h+12>>2]=w.uid,L[h+16>>2]=w.gid,L[h+20>>2]=w.rdev,d=[w.size>>>0,(we=w.size,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+24>>2]=d[0],L[h+28>>2]=d[1],L[h+32>>2]=4096,L[h+36>>2]=w.blocks,a=w.atime.getTime(),l=w.mtime.getTime();var I=w.ctime.getTime();return d=[Math.floor(a/1e3)>>>0,(we=Math.floor(a/1e3),1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+40>>2]=d[0],L[h+44>>2]=d[1],y[h+48>>2]=a%1e3*1e3,d=[Math.floor(l/1e3)>>>0,(we=Math.floor(l/1e3),1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+56>>2]=d[0],L[h+60>>2]=d[1],y[h+64>>2]=l%1e3*1e3,d=[Math.floor(I/1e3)>>>0,(we=Math.floor(I/1e3),1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+72>>2]=d[0],L[h+76>>2]=d[1],y[h+80>>2]=I%1e3*1e3,d=[w.ino>>>0,(we=w.ino,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+88>>2]=d[0],L[h+92>>2]=d[1],0}var le=void 0;function pe(){var a=L[+le>>2];return le+=4,a}var at,Kt,Et,_e=(a,l)=>l+2097152>>>0<4194305-!!a?(a>>>0)+4294967296*l:NaN,Oe=[0,31,60,91,121,152,182,213,244,274,305,335],ze=[0,31,59,90,120,151,181,212,243,273,304,334],qe=a=>{var l=et(a)+1,h=Hr(l);return h&&ct(a,de,h,l),h},Ye={},Ze=()=>{if(!at){var l,a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(l in Ye)void 0===Ye[l]?delete a[l]:a[l]=Ye[l];var h=[];for(l in a)h.push(`${l}=${a[l]}`);at=h}return at},Ft=a=>{var l=et(a)+1,h=Yt(l);return ct(a,de,h,l),h},dr=0,Ht=(a,l)=>(l=1==l?Yt(a.length):Hr(a.length),a.subarray||a.slice||(a=new Uint8Array(a)),de.set(a,l),l),Ar=[],$t=a=>{Kt.delete(Et.get(a)),Et.set(a,null),Ar.push(a)},Vr=(a,l)=>{if(!Kt){var h=Et.length;if(Kt=new WeakMap)for(var w=0;w<0+h;w++){var I=Et.get(w);I&&Kt.set(I,w)}}if(h=Kt.get(a)||0)return h;if(Ar.length)h=Ar.pop();else{try{Et.grow(1)}catch(Se){throw Se instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Se}h=Et.length-1}try{Et.set(h,a)}catch(Se){if(!(Se instanceof TypeError))throw Se;if("function"==typeof WebAssembly.Function){w=WebAssembly.Function,I={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var V={parameters:[],results:"v"==l[0]?[]:[I[l[0]]]},ee=1;ee<l.length;++ee)V.parameters.push(I[l[ee]]);l=new w(V,a)}else{for(w=[1],I=l.slice(0,1),l=l.slice(1),V={i:127,p:127,j:126,f:125,d:124,e:111},w.push(96),128>(ee=l.length)?w.push(ee):w.push(ee%128|128,ee>>7),ee=0;ee<l.length;++ee)w.push(V[l[ee]]);"v"==I?w.push(0):w.push(1,V[I]),l=[0,97,115,109,1,0,0,0,1],128>(I=w.length)?l.push(I):l.push(I%128|128,I>>7),l.push.apply(l,w),l.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),l=new WebAssembly.Module(new Uint8Array(l)),l=new WebAssembly.Instance(l,{e:{f:a}}).exports.f}Et.set(h,l)}return Kt.set(a,h),h};function Jn(a,l,h,w){a||(a=this),this.parent=a,this.Ra=a.Ra,this.Va=null,this.id=Nt++,this.name=l,this.mode=h,this.Ga={},this.Ha={},this.rdev=w}Object.defineProperties(Jn.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(a){a?this.mode|=146:this.mode&=-147}}}),_(),Dt=Array(4096),qr(je,"/"),vt("/tmp"),vt("/home"),vt("/home/web_user"),function(){vt("/dev"),vr(259,{read:()=>0,write:(w,I,V,ee)=>ee}),lr("/dev/null",259),We(1280,tr),We(1536,mt),lr("/dev/tty",1280),lr("/dev/tty1",1536);var a=new Uint8Array(1024),l=0,h=()=>(0===l&&(l=Ae(a).byteLength),a[--l]);k("random",h),k("urandom",h),vt("/dev/shm"),vt("/dev/shm/tmp")}(),function(){vt("/proc");var a=vt("/proc/self");vt("/proc/self/fd"),qr({Ra(){var l=Fr(a,"fd",16895,73);return l.Ga={lookup(h,w){var I=it(+w);return(h={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>I.path}}).parent=h}},l}},"/proc/self/fd")}();var zs={a:(a,l,h,w)=>{ve(`Assertion failed: ${a?C(de,a):""}, at: `+[l?l?C(de,l):"":"unknown filename",h,w?w?C(de,w):"":"unknown function"])},h:function(a,l){try{return fr(a=a?C(de,a):"",l),0}catch(h){if(typeof B>"u"||"ErrnoError"!==h.name)throw h;return-h.Ka}},H:function(a,l,h){try{if(l=oe(a,l=l?C(de,l):""),-8&h)return-28;var w=ot(l,{Sa:!0}).node;return w?(a="",4&h&&(a+="r"),2&h&&(a+="w"),1&h&&(a+="x"),a&&Wt(w,a)?-2:0):-44}catch(I){if(typeof B>"u"||"ErrnoError"!==I.name)throw I;return-I.Ka}},i:function(a,l){try{return fr(it(a).node,l),0}catch(w){if(typeof B>"u"||"ErrnoError"!==w.name)throw w;return-w.Ka}},g:function(a){try{var l=it(a).node,h="string"==typeof l?ot(l,{Sa:!0}).node:l;if(!h.Ga.Oa)throw new ye(63);return h.Ga.Oa(h,{timestamp:Date.now()}),0}catch(w){if(typeof B>"u"||"ErrnoError"!==w.name)throw w;return-w.Ka}},b:function(a,l,h){le=h;try{var w=it(a);switch(l){case 0:var I=pe();if(0>I)return-28;for(;pt[I];)I++;return zr(w,I).fd;case 1:case 2:case 6:case 7:return 0;case 3:return w.flags;case 4:return I=pe(),w.flags|=I,0;case 5:return I=pe(),j[I+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return L[ei()>>2]=28,-1}}catch(V){if(typeof B>"u"||"ErrnoError"!==V.name)throw V;return-V.Ka}},f:function(a,l){try{return ue(Vt,it(a).path,l)}catch(w){if(typeof B>"u"||"ErrnoError"!==w.name)throw w;return-w.Ka}},n:function(a,l,h){l=_e(l,h);try{if(isNaN(l))return 61;var w=it(a);if(!(2097155&w.flags))throw new ye(28);return ir(w.node,l),0}catch(I){if(typeof B>"u"||"ErrnoError"!==I.name)throw I;return-I.Ka}},C:function(a,l){try{if(0===l)return-28;var h=et("/")+1;return l<h?-68:(ct("/",de,a,l),h)}catch(w){if(typeof B>"u"||"ErrnoError"!==w.name)throw w;return-w.Ka}},F:function(a,l){try{return ue(Bt,a=a?C(de,a):"",l)}catch(h){if(typeof B>"u"||"ErrnoError"!==h.name)throw h;return-h.Ka}},z:function(a,l,h){try{return l=oe(a,l=l?C(de,l):""),"/"===(l=z(l))[l.length-1]&&(l=l.substr(0,l.length-1)),vt(l,h),0}catch(w){if(typeof B>"u"||"ErrnoError"!==w.name)throw w;return-w.Ka}},E:function(a,l,h,w){try{return ue(256&w?Bt:Vt,l=oe(a,l=l?C(de,l):"",4096&w),h)}catch(V){if(typeof B>"u"||"ErrnoError"!==V.name)throw V;return-V.Ka}},y:function(a,l,h,w){le=w;try{return It(l=oe(a,l=l?C(de,l):""),h,w?pe():0).fd}catch(V){if(typeof B>"u"||"ErrnoError"!==V.name)throw V;return-V.Ka}},w:function(a,l,h,w){try{if(l=oe(a,l=l?C(de,l):""),0>=w)return-28;var I=Gt(l),V=Math.min(w,et(I)),ee=te[h+V];return ct(I,de,h,w+1),te[h+V]=ee,V}catch(Se){if(typeof B>"u"||"ErrnoError"!==Se.name)throw Se;return-Se.Ka}},v:function(a){try{return Ur(a=a?C(de,a):""),0}catch(l){if(typeof B>"u"||"ErrnoError"!==l.name)throw l;return-l.Ka}},G:function(a,l){try{return ue(Vt,a=a?C(de,a):"",l)}catch(h){if(typeof B>"u"||"ErrnoError"!==h.name)throw h;return-h.Ka}},r:function(a,l,h){try{return l=oe(a,l=l?C(de,l):""),0===h?_r(l):512===h?Ur(l):ve("Invalid flags passed to unlinkat"),0}catch(w){if(typeof B>"u"||"ErrnoError"!==w.name)throw w;return-w.Ka}},q:function(a,l,h){try{if(l=oe(a,l=l?C(de,l):"",!0),h){var w=y[h>>2]+4294967296*L[h+4>>2],I=L[h+8>>2];V=1e3*w+I/1e6,ee=1e3*(w=y[(h+=16)>>2]+4294967296*L[h+4>>2])+(I=L[h+8>>2])/1e6}else var V=Date.now(),ee=V;a=V;var Se=ot(l,{Sa:!0}).node;return Se.Ga.Oa(Se,{timestamp:Math.max(a,ee)}),0}catch(Me){if(typeof B>"u"||"ErrnoError"!==Me.name)throw Me;return-Me.Ka}},l:function(a,l,h){a=new Date(1e3*_e(a,l)),L[h>>2]=a.getSeconds(),L[h+4>>2]=a.getMinutes(),L[h+8>>2]=a.getHours(),L[h+12>>2]=a.getDate(),L[h+16>>2]=a.getMonth(),L[h+20>>2]=a.getFullYear()-1900,L[h+24>>2]=a.getDay(),l=a.getFullYear(),L[h+28>>2]=(l%4!=0||l%100==0&&l%400!=0?ze:Oe)[a.getMonth()]+a.getDate()-1|0,L[h+36>>2]=-60*a.getTimezoneOffset(),l=new Date(a.getFullYear(),6,1).getTimezoneOffset();var w=new Date(a.getFullYear(),0,1).getTimezoneOffset();L[h+32>>2]=0|(l!=w&&a.getTimezoneOffset()==Math.min(w,l))},j:function(a,l,h,w,I,V,ee,Se){I=_e(I,V);try{if(isNaN(I))return 61;var Me=it(w);if(2&l&&!(2&h)&&2!=(2097155&Me.flags))throw new ye(2);if(1==(2097155&Me.flags))throw new ye(2);if(!Me.Ha.bb)throw new ye(43);var Ne=Me.Ha.bb(Me,a,I,l,h),tt=Ne.Db;return L[ee>>2]=Ne.ub,y[Se>>2]=tt,0}catch(nt){if(typeof B>"u"||"ErrnoError"!==nt.name)throw nt;return-nt.Ka}},k:function(a,l,h,w,I,V,ee){V=_e(V,ee);try{if(isNaN(V))return 61;var Se=it(I);if(2&h){if(32768!=(61440&Se.node.mode))throw new ye(43);if(!(2&w)){var Me=de.slice(a,a+l);Se.Ha.cb&&Se.Ha.cb(Se,Me,V,l,w)}}}catch(Ne){if(typeof B>"u"||"ErrnoError"!==Ne.name)throw Ne;return-Ne.Ka}},s:(a,l,h)=>{function w(Me){return(Me=Me.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Me[1]:"GMT"}var I=(new Date).getFullYear(),V=new Date(I,0,1),ee=new Date(I,6,1);I=V.getTimezoneOffset();var Se=ee.getTimezoneOffset();y[a>>2]=60*Math.max(I,Se),L[l>>2]=+(I!=Se),a=w(V),l=w(ee),a=qe(a),l=qe(l),Se<I?(y[h>>2]=a,y[h+4>>2]=l):(y[h>>2]=l,y[h+4>>2]=a)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:a=>{var l=de.length;if(2147483648<(a>>>=0))return!1;for(var h=1;4>=h;h*=2){var w=l*(1+.2/h);w=Math.min(w,a+100663296);var I=Math;w=Math.max(a,w);e:{I=(I.min.call(I,2147483648,w+(65536-w%65536)%65536)-Q.buffer.byteLength+65535)/65536;try{Q.grow(I),ae();var V=1;break e}catch{}V=void 0}if(V)return!0}return!1},A:(a,l)=>{var h=0;return Ze().forEach((w,I)=>{var V=l+h;for(I=y[a+4*I>>2]=V,V=0;V<w.length;++V)te[0|I++]=w.charCodeAt(V);te[0|I]=0,h+=w.length+1}),0},B:(a,l)=>{var h=Ze();y[a>>2]=h.length;var w=0;return h.forEach(I=>w+=I.length+1),y[l>>2]=w,0},e:function(a){try{return wr(it(a)),0}catch(h){if(typeof B>"u"||"ErrnoError"!==h.name)throw h;return h.Ka}},p:function(a,l){try{var h=it(a);return te[0|l]=h.tty?2:ut(h.mode)?3:40960==(61440&h.mode)?7:4,j[l+2>>1]=0,d=[0,(we=0,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[l+8>>2]=d[0],L[l+12>>2]=d[1],d=[0,(we=0,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[l+16>>2]=d[0],L[l+20>>2]=d[1],0}catch(w){if(typeof B>"u"||"ErrnoError"!==w.name)throw w;return w.Ka}},x:function(a,l,h,w){try{e:{var I=it(a);a=l;for(var V,ee=l=0;ee<h;ee++){var Se=y[a>>2],Me=y[a+4>>2];a+=8;var Ne=hr(I,te,Se,Me,V);if(0>Ne){var tt=-1;break e}if(l+=Ne,Ne<Me)break;typeof V<"u"&&(V+=Ne)}tt=l}return y[w>>2]=tt,0}catch(nt){if(typeof B>"u"||"ErrnoError"!==nt.name)throw nt;return nt.Ka}},m:function(a,l,h,w,I){l=_e(l,h);try{if(isNaN(l))return 61;var V=it(a);return Wr(V,l,w),d=[V.position>>>0,(we=V.position,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[I>>2]=d[0],L[I+4>>2]=d[1],V.hb&&0===l&&0===w&&(V.hb=null),0}catch(ee){if(typeof B>"u"||"ErrnoError"!==ee.name)throw ee;return ee.Ka}},D:function(a){try{var l,h=it(a);return null!==(l=h.Ha)&&void 0!==l&&l.fsync?h.Ha.fsync(h):0}catch(w){if(typeof B>"u"||"ErrnoError"!==w.name)throw w;return w.Ka}},u:function(a,l,h,w){try{e:{var I=it(a);a=l;for(var V,ee=l=0;ee<h;ee++){var Se=y[a>>2],Me=y[a+4>>2];a+=8;var Ne=Gr(I,te,Se,Me,V);if(0>Ne){var tt=-1;break e}l+=Ne,typeof V<"u"&&(V+=Ne)}tt=l}return y[w>>2]=tt,0}catch(nt){if(typeof B>"u"||"ErrnoError"!==nt.name)throw nt;return nt.Ka}}},ke=function(a,l){function h(I){var V,ee;return Q=(ke=I.exports).I,ae(),Et=ke.Aa,fe.unshift(ke.J),W--,null===(V=(ee=u).monitorRunDependencies)||void 0===V||V.call(ee,W),0==W&&Ee&&(I=Ee,Ee=null,I()),ke}var w={a:zs};if(W++,null===(a=(l=u).monitorRunDependencies)||void 0===a||a.call(l,W),u.instantiateWasm)try{return u.instantiateWasm(w,h)}catch(I){return H(`Module.instantiateWasm callback failed with error: ${I}`),!1}return function ht(a,l){var h=Ke;q||"function"!=typeof WebAssembly.instantiateStreaming||ge(h)||Ue(h)||E||"function"!=typeof fetch?Ve(h,a,l):fetch(h,{credentials:"same-origin"}).then(w=>WebAssembly.instantiateStreaming(w,a).then(l,function(I){return H(`wasm streaming compile failed: ${I}`),H("falling back to ArrayBuffer instantiation"),Ve(h,a,l)}))}(w,function(I){h(I.instance)}),{}}();u._sqlite3_free=a=>(u._sqlite3_free=ke.K)(a),u._sqlite3_value_text=a=>(u._sqlite3_value_text=ke.L)(a);var ei=()=>(ei=ke.M)();u._sqlite3_prepare_v2=(a,l,h,w,I)=>(u._sqlite3_prepare_v2=ke.N)(a,l,h,w,I),u._sqlite3_step=a=>(u._sqlite3_step=ke.O)(a),u._sqlite3_reset=a=>(u._sqlite3_reset=ke.P)(a),u._sqlite3_exec=(a,l,h,w,I)=>(u._sqlite3_exec=ke.Q)(a,l,h,w,I),u._sqlite3_finalize=a=>(u._sqlite3_finalize=ke.R)(a),u._sqlite3_column_name=(a,l)=>(u._sqlite3_column_name=ke.S)(a,l),u._sqlite3_column_text=(a,l)=>(u._sqlite3_column_text=ke.T)(a,l),u._sqlite3_column_type=(a,l)=>(u._sqlite3_column_type=ke.U)(a,l),u._sqlite3_errmsg=a=>(u._sqlite3_errmsg=ke.V)(a),u._sqlite3_clear_bindings=a=>(u._sqlite3_clear_bindings=ke.W)(a),u._sqlite3_value_blob=a=>(u._sqlite3_value_blob=ke.X)(a),u._sqlite3_value_bytes=a=>(u._sqlite3_value_bytes=ke.Y)(a),u._sqlite3_value_double=a=>(u._sqlite3_value_double=ke.Z)(a),u._sqlite3_value_int=a=>(u._sqlite3_value_int=ke._)(a),u._sqlite3_value_type=a=>(u._sqlite3_value_type=ke.$)(a),u._sqlite3_result_blob=(a,l,h,w)=>(u._sqlite3_result_blob=ke.aa)(a,l,h,w),u._sqlite3_result_double=(a,l)=>(u._sqlite3_result_double=ke.ba)(a,l),u._sqlite3_result_error=(a,l,h)=>(u._sqlite3_result_error=ke.ca)(a,l,h),u._sqlite3_result_int=(a,l)=>(u._sqlite3_result_int=ke.da)(a,l),u._sqlite3_result_int64=(a,l,h)=>(u._sqlite3_result_int64=ke.ea)(a,l,h),u._sqlite3_result_null=a=>(u._sqlite3_result_null=ke.fa)(a),u._sqlite3_result_text=(a,l,h,w)=>(u._sqlite3_result_text=ke.ga)(a,l,h,w),u._sqlite3_aggregate_context=(a,l)=>(u._sqlite3_aggregate_context=ke.ha)(a,l),u._sqlite3_column_count=a=>(u._sqlite3_column_count=ke.ia)(a),u._sqlite3_data_count=a=>(u._sqlite3_data_count=ke.ja)(a),u._sqlite3_column_blob=(a,l)=>(u._sqlite3_column_blob=ke.ka)(a,l),u._sqlite3_column_bytes=(a,l)=>(u._sqlite3_column_bytes=ke.la)(a,l),u._sqlite3_column_double=(a,l)=>(u._sqlite3_column_double=ke.ma)(a,l),u._sqlite3_bind_blob=(a,l,h,w,I)=>(u._sqlite3_bind_blob=ke.na)(a,l,h,w,I),u._sqlite3_bind_double=(a,l,h)=>(u._sqlite3_bind_double=ke.oa)(a,l,h),u._sqlite3_bind_int=(a,l,h)=>(u._sqlite3_bind_int=ke.pa)(a,l,h),u._sqlite3_bind_text=(a,l,h,w,I)=>(u._sqlite3_bind_text=ke.qa)(a,l,h,w,I),u._sqlite3_bind_parameter_index=(a,l)=>(u._sqlite3_bind_parameter_index=ke.ra)(a,l),u._sqlite3_sql=a=>(u._sqlite3_sql=ke.sa)(a),u._sqlite3_normalized_sql=a=>(u._sqlite3_normalized_sql=ke.ta)(a),u._sqlite3_changes=a=>(u._sqlite3_changes=ke.ua)(a),u._sqlite3_close_v2=a=>(u._sqlite3_close_v2=ke.va)(a),u._sqlite3_create_function_v2=(a,l,h,w,I,V,ee,Se,Me)=>(u._sqlite3_create_function_v2=ke.wa)(a,l,h,w,I,V,ee,Se,Me),u._sqlite3_open=(a,l)=>(u._sqlite3_open=ke.xa)(a,l);var Hr=u._malloc=a=>(Hr=u._malloc=ke.ya)(a),Kr=u._free=a=>(Kr=u._free=ke.za)(a);u._RegisterExtensionFunctions=a=>(u._RegisterExtensionFunctions=ke.Ba)(a);var Yr,ti=(a,l)=>(ti=ke.Ca)(a,l),Tr=()=>(Tr=ke.Da)(),kr=a=>(kr=ke.Ea)(a),Yt=a=>(Yt=ke.Fa)(a);function ri(){function a(){if(!Yr&&(Yr=!0,u.calledRun=!0,!Y)){if(u.noFSInit||R||(R=!0,_(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?k("stdin",u.stdin):br("/dev/tty","/dev/stdin"),u.stdout?k("stdout",null,u.stdout):br("/dev/tty","/dev/stdout"),u.stderr?k("stderr",null,u.stderr):br("/dev/tty1","/dev/stderr"),It("/dev/stdin",0),It("/dev/stdout",1),It("/dev/stderr",1)),Cr=!1,Z(fe),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var l=u.postRun.shift();Pe.unshift(l)}Z(Pe)}}if(!(0<W)){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)G();Z(Ie),0<W||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),a()},1)):a())}}if(u.stackAlloc=Yt,u.stackSave=Tr,u.stackRestore=kr,u.cwrap=(a,l,h,w)=>{var I=!h||h.every(V=>"number"===V||"boolean"===V);return"string"!==l&&I&&!w?u["_"+a]:function(){return((a,l,h,w)=>{var I={string:Ne=>{var tt=0;return null!=Ne&&0!==Ne&&(tt=Ft(Ne)),tt},array:Ne=>{var tt=Yt(Ne.length);return te.set(Ne,tt),tt}};a=u["_"+a];var Ne,V=[],ee=0;if(w)for(var Se=0;Se<w.length;Se++){var Me=I[h[Se]];Me?(0===ee&&(ee=Tr()),V[Se]=Me(w[Se])):V[Se]=w[Se]}return Ne=h=a.apply(null,V),0!==ee&&kr(ee),"string"===l?Ne?C(de,Ne):"":"boolean"===l?!!Ne:Ne})(a,l,h,arguments)}},u.addFunction=Vr,u.removeFunction=$t,u.UTF8ToString=ne,u.ALLOC_NORMAL=dr,u.allocate=Ht,u.allocateUTF8OnStack=Ft,Ee=function a(){Yr||ri(),Yr||(Ee=a)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ri(),c}),e)},(o=$n).exports=r,o.exports.default=r;const Es=$n.exports;class Fe{static getDBFromStore(t,e){return(0,O.A)(function*(){try{const r=yield e.getItem(t);return Promise.resolve(r)}catch(r){return Promise.reject(`GetDBFromStore: ${r.message}`)}})()}static setInitialDBToStore(t,e){return(0,O.A)(function*(){try{return yield e.setItem(t,null),Promise.resolve()}catch(r){return Promise.reject(`SetInitialDBToStore: ${r.message}`)}})()}static setDBToStore(t,e,r){return(0,O.A)(function*(){try{const n=t.export();return yield Fe.saveDBToStore(e,n,r),Promise.resolve()}catch(n){return Promise.reject(`SetDBToStore: ${n.message}`)}})()}static saveDBToStore(t,e,r){return(0,O.A)(function*(){try{return yield r.removeItem(t),yield r.setItem(t,e),Promise.resolve()}catch(n){return Promise.reject(`SaveDBToStore: ${n.message}`)}})()}static removeDBFromStore(t,e){return(0,O.A)(function*(){try{return yield e.removeItem(t),Promise.resolve()}catch(r){return Promise.reject(`RemoveDBFromStore: ${r.message}`)}})()}static isDBInStore(t,e){return(0,O.A)(function*(){try{const r=yield e.getItem(t);return Promise.resolve(null!=r&&r.length>0)}catch(r){return Promise.reject(`IsDBInStore: ${r}`)}})()}static restoreDBFromStore(t,e,r){return(0,O.A)(function*(){const n=`${e}-${t}`;try{if(yield Fe.isDBInStore(n,r)){if(yield Fe.isDBInStore(t,r)){const c=yield Fe.getDBFromStore(n,r);return yield Fe.saveDBToStore(t,c,r),yield Fe.removeDBFromStore(n,r),Promise.resolve()}return Promise.reject(new Error(`RestoreDBFromStore: ${t} does not exist`))}return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}catch(i){return Promise.reject(`RestoreDBFromStore: ${i.message}`)}})()}static copyDBToStore(t,e,r){return(0,O.A)(function*(){try{if(yield Fe.isDBInStore(t,r)){const i=yield Fe.getDBFromStore(t,r);return yield Fe.saveDBToStore(e,i,r),Promise.resolve()}return Promise.reject(new Error(`CopyDBToStore: ${t} does not exist`))}catch(n){return Promise.reject(`CopyDBToStore: ${n.message}`)}})()}static getDBListFromStore(t){return(0,O.A)(function*(){try{const e=yield t.keys();return Promise.resolve(e)}catch(e){return Promise.reject(`GetDBListFromStore: ${e.message}`)}})()}}class _t{static getTablesNames(t){return(0,O.A)(function*(){let e="SELECT name FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const r=[];try{const n=yield ie.queryAll(t,"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const i of n)r.push(i.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTablesNames: ${n.message}`))}})()}static getViewsNames(t){return(0,O.A)(function*(){let e="SELECT name FROM sqlite_master WHERE ";e+="type='view' AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const r=[];try{const n=yield ie.queryAll(t,"SELECT name FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const i of n)r.push(i.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`getViewsNames: ${n.message}`))}})()}static dropElements(t,e){return(0,O.A)(function*(){let r="",n="AND name NOT LIKE ('sqlite_%')";switch(e){case"index":r="DropIndexes";break;case"trigger":r="DropTriggers";break;case"table":r="DropTables",n+=" AND name NOT IN ('sync_table')";break;case"view":r="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${e} not found`))}let i="SELECT name FROM sqlite_master WHERE ";i+=`type = '${e}' ${n};`;try{const s=yield ie.queryAll(t,i,[]);if(s.length>0){const c=e.toUpperCase(),f=[];for(const u of s){let p=`DROP ${c} IF EXISTS `;p+=`${u.name};`,f.push(p)}for(const u of f)if((yield ie.run(t,u,[],!1,"no"))<0)return Promise.reject(new Error(`DropElements: ${r}: lastId < 0`))}return Promise.resolve()}catch(s){return Promise.reject(new Error(`DropElements: ${r}: ${s.message}`))}})()}static dropAll(t){return(0,O.A)(function*(){try{return yield _t.dropElements(t,"table"),yield _t.dropElements(t,"index"),yield _t.dropElements(t,"trigger"),yield _t.dropElements(t,"view"),yield ie.run(t,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(e){return Promise.reject(new Error(`DropAll: ${e.message}`))}})()}static dropTempTables(t,e){return(0,O.A)(function*(){const r=Object.keys(e),n=[];for(const i of r){let s="DROP TABLE IF EXISTS ";s+=`_temp_${i};`,n.push(s)}try{return(yield ie.execute(t,n.join("\n"),!1))<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(i){return Promise.reject(new Error(`DropTempTables: ${i.message}`))}})()}}class Ge{static isJsonSQLite(t){return(0,O.A)(function*(){const e=["database","version","overwrite","encrypted","mode","tables","views"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t)){if(-1===e.indexOf(r)||"database"===r&&"string"!=typeof t[r]||"version"===r&&"number"!=typeof t[r]||"overwrite"===r&&"boolean"!=typeof t[r]||"encrypted"===r&&"boolean"!=typeof t[r]||"mode"===r&&"string"!=typeof t[r]||"tables"===r&&"object"!=typeof t[r])return!1;if("tables"===r)for(const n of t[r])if(!(yield Ge.isTable(n)))return!1;if("views"===r&&"object"!=typeof t[r])return!1;if("views"===r)for(const n of t[r])if(!(yield Ge.isView(n)))return!1}return!0})()}static isTable(t){return(0,O.A)(function*(){const e=["name","schema","indexes","triggers","values"];let r=0;if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const n of Object.keys(t)){if(-1===e.indexOf(n)||"name"===n&&"string"!=typeof t[n]||"schema"===n&&"object"!=typeof t[n]||"indexes"===n&&"object"!=typeof t[n]||"triggers"===n&&"object"!=typeof t[n]||"values"===n&&"object"!=typeof t[n])return!1;if("schema"===n){t.schema.forEach(i=>{i.column&&r++});for(let i=0;i<r;i++)if(!(yield Ge.isSchema(t[n][i])))return!1}if("indexes"===n)for(const i of t[n])if(!(yield Ge.isIndexes(i)))return!1;if("triggers"===n)for(const i of t[n])if(!(yield Ge.isTriggers(i)))return!1;if("values"===n&&r>0)for(const i of t[n])if("object"!=typeof i||i.length!=r)return!1}return!0})()}static isSchema(t){return(0,O.A)(function*(){const e=["column","value","foreignkey","primarykey","constraint"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"column"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"foreignkey"===r&&"string"!=typeof t[r]||"primarykey"===r&&"string"!=typeof t[r]||"constraint"===r&&"string"!=typeof t[r])return!1;return!0})()}static isIndexes(t){return(0,O.A)(function*(){const e=["name","value","mode"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"mode"===r&&("string"!=typeof t[r]||"UNIQUE"!=t[r].toUpperCase()))return!1;return!0})()}static isTriggers(t){return(0,O.A)(function*(){const e=["name","timeevent","condition","logic"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"timeevent"===r&&"string"!=typeof t[r]||"condition"===r&&"string"!=typeof t[r]||"logic"===r&&"string"!=typeof t[r])return!1;return!0})()}static isView(t){return(0,O.A)(function*(){const e=["name","value"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r])return!1;return!0})()}static checkSchemaValidity(t){return(0,O.A)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("column")&&(r.column=t[e].column),n.includes("value")&&(r.value=t[e].value),n.includes("foreignkey")&&(r.foreignkey=t[e].foreignkey),n.includes("constraint")&&(r.constraint=t[e].constraint),!(yield Ge.isSchema(r)))return Promise.reject(new Error(`CheckSchemaValidity: schema[${e}] not valid`))}return Promise.resolve()})()}static checkIndexesValidity(t){return(0,O.A)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("value")&&(r.value=t[e].value),n.includes("name")&&(r.name=t[e].name),n.includes("mode")&&(r.mode=t[e].mode),!(yield Ge.isIndexes(r)))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${e}] not valid`))}return Promise.resolve()})()}static checkTriggersValidity(t){return(0,O.A)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("logic")&&(r.logic=t[e].logic),n.includes("name")&&(r.name=t[e].name),n.includes("timeevent")&&(r.timeevent=t[e].timeevent),n.includes("condition")&&(r.condition=t[e].condition),!(yield Ge.isTriggers(r)))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${e}] not valid`))}return Promise.resolve()})()}static checkViewsValidity(t){return(0,O.A)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("value")&&(r.value=t[e].value),n.includes("name")&&(r.name=t[e].name),!(yield Ge.isView(r)))return Promise.reject(new Error(`CheckViewsValidity: views[${e}] not valid`))}return Promise.resolve()})()}static getTableColumnNamesTypes(t,e){return(0,O.A)(function*(){let r=[];const n=[],i=[],s=`PRAGMA table_info('${e}');`;try{if(r=yield ie.queryAll(t,s,[]),r.length>0)for(const c of r)n.push(c.name),i.push(c.type);return Promise.resolve({names:n,types:i})}catch(c){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${c.message}`))}})()}static getValues(t,e,r){return(0,O.A)(function*(){const n=[];try{const i=yield Ge.getTableColumnNamesTypes(t,r);let s=[];if(!Object.keys(i).includes("names"))return Promise.reject(new Error(`GetValues: Table ${r} no names`));s=i.names;const c=yield ie.queryAll(t,e,[]);for(const f of c){const u=[];for(const p of s)Object.keys(f).includes(p)?u.push(f[p]):u.push(null);n.push(u)}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetValues: ${i.message}`))}})()}}let er=(()=>{class o{static extractTableName(e){const n=e.match(/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i);return n&&n[1]?n[1]:null}static extractWhereClause(e){const n=e.match(/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i);return n&&n[1]?n[1].trim():null}static addPrefixToWhereClause(e,r,n,i){let s;return s=e.includes("AND")?e.split("AND").map(u=>u.trim()):[e],s.map(f=>{const u=f.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!u)return f;const p=u[1].trim(),m=u[2].trim();let v=u[3].trim(),g=p;const E=o.findIndexOfStringInArray(p,n);return-1!==E&&(g=o.getStringAtIndex(r,E)),`${i}${g} ${m} ${v}`}).join(" AND ")}static findIndexOfStringInArray(e,r){return r.indexOf(e)}static getStringAtIndex(e,r){if(r>=0&&r<e.length)return e[r]}static extractForeignKeyInfo(e){const n=e.match(/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/);if(n)return{forKeys:n[1].split(",").map(s=>s.trim()),tableName:n[2],refKeys:n[3].split(",").map(s=>s.trim()),action:n[5]?n[5]:"NO ACTION"};throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(e){const r=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),n=/\b[a-zA-Z]\w*\b(?=\s*(?:<=?|>=?|<>?|=|AND|OR|BETWEEN|NOT|IN|LIKE))|\b[a-zA-Z]\w*\b\s+BETWEEN\s+'[^']+'\s+AND\s+'[^']+'|\(([^)]+)\)\s+IN\s+\(?\s*VALUES\s*\(/g;let i;const s=[];for(;null!==(i=n.exec(e));){const c=i[1];if(c){const f=c.split(",");for(const u of f)s.push(u.trim())}else{const f=i[0];r.has(f.trim().toUpperCase())||s.push(f.trim())}}return s}static flattenMultilineString(e){return e.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(e,r){const i={stmt:e,names:""},s=e.toUpperCase().indexOf("RETURNING");if(-1!==s){const c=e.substring(0,s);if(i.stmt=`${c};`,"wA"===r.substring(0,2)){const u=e.substring(s+9).trim();i.names=u.endsWith(";")?u.substring(0,u.length-1):u}}return i}static extractCombinedPrimaryKey(e){const n=new RegExp(/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g),i=e.matchAll(n),s=[];for(const c of i){const u=c[1].trim().split(",").map(p=>p.trim());s.push(u)}return 0===s.length?null:s}static getWhereStmtForCombinedPK(e,r,n,i){let s=e;for(const c of i){const f=c.join(",")===r.join(",")?n:r;for(const[u,p]of c.entries())s=o.replaceAllString(s,p,f[u])}return s}static replaceAllString(e,r,n){return e.split(r).join(n)}static indicesOf(e,r,n=0){const i=[];let s=e.indexOf(r,n);for(;-1!==s;)i.push(s),s=e.indexOf(r,s+1);return i}static getWhereStmtForNonCombinedPK(e,r,n){let i="",s=e.substring(6);for(let c=0;c<r.length;c++){let f="withRefsNames",u=o.indicesOf(s,r[c]);if(0===u.length&&(u=o.indicesOf(s,n[c]),f="colNames"),u.length>0){let p="";const m=o.indicesOf(s,"=",u[0]);if(m.length>0){const v=o.indicesOf(s,"AND",m[0]);v.length>0?(p=s.substring(m[0]+1,v[0]-1),s=s.substring(v[0]+3)):p=s.substring(m[0]+1),c>0&&(i+=" AND "),i+="withRefsNames"===f?n[c]+" = "+p:r[c]+" = "+p}}}return i="WHERE "+i,i}static updateWhere(e,r,n){let i="";if(e.length<=0||"WHERE"!==e.toUpperCase().substring(0,5))return i;if(r.length===n.length){const s=o.extractCombinedPrimaryKey(e);i=s?o.getWhereStmtForCombinedPK(e,r,n,s):o.getWhereStmtForNonCombinedPK(e,r,n)}return i}}return o.replaceString=(t,e,r)=>{const n=t.indexOf(e);return-1!==n?t.substring(0,n)+r+t.substring(n+e.length):t},o})();class Xe{static findReferencesAndUpdate(t){return new Xe(t)}static getRefs(t){return new Xe(t)}static getReferences(t){return new Xe(t)}static searchForRelatedItems(t){return new Xe(t)}static upDateWhereForDefault(t){return new Xe(t)}static upDateWhereForRestrict(t){return new Xe(t)}static upDateWhereForCascade(t){return new Xe(t)}static executeUpdateForDelete(t){return new Xe(t)}constructor(t){this.message=t}}class Pt{static findReferencesAndUpdate(t,e,r,n,i){return(0,O.A)(function*(){try{let s=!0;const c=yield Pt.getReferences(t,e),f=c.retRefs,u=c.tableWithRefs;if(f.length<=0||e===u)return s;for(const p of f){const m=er.extractForeignKeyInfo(p),v=m.tableName;if(""===v||v!==e)continue;const g=m.forKeys,E=m.refKeys;if(E.length!==g.length)throw Xe.findReferencesAndUpdate("findReferencesAndUpdate: mismatch length");const b=m.action;if("NO_ACTION"===b)continue;let T=u,A=g,P={uWhereStmt:"",setStmt:""};if(Pt.checkValuesMatch(g,n))throw Xe.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{const N=yield Pt.searchForRelatedItems(t,T,e,r,g,E,i);if(0===N.relatedItems.length&&N.key.length<=0)continue;if(T!==e)switch(b){case"RESTRICT":P=yield Pt.upDateWhereForRestrict(N);break;case"CASCADE":P=yield Pt.upDateWhereForCascade(N);break;default:P=yield Pt.upDateWhereForDefault(g,N)}}P.setStmt.length>0&&P.uWhereStmt.length>0&&Pt.executeUpdateForDelete(t,T,P.uWhereStmt,P.setStmt,A,i)}return s}catch(s){throw s instanceof Xe?Xe.findReferencesAndUpdate(s.message?s.message:s):s}})()}static getReferences(t,e){return(0,O.A)(function*(){const r="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+e+"%') AND sql LIKE('%ON DELETE%');";try{const n=yield ie.queryAll(t,r,[]);let i=[],s="";if(n.length>0){let c=Pt.getRefs(n[0].sql);i=c.foreignKeys,s=c.tableName}return Promise.resolve({tableWithRefs:s,retRefs:i})}catch(n){throw Xe.getReferences(`getReferences: ${n.message?n.message:n}`)}})()}static getRefs(t){let e="";const r=[],n=er.flattenMultilineString(t);try{const s=n.match(/CREATE\s+TABLE\s+(\w+)\s+\(/);s&&(e=s[1]);const f=n.matchAll(/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g);for(const u of f)r.push(u[0])}catch(i){throw Xe.getRefs(`getRefs: Error creating regular expression: ${i}`)}return{tableName:e,foreignKeys:r}}static getReferencedTableName(t){return(0,O.A)(function*(){var e="";if(t.length>0){const r=t.split(new RegExp("REFERENCES","i"));if(2===r.length){const n=r[1].indexOf("(");e=r[1].substring(0,n).trim()}}return e})()}static searchForRelatedItems(t,e,r,n,i,s,c){return(0,O.A)(function*(){const f=[];let u="";const p=i.map(v=>`t1.${v}`),m=s.map(v=>`t2.${v}`);try{let v=er.addPrefixToWhereClause(n,s,i,"t2.");v.endsWith(";")&&(v=v.slice(0,-1));const g=p.map((T,A)=>`${T} = ${m[A]}`).join(" AND "),E=`SELECT t1.rowid FROM ${e} t1 JOIN ${r} t2 ON ${g} WHERE ${v} AND t1.sql_deleted = 0;`,b=yield ie.queryAll(t,E,c);return b.length>0&&(u=Object.keys(b[0])[0],f.push(...b)),{key:u,relatedItems:f}}catch(v){throw Xe.searchForRelatedItems(v.message?v.message:v)}})()}static upDateWhereForDefault(t,e){return(0,O.A)(function*(){let r="",n="";try{const i=e.key,s=[];for(const c of e.relatedItems){const f=c[i];void 0!==f&&s.push(f)}for(const c of t)r+=`${c} = NULL, `;r+="sql_deleted = 0",n=`WHERE ${i} IN (`;for(const c of s)n+=`${c},`;n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(i){throw Xe.upDateWhereForDefault(i.message?i.message:i)}return{setStmt:r,uWhereStmt:n}})()}static upDateWhereForRestrict(t){return(0,O.A)(function*(){try{const e="",r="";if(t.relatedItems.length>0)throw Xe.upDateWhereForRestrict("Restrict mode related items exist, please delete them first");return{setStmt:e,uWhereStmt:r}}catch(e){throw Xe.upDateWhereForRestrict(e.message?e.message:e)}})()}static upDateWhereForCascade(t){return(0,O.A)(function*(){let e="",r="";try{const n=t.key,i=[];for(const s of t.relatedItems){const c=s[n];void 0!==c&&i.push(c)}e+="sql_deleted = 1",r=`WHERE ${n} IN (`;for(const s of i)r+=`${s},`;r.endsWith(",")&&(r=r.slice(0,-1)),r+=");"}catch(n){throw Xe.upDateWhereForCascade(n.message?n.message:n)}return{setStmt:e,uWhereStmt:r}})()}static executeUpdateForDelete(t,e,r,n,i,s){try{let c=-1;const f=`UPDATE ${e} SET ${n} ${r}`,u=[];if(s.length>0){const m=r.split("?");";"===m[m.length-1]&&m.pop();for(let v=0;v<m.length;v++)for(const g of i)er.indicesOf(m[v],g).length>0&&u.push(s[v])}if(c=ie.run(t,f,u,!1,"no").lastId,-1===c)throw Xe.executeUpdateForDelete(`UPDATE sql_deleted failed for table: ${e}`)}catch(c){throw Xe.executeUpdateForDelete(c.message?c.message:c)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(t,e){for(const r of t)if(!e.includes(r))return!1;return!0}}class ie{static beginTransaction(t,e){return(0,O.A)(function*(){const r="BeginTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("BEGIN TRANSACTION"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message?n.message:n}`))}})()}static rollbackTransaction(t,e){return(0,O.A)(function*(){const r="RollbackTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("ROLLBACK TRANSACTION"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message?n.message:n}`))}})()}static commitTransaction(t,e){const r="CommitTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("COMMIT TRANSACTION"),Promise.resolve()}catch(i){return Promise.reject(new Error(`${r}${i.message?i.message:i}`))}}static dbChanges(t){return(0,O.A)(function*(){let r=0;try{return r=t.exec("SELECT total_changes()")[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`DbChanges failed: ${n.message?n.message:n}`))}})()}static getLastId(t){return(0,O.A)(function*(){let r=-1;try{return r=t.exec("SELECT last_insert_rowid()")[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetLastId failed: ${n.message?n.message:n}`))}})()}static setForeignKeyConstraintsEnabled(t,e){return(0,O.A)(function*(){let r="PRAGMA foreign_keys=OFF";e&&(r="PRAGMA foreign_keys=ON");try{return t.run(r),Promise.resolve()}catch(n){return Promise.reject(new Error(`SetForeignKey: ${n.message?n.message:n}`))}})()}static getVersion(t){return(0,O.A)(function*(){let e=0;try{return e=t.exec("PRAGMA user_version;")[0].values[0][0],Promise.resolve(e)}catch(r){return Promise.reject(new Error(`GetVersion: ${r.message?r.message:r}`))}})()}static setVersion(t,e){return(0,O.A)(function*(){try{return t.exec(`PRAGMA user_version = ${e}`),Promise.resolve()}catch(r){return Promise.reject(new Error(`SetVersion: ${r.message?r.message:r}`))}})()}static execute(t,e,r){return(0,O.A)(function*(){try{var n=e;if(!r&&e.toLowerCase().includes("DELETE FROM".toLowerCase())){let c=(n=e.replace(/\n/g,"")).split(";");var i=[];for(const f of c)if("DELETE FROM"===f.trim().substring(0,11).toUpperCase()&&f.toLowerCase().includes("WHERE".toLowerCase())){const p=f.trim(),m=yield ie.deleteSQL(t,p,[]);i.push(m)}else i.push(f);n=i.join(";")}t.exec(n);const s=yield ie.dbChanges(t);return Promise.resolve(s)}catch(s){return Promise.reject(new Error(`Execute: ${s.message?s.message:s}`))}})()}static executeSet(t,e,r,n){return(0,O.A)(function*(){const i=[];let s=-1,c={};for(let f=0;f<e.length;f++){const u="statement"in e[f]?e[f].statement:null,p="values"in e[f]&&e[f].values.length>0?e[f].values:[];if(null==u){let m="ExecuteSet: Error No statement";return m+=` for index ${f}`,Promise.reject(new Error(m))}try{if(Array.isArray(p[0]))for(const m of p){const v=yield ie.replaceUndefinedByNull(m);c=yield ie.run(t,u,v,r,n),s=c.lastId,Object.keys(c).includes("values")&&c.values.length>0&&i.push(c.values)}else{const m=yield ie.replaceUndefinedByNull(p);c=yield ie.run(t,u,m,r,n),s=c.lastId,Object.keys(c).includes("values")&&c.values.length>0&&i.push(c.values)}}catch(m){return Promise.reject(new Error(`ExecuteSet: ${m.message?m.message:m}`))}}return c.lastId=s,c.values="all"===n?i:"one"===n?i[0]:[],Promise.resolve(c)})()}static queryAll(t,e,r){return(0,O.A)(function*(){try{let n=[];if(n=null!=r&&r.length>0?t.exec(e,r):t.exec(e),0==n.length)return Promise.resolve([]);const i=n[0].values.map(s=>{const c={};return n[0].columns.forEach((f,u)=>{c[f]=s[u]}),c});return Promise.resolve(i)}catch(n){return Promise.reject(new Error(`queryAll: ${n.message?n.message:n}`))}})()}static run(t,e,r,n,i){return(0,O.A)(function*(){let s=e.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),c=e,f=[],u={};try{!n&&"DELETE"===s&&(c=yield ie.deleteSQL(t,e,r));const p=r||[];let m;if(p.length>0){const g=yield ie.replaceUndefinedByNull(p);m=t.exec(c,g)}else m=t.exec(c);("all"===i||"one"===i)&&m&&m.length>0&&(f=ie.getReturnedValues(m[0],i));let v=yield ie.getLastId(t);return u.lastId=v,null!=f&&f.length>0&&(u.values=f),Promise.resolve(u)}catch(p){return Promise.reject(new Error(`run: ${p.message?p.message:p}`))}})()}static getReturnedValues(t,e){const r=[];for(let n=0;n<t.values.length;n++){let i={};for(let s=0;s<t.columns.length;s++)i[t.columns[s]]=t.values[n][s];if(r.push(i),"one"===e)break}return r}static deleteSQL(t,e,r){return(0,O.A)(function*(){let n=e;try{const i=yield ie.isLastModified(t,!0),s=yield ie.isSqlDeleted(t,!0);if(!i||!s)return n;const c=er.extractWhereClause(n);if(!c)return Promise.reject(new Error("deleteSQL: cannot find a WHERE clause"));const f=er.extractTableName(n);if(!f)return Promise.reject(new Error("deleteSQL: cannot find a WHERE clause"));const u=er.extractColumnNames(c);if(0===u.length)return Promise.reject(new Error("deleteSQL: Did not find column names in the WHERE Statement"));const p="sql_deleted = 1";return n=(yield Pt.findReferencesAndUpdate(t,f,c,u,r))?`UPDATE ${f} SET ${p} WHERE ${c.endsWith(";")?c.slice(0,-1):c} AND sql_deleted = 0;`:"",Promise.resolve(n)}catch(i){return Promise.reject(new Error(`deleteSQL: ${i.message?i.message:i}`))}})()}static getTableList(t){return(0,O.A)(function*(){try{const e=yield _t.getTablesNames(t);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`getTableList: ${e.message?e.message:e}`))}})()}static isTableExists(t,e){return(0,O.A)(function*(){try{let r="SELECT name FROM sqlite_master WHERE ";r+=`type='table' AND name='${e}';`;const i=(yield ie.queryAll(t,r,[])).length>0;return Promise.resolve(i)}catch(r){return Promise.reject(new Error(`isTableExists: ${r.message?r.message:r}`))}})()}static isLastModified(t,e){return(0,O.A)(function*(){if(!e)return Promise.reject("isLastModified: database not opened");try{const r=yield _t.getTablesNames(t);for(const n of r)if((yield Ge.getTableColumnNamesTypes(t,n)).names.includes("last_modified"))return Promise.resolve(!0)}catch(r){return Promise.reject(new Error(`isLastModified: ${r.message?r.message:r}`))}})()}static isSqlDeleted(t,e){return(0,O.A)(function*(){if(!e)return Promise.reject("isSqlDeleted: database not opened");try{const r=yield _t.getTablesNames(t);for(const n of r)if((yield Ge.getTableColumnNamesTypes(t,n)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(r){return Promise.reject(new Error(`isSqlDeleted: ${r.message?r.message:r}`))}})()}static replaceUndefinedByNull(t){return(0,O.A)(function*(){const e=[];for(const r of t){let n=r;typeof r>"u"&&(n=null),e.push(n)}return Promise.resolve(e)})()}static backupTables(t){return(0,O.A)(function*(){let r={};try{const n=yield _t.getTablesNames(t);for(const i of n)try{const s=yield ie.backupTable(t,i);r[`${i}`]=s}catch(s){return Promise.reject(new Error(`BackupTables: table ${i}: ${s.message?s.message:s}`))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`BackupTables: ${n.message?n.message:n}`))}})()}static backupTable(t,e){return(0,O.A)(function*(){try{yield ie.beginTransaction(t,!0);const r=yield ie.getTableColumnNames(t,e),n=`_temp_${e}`,i=`DROP TABLE IF EXISTS ${n};`;yield ie.run(t,i,[],!1,"no");let s=`ALTER TABLE ${e} RENAME `;if(s+=`TO ${n};`,(yield ie.run(t,s,[],!1,"no"))<0){let f="BackupTable: lastId < 0";try{yield ie.rollbackTransaction(t,!0)}catch(u){f+=`: ${u.message?u.message:u}`}return Promise.reject(new Error(`${f}`))}try{return yield ie.commitTransaction(t,!0),Promise.resolve(r)}catch(f){return Promise.reject(new Error(`BackupTable: ${f.message?f.message:f}`))}}catch(r){return Promise.reject(new Error(`BackupTable: ${r.message?r.message:r}`))}})()}static getTableColumnNames(t,e){return(0,O.A)(function*(){let r=[];const n=[],i=`PRAGMA table_info('${e}');`;try{if(r=yield ie.queryAll(t,i,[]),r.length>0)for(const s of r)n.push(s.name);return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`GetTableColumnNames: ${s.message?s.message:s}`))}})()}static findCommonColumns(t,e){return(0,O.A)(function*(){let r={};try{const n=yield _t.getTablesNames(t);if(0===n.length)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(const i of n){const s=yield ie.getTableColumnNames(t,i);Object.keys(e).includes(i)&&(r[i]=ie.arraysIntersection(e[i],s))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`FindCommonColumns: ${n.message?n.message:n}`))}})()}static arraysIntersection(t,e){if(null!=t&&null!=e){const r=new Set(t),n=new Set(e);return[...r].filter(i=>n.has(i))}return[]}static updateNewTablesData(t,e){return(0,O.A)(function*(){try{yield ie.beginTransaction(t,!0);const r=[];if(Object.keys(e).forEach(s=>{const c=e[s].join(",");let f=`INSERT INTO ${s} `;f+=`(${c}) `,f+=`SELECT ${c} FROM _temp_${s};`,r.push(f)}),(yield ie.execute(t,r.join("\n"),!1))<0){let s="updateNewTablesData: changes < 0";try{yield ie.rollbackTransaction(t,!0)}catch(c){s+=`: ${c.message?c.message:c}`}return Promise.reject(new Error(`${s}`))}try{return yield ie.commitTransaction(t,!0),Promise.resolve()}catch(s){return Promise.reject(new Error(`updateNewTablesData: ${s.message?s.message:s}`))}}catch(r){return Promise.reject(new Error(`updateNewTablesData: ${r.message?r.message:r}`))}})()}}class ft{static createDatabaseSchema(t,e){return(0,O.A)(function*(){let r=-1;const n=e.version;try{return yield ie.setVersion(t.mDb,n),"full"===e.mode&&(yield _t.dropAll(t.mDb)),r=yield ft.createSchema(t,e),Promise.resolve(r)}catch(i){return Promise.reject(new Error(`CreateDatabaseSchema: ${i.message}`))}})()}static createSchema(t,e){return(0,O.A)(function*(){let r=0;const n=t.mDb;try{yield ie.beginTransaction(n,!0),t.setIsTransActive(!0)}catch(s){return Promise.reject(new Error(`CreateSchema: ${s.message}`))}const i=yield ft.createSchemaStatement(e);if(i.length>0){const s=i.join("\n");try{if(r=yield ie.execute(n,s,!0),r<0)try{yield ie.rollbackTransaction(n,!0),t.setIsTransActive(!1)}catch(c){return Promise.reject(new Error(`CreateSchema: changes < 0 ${c.message}`))}}catch(c){const f=c.message;try{return yield ie.rollbackTransaction(n,!0),t.setIsTransActive(!1),Promise.reject(new Error(`CreateSchema: ${f}`))}catch(u){return Promise.reject(new Error(`CreateSchema: changes < 0 ${u.message}: ${f}`))}}}try{return yield ie.commitTransaction(n,!0),t.setIsTransActive(!1),Promise.resolve(r)}catch(s){return Promise.reject(new Error(`CreateSchema: commit ${s.message}`))}})()}static createSchemaStatement(t){return(0,O.A)(function*(){const e=[];let r=!1,n=!1;try{for(const i of t.tables){if(null!=i.schema&&i.schema.length>=1){e.push(`CREATE TABLE IF NOT EXISTS ${i.name} (`);for(let s=0;s<i.schema.length;s++)s===i.schema.length-1?i.schema[s].column?(e.push(`${i.schema[s].column} ${i.schema[s].value}`),"last_modified"===i.schema[s].column&&(r=!0),"sql_deleted"===i.schema[s].column&&(n=!0)):i.schema[s].foreignkey?e.push(`FOREIGN KEY (${i.schema[s].foreignkey}) ${i.schema[s].value}`):i.schema[s].constraint&&e.push(`CONSTRAINT ${i.schema[s].constraint} ${i.schema[s].value}`):i.schema[s].column?e.push(`${i.schema[s].column} ${i.schema[s].value},`):i.schema[s].foreignkey?e.push(`FOREIGN KEY (${i.schema[s].foreignkey}) ${i.schema[s].value},`):i.schema[s].primarykey?e.push(`FOREIGN KEY ${i.schema[s].value},`):i.schema[s].constraint&&e.push(`CONSTRAINT ${i.schema[s].constraint} ${i.schema[s].value},`);if(e.push(");"),r&&n){let s="CREATE TRIGGER IF NOT EXISTS ";s+=`${i.name}`,s+="_trigger_last_modified ",s+=`AFTER UPDATE ON ${i.name} `,s+="FOR EACH ROW WHEN NEW.last_modified < ",s+="OLD.last_modified BEGIN UPDATE ",s+=`${i.name} `,s+="SET last_modified = ",s+="(strftime('%s','now')) WHERE id=OLD.id; END;",e.push(s)}}if(null!=i.indexes&&i.indexes.length>=1)for(const s of i.indexes){const c=i.name;let f=`CREATE ${Object.keys(s).includes("mode")?s.mode+" ":""} INDEX IF NOT EXISTS `;f+=`${s.name} ON ${c} (${s.value});`,e.push(f)}if(null!=i.triggers&&i.triggers.length>=1)for(const s of i.triggers){const c=i.name;s.timeevent.toUpperCase().endsWith(" ON")&&(s.timeevent=s.timeevent.substring(0,s.timeevent.length-3));let f="CREATE TRIGGER IF NOT EXISTS ";f+=`${s.name} ${s.timeevent} ON ${c} `,s.condition&&(f+=`${s.condition} `),f+=`${s.logic};`,e.push(f)}}return Promise.resolve(e)}catch(i){return Promise.reject(i)}})()}static createTablesData(t,e,r){return(0,O.A)(function*(){let n=0,i=!1,s=-1,c="",f=-1;const u=t.mDb;try{f=yield ie.dbChanges(u),yield ie.beginTransaction(u,!0),t.setIsTransActive(!0)}catch(p){return Promise.reject(new Error(`createTablesData: ${p.message}`))}for(const p of e.tables)if(null!=p.values&&p.values.length>=1)try{if(s=yield ft.createTableData(u,p,e.mode),r.emit({progress:`create table data ${p.name}`}),s<0)break;i=!0}catch(m){c=m.message,i=!1;break}if(i)try{return yield ie.commitTransaction(u,!0),t.setIsTransActive(!1),n=(yield ie.dbChanges(u))-f,Promise.resolve(n)}catch(p){return Promise.reject(new Error(`CreateTablesData: ${p.message}`))}else{if(!(c.length>0))return Promise.resolve(0);try{return yield ie.rollbackTransaction(u,!0),t.setIsTransActive(!1),Promise.reject(new Error(`CreateTablesData: ${c}`))}catch(p){return Promise.reject(new Error(`CreateTablesData: ${p.message}: ${c}`))}}})()}static createTableData(t,e,r){return(0,O.A)(function*(){let n=-1;try{if(!(yield ie.isTableExists(t,e.name)))return Promise.reject(new Error(`CreateTableData: Table ${e.name} does not exist`));const s=yield Ge.getTableColumnNamesTypes(t,e.name),f=s.names;if(0===s.types.length)return Promise.reject(new Error(`CreateTableData: Table ${e.name} info does not exist`));for(let u=0;u<e.values.length;u++){let p=e.values[u],m=!0;const v=yield ft.createRowStatement(t,f,p,u,e.name,r);if(m=yield ft.checkUpdate(t,v,p,e.name,f),m){if("DELETE"===v.substring(0,6).toUpperCase()&&(p=[]),n=yield ie.run(t,v,p,!0,"no"),n<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else n=0}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`CreateTableData: ${i.message}`))}})()}static createRowStatement(t,e,r,n,i,s){return(0,O.A)(function*(){if(r.length!=e.length||0===r.length||0===e.length)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not correct length`));try{const c=yield ft.isIdExists(t,i,e[0],r[0]);let f;if("full"===s||"partial"===s&&!c){const u=e.join(),p=yield ft.createQuestionMarkString(e.length);f=`INSERT INTO ${i} (${u}) VALUES (`,f+=`${p});`}else{let u=!0;const m=e.findIndex(v=>"sql_deleted"===v);if(m>=0&&1===r[m]&&(u=!1,f=`DELETE FROM ${i} WHERE `,f+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`),u){const v=yield ft.setNameForUpdate(e);if(0===v.length)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not set to String`));f=`UPDATE ${i} SET ${v} WHERE `,f+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`}}return Promise.resolve(f)}catch(c){return Promise.reject(new Error(`CreateRowStatement: ${c.message}`))}})()}static checkUpdate(t,e,r,n,i){return(0,O.A)(function*(){if("UPDATE"!==e.substring(0,6))return Promise.resolve(!0);try{let c=`SELECT * FROM ${n} WHERE `;c+="string"==typeof r[0]?`${i[0]} = '${r[0]}';`:`${i[0]} = ${r[0]};`;const f=yield Ge.getValues(t,c,n);let u=[];if(f.length>0&&(u=f[0]),r.length>0&&u.length>0&&r.length===u.length){for(let p=0;p<r.length;p++)if(r[p]!==u[p])return Promise.resolve(!0);return Promise.resolve(!1)}return Promise.reject(new Error("CheckUpdate: Both arrays not the same length"))}catch(c){return Promise.reject(new Error(`CheckUpdate: ${c.message}`))}})()}static isIdExists(t,e,r,n){return(0,O.A)(function*(){let i=!1,s=`SELECT ${r} FROM ${e} WHERE ${r} = `;"number"==typeof n&&(s+=`${n};`),"string"==typeof n&&(s+=`'${n}';`);try{return 1===(yield ie.queryAll(t,s,[])).length&&(i=!0),Promise.resolve(i)}catch(c){return Promise.reject(new Error(`IsIdExists: ${c.message}`))}})()}static isType(t,e){return(0,O.A)(function*(){let r=!1;return"NULL"===t&&"object"==typeof e&&(r=!0),"TEXT"===t&&"string"==typeof e&&(r=!0),"INTEGER"===t&&"number"==typeof e&&(r=!0),"REAL"===t&&"number"==typeof e&&(r=!0),"BLOB"===t&&"string"==typeof e&&(r=!0),r?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))})()}static checkColumnTypes(t,e){return(0,O.A)(function*(){for(let r=0;r<e.length;r++)if(null!=e[r])try{yield ft.isType(t[r],e[r])}catch{return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()})()}static createQuestionMarkString(t){return(0,O.A)(function*(){let e="";for(let r=0;r<t;r++)e+="?,";return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))})()}static setNameForUpdate(t){return(0,O.A)(function*(){let e="";for(const r of t)e+=`${r} = ? ,`;return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("SetNameForUpdate: length = 0"))})()}static createView(t,e){return(0,O.A)(function*(){const r=`CREATE VIEW IF NOT EXISTS ${e.name} AS ${e.value};`;try{return(yield ie.execute(t,r,!0))<0?Promise.reject(new Error(`CreateView: ${e.name} failed`)):Promise.resolve()}catch(n){return Promise.reject(new Error(`CreateView: ${n.message}`))}})()}static createViews(t,e){return(0,O.A)(function*(){const r=t.mDb;let n=!1,i="",s=-1,c=-1;try{s=yield ie.dbChanges(r),yield ie.beginTransaction(r,!0),t.setIsTransActive(!0)}catch(f){return Promise.reject(new Error(`createViews: ${f.message}`))}for(const f of e.views)if(null!=f.value)try{yield ft.createView(r,f),n=!0}catch(u){i=u.message,n=!1;break}if(n)try{return yield ie.commitTransaction(r,!0),t.setIsTransActive(!1),c=(yield ie.dbChanges(r))-s,Promise.resolve(c)}catch(f){return Promise.reject(new Error(`createViews: ${f.message}`))}else{if(!(i.length>0))return Promise.resolve(0);try{return yield ie.rollbackTransaction(r,!0),t.setIsTransActive(!1),Promise.reject(new Error(`createViews: ${i}`))}catch(f){return Promise.reject(new Error(`createViews: ${f.message}: ${i}`))}}})()}}class Qe{static createExportObject(t,e,r){return(0,O.A)(function*(){const n={};let i=[],s=[],c="";try{s=yield Qe.getViewsName(t);const f=yield Qe.getTablesNameSQL(t);if(0===f.length)return Promise.reject(new Error("createExportObject: table's names failed"));if(!(yield ie.isTableExists(t,"sync_table"))&&"partial"===e.mode)return Promise.reject(new Error("No sync_table available"));switch(e.mode){case"partial":i=yield Qe.getTablesPartial(t,f,r);break;case"full":i=yield Qe.getTablesFull(t,f,r);break;default:c="createExportObject: expMode "+e.mode+" not defined"}return c.length>0?Promise.reject(new Error(c)):(i.length>0&&(n.database=e.database,n.version=e.version,n.encrypted=e.encrypted,n.mode=e.mode,n.tables=i,s.length>0&&(n.views=s)),Promise.resolve(n))}catch(f){return Promise.reject(new Error("createExportObject: "+f.message))}})()}static getViewsName(t){return(0,O.A)(function*(){const e=[];let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=yield ie.queryAll(t,"SELECT name,sql FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%';",[]);for(const i of n){const s={};s.name=i.name,s.value=i.sql.substring(i.sql.indexOf("AS ")+3),e.push(s)}return Promise.resolve(e)}catch(i){return Promise.reject(new Error(`getViewsName: ${i.message}`))}})()}static getTablesFull(t,e,r){return(0,O.A)(function*(){const n=[];let i="";try{for(const s of e){let c,f;if(!s.name){i="GetTablesFull: no name";break}if(c=s.name,!s.sql){i="GetTablesFull: no sql";break}f=s.sql;const u={},p=yield Qe.getSchema(f);if(0===p.length){i="GetTablesFull: no Schema returned";break}yield Ge.checkSchemaValidity(p);const m=yield Qe.getIndexes(t,c);m.length>0&&(yield Ge.checkIndexesValidity(m));const v=yield Qe.getTriggers(t,c);v.length>0&&(yield Ge.checkTriggersValidity(v));let g=`Full: Table ${c} schema export completed ...`;r.emit({progress:g});const E=`SELECT * FROM ${c};`,b=yield Ge.getValues(t,E,c);if(u.name=c,!(p.length>0)){i="GetTablesFull: must contain schema";break}if(u.schema=p,m.length>0&&(u.indexes=m),v.length>0&&(u.triggers=v),b.length>0&&(u.values=b),Object.keys(u).length<=1){i=`GetTablesFull: table ${c} is not a jsonTable`;break}g=`Full: Table ${c} table data export completed ...`,r.emit({progress:g}),n.push(u)}return i.length>0?Promise.reject(new Error(i)):Promise.resolve(n)}catch(s){return Promise.reject(new Error(`GetTablesFull: ${s.message}`))}})()}static getSchema(t){return(0,O.A)(function*(){const e=[],r=t.indexOf("("),n=t.lastIndexOf(")");let i=t.substring(r+1,n);try{i=yield Qe.modEmbeddedParentheses(i);const s=i.split(",");for(let c=0;c<s.length;c++){let f=[];const u=s[c].replace(/\n/g,"").trim();f[0]=u.substring(0,u.indexOf(" ")),f[1]=u.substring(u.indexOf(" ")+1);const p={};if("FOREIGN"===f[0].toUpperCase()){const m=u.indexOf("("),v=u.indexOf(")"),E=u.substring(m+1,v).split("\xa7");f[0]=E.join(","),f[0]=f[0].replace(/, /g,","),f[1]=u.substring(v+2),p.foreignkey=f[0]}else if("PRIMARY"===f[0].toUpperCase()){const m=u.indexOf("("),v=u.indexOf(")"),E=u.substring(m+1,v).split("\xa7");f[0]="CPK_"+E.join("_"),f[0]=f[0].replace(/_ /g,"_"),f[1]=u,p.constraint=f[0]}else if("CONSTRAINT"===f[0].toUpperCase()){let m=[];const v=f[1].trim();m[0]=v.substring(0,v.indexOf(" ")),m[1]=v.substring(v.indexOf(" ")+1),f[0]=m[0],p.constraint=f[0],f[1]=m[1]}else p.column=f[0];p.value=f[1].replace(/\xa7/g,","),e.push(p)}return Promise.resolve(e)}catch(s){return Promise.reject(new Error(s.message))}})()}static getIndexes(t,e){return(0,O.A)(function*(){const r=[];let n="";try{let i="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";i+=`type = 'index' AND tbl_name = '${e}' `,i+="AND sql NOTNULL;";const s=yield ie.queryAll(t,i,[]);if(s.length>0){for(const c of s){if(3!==Object.keys(c).length){n=`GetIndexes: Table ${e} creating indexes`;break}if(c.tbl_name!==e){n=`GetIndexes: Table ${e} doesn't match`;break}{const u=c.sql,p=u.includes("UNIQUE")?"UNIQUE":"",m=u.lastIndexOf("("),v=u.lastIndexOf(")"),g={};g.name=c.name,g.value=u.slice(m+1,v),p.length>0&&(g.mode=p),r.push(g)}}if(n.length>0)return Promise.reject(new Error(n))}return Promise.resolve(r)}catch(i){return Promise.reject(new Error(`GetIndexes: ${i.message}`))}})()}static getTriggers(t,e){return(0,O.A)(function*(){const r=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${e}' `,n+="AND sql NOT NULL;";const i=yield ie.queryAll(t,n,[]);if(i.length>0)for(const s of i){if(3!==Object.keys(s).length)return Promise.reject(new Error(`GetTriggers: Table ${e} creating indexes`));if(s.tbl_name!==e)return Promise.reject(new Error(`GetTriggers: Table ${e} doesn't match`));{const u=s.name;let p=s.sql.split(u);if(2!=p.length)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!p[1].includes(e))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${e}`));const m=p[1].split(e,1)[0].trim();if(p=p[1].split(m+" "+e),2!=p.length)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let v="",g="";if("BEGIN"!==p[1].trim().substring(0,5).toUpperCase()){if(p=p[1].trim().split("BEGIN"),2!=p.length)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));v=p[0].trim(),g="BEGIN"+p[1]}else g=p[1].trim();const E={};E.name=u,E.logic=g,v.length>0&&(E.condition=v),E.timeevent=m,r.push(E)}}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTriggers: ${n.message}`))}})()}static getTablesPartial(t,e,r){return(0,O.A)(function*(){const n=[];let i={},s=0,c=[],f="";try{const u=yield Qe.getPartialModeData(t,e);Object.keys(u).includes("syncDate")&&(s=u.syncDate),Object.keys(u).includes("modTables")&&(i=u.modTables,c=Object.keys(i));for(const p of e){let m="",v="";if(!p.name){f="GetTablesFull: no name";break}if(m=p.name,!p.sql){f="GetTablesFull: no sql";break}if(v=p.sql,0==c.length||-1===c.indexOf(m)||"No"==i[m])continue;const g={};let E=[],b=[],T=[];g.name=p,"Create"===i[g.name]&&(E=yield Qe.getSchema(v),E.length>0&&(yield Ge.checkSchemaValidity(E)),b=yield Qe.getIndexes(t,m),b.length>0&&(yield Ge.checkIndexesValidity(b)),T=yield Qe.getTriggers(t,m),T.length>0&&(yield Ge.checkTriggersValidity(T)));let A=`Partial: Table ${m} schema export completed ...`;r.emit({progress:A});let P="";P="Create"===i[m]?`SELECT * FROM ${m};`:`SELECT * FROM ${m} WHERE last_modified > ${s};`;const N=yield Ge.getValues(t,P,m);if(g.name=m,E.length>0&&(g.schema=E),b.length>0&&(g.indexes=b),T.length>0&&(g.triggers=T),N.length>0&&(g.values=N),Object.keys(g).length<=1){f=`GetTablesPartial: table ${m} is not a jsonTable`;break}A=`Partial: Table ${m} table data export completed ...`,r.emit({progress:A}),n.push(g)}return f.length>0?Promise.reject(new Error(f)):Promise.resolve(n)}catch(u){return Promise.reject(new Error(`GetTablesPartial: ${u.message}`))}})()}static getPartialModeData(t,e){return(0,O.A)(function*(){const r={};try{const n=yield Qe.getSynchroDate(t);if(n<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const i=yield Qe.getTablesModified(t,e,n);return i.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(r.syncDate=n,r.modTables=i,Promise.resolve(r))}catch(n){return Promise.reject(new Error(`GetPartialModeData: ${n.message}`))}})()}static getTablesNameSQL(t){return(0,O.A)(function*(){let e="SELECT name,sql FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%';";try{const r=yield ie.queryAll(t,"SELECT name,sql FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%';",[]);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`getTablesNamesSQL: ${r.message}`))}})()}static getTablesModified(t,e,r){return(0,O.A)(function*(){let n="";try{const i={};for(const s of e){let c,f="SELECT count(*) AS tcount  ";f+=`FROM ${s.name};`;let u=yield ie.queryAll(t,f,[]);if(1!=u.length){n="GetTableModified: total count not returned";break}const p=u[0].tcount;if(f="SELECT count(*) AS mcount FROM ",f+=`${s.name} WHERE last_modified > `,f+=`${r};`,u=yield ie.queryAll(t,f,[]),1!=u.length)break;const m=u[0].mcount;c=0===m?"No":p===m?"Create":"Modified",i[s.name]=c}return n.length>0?Promise.reject(new Error(n)):Promise.resolve(i)}catch(i){return Promise.reject(new Error(`GetTableModified: ${i.message}`))}})()}static getSynchroDate(t){return(0,O.A)(function*(){try{const r=yield ie.queryAll(t,"SELECT sync_date FROM sync_table WHERE id = 1;",[]);return Promise.resolve(r[0].sync_date)}catch(e){return Promise.reject(new Error(`GetSynchroDate: ${e.message}`))}})()}static getLastExportDate(t){return(0,O.A)(function*(){try{const r=yield ie.queryAll(t,"SELECT sync_date FROM sync_table WHERE id = 2;",[]);return Promise.resolve(0===r.length?-1:r[0].sync_date)}catch(e){return Promise.reject(new Error(`getLastExport: ${e.message}`))}})()}static setLastExportDate(t,e){return(0,O.A)(function*(){try{if(!(yield ie.isTableExists(t,"sync_table")))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const n=Math.round(new Date(e).getTime()/1e3);let i="";return i=(yield Qe.getLastExportDate(t))>0?`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:`INSERT INTO sync_table (sync_date) VALUES (${n});`,(yield ie.execute(t,i,!1))<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setLastExportDate failed: ${r.message}`}}})()}static delExportedRows(t){return(0,O.A)(function*(){let e;try{if(!(yield ie.isTableExists(t,"sync_table")))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(e=yield Qe.getLastExportDate(t),e<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const n=yield ie.getTableList(t);if(0===n.length)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const i of n){let s=-1;const c=`DELETE FROM ${i}\n              WHERE sql_deleted = 1 AND last_modified < ${e};`;if(s=yield ie.run(t,c,[],!0,"no"),s<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(r){return Promise.reject(new Error(`DelExportedRows failed: ${r.message}`))}})()}static modEmbeddedParentheses(t){return(0,O.A)(function*(){const e=Qe.indexOfChar(t,"("),r=Qe.indexOfChar(t,")");if(e.length!=r.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(0===e.length)return Promise.resolve(t);let n=t.substring(0,e[0]-1);for(let i=0;i<e.length;i++){let s;i<e.length-1&&e[i+1]<r[i]?(s=t.substring(e[i]-1,r[i+1]),i++):s=t.substring(e[i]-1,r[i]),n+=s.replace(/,/g,"\xa7"),i<e.length-1&&(n+=t.substring(r[i],e[i+1]-1))}return n+=t.substring(r[r.length-1],t.length),Promise.resolve(n)})()}static indexOfChar(t,e){let r=[...t];return e=e.toLowerCase(),r.reduce((n,i,s)=>i.toLowerCase()===e?[...n,s]:n,[])}}class an{static onUpgrade(t,e,r,n){return(0,O.A)(function*(){let i=-1;const s=new Int32Array(Object.keys(e).map(c=>parseInt(c))).sort();for(const c of s)if(c>r&&c<=n){const f=e[c].statements;if(0===f.length)return Promise.reject("onUpgrade: statements not given");try{yield ie.setForeignKeyConstraintsEnabled(t.mDb,!1);const u=yield ie.dbChanges(t.mDb);yield an.executeStatementsProcess(t,f),yield ie.setVersion(t.mDb,c),yield ie.setForeignKeyConstraintsEnabled(t.mDb,!0),i=(yield ie.dbChanges(t.mDb))-u}catch(u){return Promise.reject(new Error(`onUpgrade: ${u.message}`))}}return Promise.resolve(i)})()}static executeStatementsProcess(t,e){return(0,O.A)(function*(){try{yield ie.beginTransaction(t.mDb,!0),t.setIsTransActive(!0);for(const r of e)yield ie.execute(t.mDb,r,!1);return yield ie.commitTransaction(t.mDb,!0),t.setIsTransActive(!1),Promise.resolve()}catch(r){return yield ie.rollbackTransaction(t.mDb,!0),t.setIsTransActive(!1),Promise.reject(`ExecuteStatementProcess: ${r}`)}})()}}class Hn{constructor(t,e,r,n,i,s){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=t,this.store=n,this.version=e,this.mDb=null,this.vUpgDict=r,this._isDBOpen=!1,this.autoSave=i,this.wasmPath=s}open(){var t=this;return(0,O.A)(function*(){const e={locateFile:r=>`${t.wasmPath}/${r}`};return new Promise((r,n)=>{try{Es(e).then(function(){var i=(0,O.A)(function*(s){const c=yield Fe.getDBFromStore(t.dbName,t.store);null!=c?t.mDb=new s.Database(c):(t.mDb=new s.Database,yield Fe.setInitialDBToStore(t.dbName,t.store)),t._isDBOpen=!0;let f=yield ie.getVersion(t.mDb);if(t.version>f&&Object.keys(t.vUpgDict).length>0)try{if((yield Fe.isDBInStore(t.dbName,t.store))&&(yield Fe.copyDBToStore(t.dbName,`backup-${t.dbName}`,t.store),t.isBackup=!0),-1===(yield an.onUpgrade(t,t.vUpgDict,f,t.version)))try{t.isBackup&&(yield Fe.restoreDBFromStore(t.dbName,"backup",t.store))}catch(m){return n(new Error(`Open: ${m.message?m.message:m}`))}t.isBackup&&(yield Fe.removeDBFromStore(`backup-${t.dbName}`,t.store))}catch{try{t.isBackup&&(yield Fe.restoreDBFromStore(t.dbName,"backup",t.store))}catch(p){return n(new Error(`Open: ${p.message?p.message:p}`))}}if(t.autoSave)try{yield t.saveToStore()}catch(u){return t._isDBOpen=!1,n(new Error(`Open: ${u.message?u.message:u}`))}return yield ie.setForeignKeyConstraintsEnabled(t.mDb,!0),r()});return function(s){return i.apply(this,arguments)}}())}catch(i){return t._isDBOpen=!1,n(new Error(`Open: ${i.message?i.message:i}`))}})})()}isDBOpen(){return this._isDBOpen}close(){var t=this;return(0,O.A)(function*(){if(null!=t.mDb&&t._isDBOpen)try{yield t.saveToStore(!1),t.mDb.close(),t._isDBOpen=!1}catch(e){return t._isDBOpen=!1,Promise.reject(new Error(`in close ${e.message?e.message:e}`))}return Promise.resolve()})()}saveToStore(t=!0){var e=this;return(0,O.A)(function*(){if(null!=e.mDb&&e._isDBOpen)try{yield Fe.setDBToStore(e.mDb,e.dbName,e.store),t&&(yield ie.setForeignKeyConstraintsEnabled(e.mDb,!0))}catch(r){return Promise.reject(new Error(`in saveToStore ${r.message?r.message:r}`))}return Promise.resolve()})()}exportDB(){var t=this;return(0,O.A)(function*(){try{return t.mDb.export()}catch(e){return Promise.reject(new Error(`exportDB: ${e.message?e.message:e}`))}})()}getVersion(){var t=this;return(0,O.A)(function*(){if(null!=t.mDb&&t._isDBOpen)try{const e=yield ie.getVersion(t.mDb);return Promise.resolve(e)}catch(e){return t._isDBOpen=!1,Promise.reject(new Error(`in getVersion ${e.message?e.message:e}`))}})()}isDBExists(t){var e=this;return(0,O.A)(function*(){try{const r=yield Fe.isDBInStore(t,e.store);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`in isDBExists ${r.message?r.message:r}`))}})()}deleteDB(t){var e=this;return(0,O.A)(function*(){try{const r=yield e.isDBExists(t);return r&&!e._isDBOpen&&(yield e.open()),yield e.close(),r&&(yield Fe.removeDBFromStore(t,e.store)),Promise.resolve()}catch(r){return Promise.reject(new Error(`DeleteDB: ${r.message?r.message:r}`))}})()}beginTransaction(){var t=this;return(0,O.A)(function*(){if(!t._isDBOpen){let e=`BeginTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield ie.beginTransaction(t.mDb,!0),t.setIsTransActive(!0),0}catch(e){return Promise.reject(new Error(`BeginTransaction: ${e.message?e.message:e}`))}})()}commitTransaction(){var t=this;return(0,O.A)(function*(){if(!t._isDBOpen){let e=`CommitTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield ie.commitTransaction(t.mDb,!0),t.setIsTransActive(!1),0}catch(e){return Promise.reject(new Error(`CommitTransaction: ${e.message?e.message:e}`))}})()}rollbackTransaction(){var t=this;return(0,O.A)(function*(){if(!t._isDBOpen){let e=`RollbackTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield ie.rollbackTransaction(t.mDb,!0),t.setIsTransActive(!1),0}catch(e){return Promise.reject(new Error(`RollbackTransaction: ${e.message?e.message:e}`))}})()}isTransActive(){return this.isTransactionActive}setIsTransActive(t){this.isTransactionActive=t}executeSQL(t,e=!0){var r=this;return(0,O.A)(function*(){if(!r._isDBOpen){let i=`ExecuteSQL: Database ${r.dbName} `;return i+="not opened",Promise.reject(new Error(i))}let n=-1;try{n=yield ie.dbChanges(r.mDb),e&&!r.isTransactionActive&&(yield r.beginTransaction())}catch(i){return Promise.reject(new Error(`executeSQL: ${i.message?i.message:i}`))}try{if((yield ie.execute(r.mDb,t,!1))<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));e&&r.isTransactionActive&&(yield r.commitTransaction());const s=(yield ie.dbChanges(r.mDb))-n;return Promise.resolve(s)}catch(i){let s=`ExecuteSQL: ${i.message?i.message:i}`;try{e&&r.isTransactionActive&&(yield r.rollbackTransaction())}catch(c){s+=` : ${c.message?c.message:c}`}return Promise.reject(new Error(`ExecuteSQL: ${s}`))}finally{if(e&&(r.isTransactionActive=!1),r.autoSave&&!r.isTransactionActive)try{yield r.saveToStore()}catch(i){return r._isDBOpen=!1,Promise.reject(`ExecuteSQL: ${i.message?i.message:i}`)}}})()}execSet(t,e=!0,r="no"){var n=this;return(0,O.A)(function*(){if(!n._isDBOpen){let c=`ExecSet: Database ${n.dbName} `;return c+="not opened",Promise.reject(new Error(c))}const i={changes:-1,lastId:-1};let s=-1;try{s=yield ie.dbChanges(n.mDb),e&&!n.isTransactionActive&&(yield n.beginTransaction())}catch(c){return Promise.reject(new Error(`ExecSet: ${c.message?c.message:c}`))}try{const c=yield ie.executeSet(n.mDb,t,!1,r);let f=c.lastId;if(f<0)return Promise.reject(new Error("ExecSet: changes < 0"));e&&n.isTransactionActive&&(yield n.commitTransaction());const u=(yield ie.dbChanges(n.mDb))-s;return i.changes=u,i.lastId=f,i.values=c.values?c.values:[],Promise.resolve(i)}catch(c){let u=`ExecSet: ${c.message?c.message:c}`;try{e&&n.isTransactionActive&&(yield n.rollbackTransaction())}catch(p){u+=` : ${p.message?p.message:p}`}return Promise.reject(new Error(`ExecSet: ${u}`))}finally{if(e&&(n.isTransactionActive=!1),n.autoSave&&!n.isTransactionActive)try{yield n.saveToStore()}catch(c){const f=c.message?c.message:c;return n._isDBOpen=!1,Promise.reject(`ExecSet: ${f}`)}}})()}selectSQL(t,e){var r=this;return(0,O.A)(function*(){if(!r._isDBOpen){let n=`SelectSQL: Database ${r.dbName} `;return n+="not opened",Promise.reject(new Error(n))}try{let n=yield ie.queryAll(r.mDb,t,e);return Promise.resolve(n)}catch(n){return Promise.reject(new Error(`SelectSQL: ${n.message?n.message:n}`))}})()}runSQL(t,e,r=!0,n){var i=this;return(0,O.A)(function*(){let s=-1;if(!i._isDBOpen){let u=`RunSQL: Database ${i.dbName} `;return u+="not opened",Promise.reject(new Error(u))}const c={changes:-1,lastId:-1};let f=-1;try{f=yield ie.dbChanges(i.mDb),r&&!i.isTransactionActive&&(yield i.beginTransaction())}catch(u){return Promise.reject(new Error(`RunSQL: ${u.message?u.message:u}`))}try{const u=yield ie.run(i.mDb,t,e,!1,n);if(s=u.lastId,s<0)return Promise.reject(new Error("RunSQL: lastId < 0"));r&&i.isTransactionActive&&(yield i.commitTransaction());const p=(yield ie.dbChanges(i.mDb))-f;return c.changes=p,c.lastId=s,c.values=u.values?u.values:[],Promise.resolve(c)}catch(u){let m=`RunSQL: ${u.message?u.message:u}`;try{r&&i.isTransactionActive&&(yield i.rollbackTransaction())}catch(v){m+=` : ${v.message?v.message:v}`}return Promise.reject(new Error(`${m}`))}finally{if(r&&i.setIsTransActive(!1),i.autoSave&&!i.isTransactionActive)try{yield i.saveToStore()}catch(u){return i._isDBOpen=!1,Promise.reject(`ExecSet: ${u.message?u.message:u}`)}}})()}getTableNames(){var t=this;return(0,O.A)(function*(){if(!t._isDBOpen){let e=`GetTableNames: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=yield ie.getTableList(t.mDb);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`GetTableNames: ${e.message?e.message:e}`))}})()}isTable(t){var e=this;return(0,O.A)(function*(){if(!e._isDBOpen){let r=`isTable: Database ${e.dbName} `;return r+="not opened",Promise.reject(new Error(r))}try{const r=yield ie.isTableExists(e.mDb,t);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`IsTable: ${r.message?r.message:r}`))}})()}createSyncTable(){var t=this;return(0,O.A)(function*(){if(!t._isDBOpen){let r=`createSyncTable: Database ${t.dbName} `;return r+="not opened",Promise.reject(new Error(r))}let e=-1;try{if(yield ie.isTableExists(t.mDb,"sync_table"))return Promise.resolve(0);{const n=yield ie.isLastModified(t.mDb,t._isDBOpen),i=yield ie.isSqlDeleted(t.mDb,t._isDBOpen);if(n&&i){const s=Math.round((new Date).getTime()/1e3);let c="\n                          CREATE TABLE IF NOT EXISTS sync_table (\n                              id INTEGER PRIMARY KEY NOT NULL,\n                              sync_date INTEGER\n                              );";return c+=`INSERT INTO sync_table (sync_date) VALUES (\n                              "${s}");`,e=yield ie.execute(t.mDb,c,!1),Promise.resolve(e)}return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(r){return Promise.reject(new Error(`CreateSyncTable: ${r.message?r.message:r}`))}})()}getSyncDate(){var t=this;return(0,O.A)(function*(){if(!t._isDBOpen){let e=`getSyncDate: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!(yield ie.isTableExists(t.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const r=yield Qe.getSynchroDate(t.mDb);return Promise.resolve(r)}catch(e){return Promise.reject(new Error(`getSyncDate: ${e.message?e.message:e}`))}})()}setSyncDate(t){var e=this;return(0,O.A)(function*(){if(!e._isDBOpen){let r=`SetSyncDate: Database ${e.dbName} `;return r+="not opened",{result:!1,message:r}}try{if(!(yield ie.isTableExists(e.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const n=Math.round(new Date(t).getTime()/1e3);let i="UPDATE sync_table SET sync_date = ";return i+=`${n} WHERE id = 1;`,(yield ie.execute(e.mDb,i,!1))<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setSyncDate failed: ${r.message?r.message:r}`}}})()}importJson(t,e){var r=this;return(0,O.A)(function*(){let n=0;if(!r._isDBOpen)return Promise.reject(new Error("ImportJson: database is closed"));try{return yield ie.setForeignKeyConstraintsEnabled(r.mDb,!1),t.tables&&t.tables.length>0&&(n=yield ft.createDatabaseSchema(r,t),e.emit({progress:`Schema creation completed changes: ${n}`}),-1!=n&&(n+=(yield ft.createTablesData(r,t,e)),e.emit({progress:`Tables data creation completed changes: ${n}`}))),t.views&&t.views.length>0&&(n+=(yield ft.createViews(r,t))),yield ie.setForeignKeyConstraintsEnabled(r.mDb,!0),yield r.saveToStore(),Promise.resolve(n)}catch(i){return Promise.reject(new Error(`ImportJson: ${i.message?i.message:i}`))}})()}exportJson(t,e){var r=this;return(0,O.A)(function*(){const n={};if(n.database=r.dbName.slice(0,-9),n.version=r.version,n.encrypted=!1,n.mode=t,!r._isDBOpen)return Promise.reject(new Error("ExportJson: database is closed"));try{if(yield ie.isTableExists(r.mDb,"sync_table"))yield Qe.setLastExportDate(r.mDb,(new Date).toISOString());else if("full"!==n.mode)return Promise.reject(new Error("No sync_table available for partial mode"));const s=yield Qe.createExportObject(r.mDb,n,e);return 0===Object.keys(s).length?Promise.reject(new Error("ExportJson: return Object is empty No data to synchronize")):Ge.isJsonSQLite(s)?Promise.resolve(s):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(i){return Promise.reject(new Error(`ExportJson: ${i.message?i.message:i}`))}})()}deleteExportedRows(){var t=this;return(0,O.A)(function*(){if(!t._isDBOpen)return Promise.reject(new Error("deleteExportedRows: database is closed"));try{return yield Qe.delExportedRows(t.mDb),Promise.resolve()}catch(e){return Promise.reject(new Error(`deleteExportedRows: ${e.message?e.message:e}`))}})()}}var Kn={exports:{}};!function(o,t){o.exports=function e(r,n,i){function s(u,p){if(!n[u]){if(!r[u]){if(!p&&Ut)return Ut(u);if(c)return c(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var g=n[u]={exports:{}};r[u][0].call(g.exports,function(E){return s(r[u][1][E]||E)},g,g.exports,e,r,n,i)}return n[u].exports}for(var c=Ut,f=0;f<i.length;f++)s(i[f]);return s}({1:[function(e,r,n){(function(i){var c,s=i.MutationObserver||i.WebKitMutationObserver;if(s){var f=0,u=new s(E),p=i.document.createTextNode("");u.observe(p,{characterData:!0}),c=function(){p.data=f=++f%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var m=new i.MessageChannel;m.port1.onmessage=E,c=function(){m.port2.postMessage(0)}}else c="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var T=i.document.createElement("script");T.onreadystatechange=function(){E(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},i.document.documentElement.appendChild(T)}:function(){setTimeout(E,0)};var v,g=[];function E(){v=!0;for(var T,A,P=g.length;P;){for(A=g,g=[],T=-1;++T<P;)A[T]();P=g.length}v=!1}r.exports=function b(T){1===g.push(T)&&!v&&c()}}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,r,n){var i=e(1);function s(){}var c={},f=["REJECTED"],u=["FULFILLED"],p=["PENDING"];function m(D){if("function"!=typeof D)throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,D!==s&&b(this,D)}function v(D,H,q){this.promise=D,"function"==typeof H&&(this.onFulfilled=H,this.callFulfilled=this.otherCallFulfilled),"function"==typeof q&&(this.onRejected=q,this.callRejected=this.otherCallRejected)}function g(D,H,q){i(function(){var Q;try{Q=H(q)}catch(Y){return c.reject(D,Y)}Q===D?c.reject(D,new TypeError("Cannot resolve promise with itself")):c.resolve(D,Q)})}function E(D){var H=D&&D.then;if(D&&("object"==typeof D||"function"==typeof D)&&"function"==typeof H)return function(){H.apply(D,arguments)}}function b(D,H){var q=!1;function Q(j){q||(q=!0,c.reject(D,j))}function Y(j){q||(q=!0,c.resolve(D,j))}var de=T(function te(){H(Y,Q)});"error"===de.status&&Q(de.value)}function T(D,H){var q={};try{q.value=D(H),q.status="success"}catch(Q){q.status="error",q.value=Q}return q}r.exports=m,m.prototype.catch=function(D){return this.then(null,D)},m.prototype.then=function(D,H){if("function"!=typeof D&&this.state===u||"function"!=typeof H&&this.state===f)return this;var q=new this.constructor(s);return this.state!==p?g(q,this.state===u?D:H,this.outcome):this.queue.push(new v(q,D,H)),q},v.prototype.callFulfilled=function(D){c.resolve(this.promise,D)},v.prototype.otherCallFulfilled=function(D){g(this.promise,this.onFulfilled,D)},v.prototype.callRejected=function(D){c.reject(this.promise,D)},v.prototype.otherCallRejected=function(D){g(this.promise,this.onRejected,D)},c.resolve=function(D,H){var q=T(E,H);if("error"===q.status)return c.reject(D,q.value);var Q=q.value;if(Q)b(D,Q);else{D.state=u,D.outcome=H;for(var Y=-1,te=D.queue.length;++Y<te;)D.queue[Y].callFulfilled(H)}return D},c.reject=function(D,H){D.state=f,D.outcome=H;for(var q=-1,Q=D.queue.length;++q<Q;)D.queue[q].callRejected(H);return D},m.resolve=function A(D){return D instanceof this?D:c.resolve(new this(s),D)},m.reject=function P(D){var H=new this(s);return c.reject(H,D)},m.all=function N(D){var H=this;if("[object Array]"!==Object.prototype.toString.call(D))return this.reject(new TypeError("must be an array"));var q=D.length,Q=!1;if(!q)return this.resolve([]);for(var Y=new Array(q),te=0,de=-1,j=new this(s);++de<q;)L(D[de],de);return j;function L(y,J){H.resolve(y).then(function xe(ae){Y[J]=ae,++te===q&&!Q&&(Q=!0,c.resolve(j,Y))},function(ae){Q||(Q=!0,c.reject(j,ae))})}},m.race=function M(D){var H=this;if("[object Array]"!==Object.prototype.toString.call(D))return this.reject(new TypeError("must be an array"));var q=D.length,Q=!1;if(!q)return this.resolve([]);for(var Y=-1,te=new this(s);++Y<q;)H.resolve(D[Y]).then(function(L){Q||(Q=!0,c.resolve(te,L))},function(L){Q||(Q=!0,c.reject(te,L))});return te}},{1:1}],3:[function(e,r,n){(function(i){"function"!=typeof i.Promise&&(i.Promise=e(2))}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,r,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};var f=function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function p(_,R){_=_||[],R=R||{};try{return new Blob(_,R)}catch(F){if("TypeError"!==F.name)throw F;for(var $=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),B=0;B<_.length;B+=1)$.append(_[B]);return $.getBlob(R.type)}}typeof Promise>"u"&&e(3);var m=Promise;function v(_,R){R&&_.then(function(k){R(null,k)},function(k){R(k)})}function g(_,R,k){"function"==typeof R&&_.then(R),"function"==typeof k&&_.catch(k)}function E(_){return"string"!=typeof _&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function b(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",A=void 0,P={},N=Object.prototype.toString,M="readonly",D="readwrite";function H(_){for(var R=_.length,k=new ArrayBuffer(R),$=new Uint8Array(k),B=0;B<R;B++)$[B]=_.charCodeAt(B);return k}function Q(_){return"boolean"==typeof A?m.resolve(A):function q(_){return new m(function(R){var k=_.transaction(T,D),$=p([""]);k.objectStore(T).put($,"key"),k.onabort=function(B){B.preventDefault(),B.stopPropagation(),R(!1)},k.oncomplete=function(){var B=navigator.userAgent.match(/Chrome\/(\d+)/),F=navigator.userAgent.match(/Edge\//);R(F||!B||parseInt(B[1],10)>=43)}}).catch(function(){return!1})}(_).then(function(R){return A=R})}function Y(_){var R=P[_.name],k={};k.promise=new m(function($,B){k.resolve=$,k.reject=B}),R.deferredOperations.push(k),R.dbReady=R.dbReady?R.dbReady.then(function(){return k.promise}):k.promise}function te(_){var k=P[_.name].deferredOperations.pop();if(k)return k.resolve(),k.promise}function de(_,R){var $=P[_.name].deferredOperations.pop();if($)return $.reject(R),$.promise}function j(_,R){return new m(function(k,$){if(P[_.name]=P[_.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},_.db){if(!R)return k(_.db);Y(_),_.db.close()}var B=[_.name];R&&B.push(_.version);var F=f.open.apply(f,B);R&&(F.onupgradeneeded=function(X){var oe=F.result;try{oe.createObjectStore(_.storeName),X.oldVersion<=1&&oe.createObjectStore(T)}catch(ue){if("ConstraintError"!==ue.name)throw ue;console.warn('The database "'+_.name+'" has been upgraded from version '+X.oldVersion+" to version "+X.newVersion+', but the storage "'+_.storeName+'" already exists.')}}),F.onerror=function(X){X.preventDefault(),$(F.error)},F.onsuccess=function(){var X=F.result;X.onversionchange=function(oe){oe.target.close()},k(X),te(_)}})}function L(_){return j(_,!1)}function y(_){return j(_,!0)}function J(_,R){if(!_.db)return!0;var k=!_.db.objectStoreNames.contains(_.storeName),B=_.version>_.db.version;if(_.version<_.db.version&&(_.version!==R&&console.warn('The database "'+_.name+"\" can't be downgraded from version "+_.db.version+" to version "+_.version+"."),_.version=_.db.version),B||k){if(k){var F=_.db.version+1;F>_.version&&(_.version=F)}return!0}return!1}function ae(_){return p([H(atob(_.data))],{type:_.type})}function Ie(_){return _&&_.__local_forage_encoded_blob}function fe(_){var R=this,k=R._initReady().then(function(){var $=P[R._dbInfo.name];if($&&$.dbReady)return $.dbReady});return g(k,_,_),k}function G(_,R,k,$){void 0===$&&($=1);try{var B=_.db.transaction(_.storeName,R);k(null,B)}catch(F){if($>0&&(!_.db||"InvalidStateError"===F.name||"NotFoundError"===F.name))return m.resolve().then(function(){if(!_.db||"NotFoundError"===F.name&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),y(_)}).then(function(){return function Pe(_){Y(_);for(var R=P[_.name],k=R.forages,$=0;$<k.length;$++){var B=k[$];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return _.db=null,L(_).then(function(F){return _.db=F,J(_)?y(_):F}).then(function(F){_.db=R.db=F;for(var X=0;X<k.length;X++)k[X]._dbInfo.db=F}).catch(function(F){throw de(_,F),F})}(_).then(function(){G(_,R,k,$-1)})}).catch(k);k(F)}}var we={_driver:"asyncStorage",_initStorage:function Ee(_){var R=this,k={db:null};if(_)for(var $ in _)k[$]=_[$];var B=P[k.name];B||(P[k.name]=B={forages:[],db:null,dbReady:null,deferredOperations:[]}),B.forages.push(R),R._initReady||(R._initReady=R.ready,R.ready=fe);var F=[];function X(){return m.resolve()}for(var oe=0;oe<B.forages.length;oe++){var ue=B.forages[oe];ue!==R&&F.push(ue._initReady().catch(X))}var le=B.forages.slice(0);return m.all(F).then(function(){return k.db=B.db,L(k)}).then(function(pe){return k.db=pe,J(k,R._defaultConfig.version)?y(k):pe}).then(function(pe){k.db=B.db=pe,R._dbInfo=k;for(var _e=0;_e<le.length;_e++){var Oe=le[_e];Oe!==R&&(Oe._dbInfo.db=k.db,Oe._dbInfo.version=k.version)}})},_support:function u(){try{if(!f||!f.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),R="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!_||R)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function ge(_,R){var k=this,$=new m(function(B,F){k.ready().then(function(){G(k._dbInfo,M,function(X,oe){if(X)return F(X);try{var le=oe.objectStore(k._dbInfo.storeName).openCursor(),pe=1;le.onsuccess=function(){var _e=le.result;if(_e){var Oe=_e.value;Ie(Oe)&&(Oe=ae(Oe));var ze=_(Oe,_e.key,pe++);void 0!==ze?B(ze):_e.continue()}else B()},le.onerror=function(){F(le.error)}}catch(_e){F(_e)}})}).catch(F)});return v($,R),$},getItem:function ve(_,R){var k=this;_=E(_);var $=new m(function(B,F){k.ready().then(function(){G(k._dbInfo,M,function(X,oe){if(X)return F(X);try{var le=oe.objectStore(k._dbInfo.storeName).get(_);le.onsuccess=function(){var pe=le.result;void 0===pe&&(pe=null),Ie(pe)&&(pe=ae(pe)),B(pe)},le.onerror=function(){F(le.error)}}catch(pe){F(pe)}})}).catch(F)});return v($,R),$},setItem:function Ue(_,R,k){var $=this;_=E(_);var B=new m(function(F,X){var oe;$.ready().then(function(){return oe=$._dbInfo,"[object Blob]"===N.call(R)?Q(oe.db).then(function(ue){return ue?R:function xe(_){return new m(function(R,k){var $=new FileReader;$.onerror=k,$.onloadend=function(B){var F=btoa(B.target.result||"");R({__local_forage_encoded_blob:!0,data:F,type:_.type})},$.readAsBinaryString(_)})}(R)}):R}).then(function(ue){G($._dbInfo,D,function(le,pe){if(le)return X(le);try{var _e=pe.objectStore($._dbInfo.storeName);null===ue&&(ue=void 0);var Oe=_e.put(ue,_);pe.oncomplete=function(){void 0===ue&&(ue=null),F(ue)},pe.onabort=pe.onerror=function(){X(Oe.error?Oe.error:Oe.transaction.error)}}catch(ze){X(ze)}})}).catch(X)});return v(B,k),B},removeItem:function Ke(_,R){var k=this;_=E(_);var $=new m(function(B,F){k.ready().then(function(){G(k._dbInfo,D,function(X,oe){if(X)return F(X);try{var le=oe.objectStore(k._dbInfo.storeName).delete(_);oe.oncomplete=function(){B()},oe.onerror=function(){F(le.error)},oe.onabort=function(){F(le.error?le.error:le.transaction.error)}}catch(pe){F(pe)}})}).catch(F)});return v($,R),$},clear:function Ce(_){var R=this,k=new m(function($,B){R.ready().then(function(){G(R._dbInfo,D,function(F,X){if(F)return B(F);try{var ue=X.objectStore(R._dbInfo.storeName).clear();X.oncomplete=function(){$()},X.onabort=X.onerror=function(){B(ue.error?ue.error:ue.transaction.error)}}catch(le){B(le)}})}).catch(B)});return v(k,_),k},length:function $e(_){var R=this,k=new m(function($,B){R.ready().then(function(){G(R._dbInfo,M,function(F,X){if(F)return B(F);try{var ue=X.objectStore(R._dbInfo.storeName).count();ue.onsuccess=function(){$(ue.result)},ue.onerror=function(){B(ue.error)}}catch(le){B(le)}})}).catch(B)});return v(k,_),k},key:function Je(_,R){var k=this,$=new m(function(B,F){_<0?B(null):k.ready().then(function(){G(k._dbInfo,M,function(X,oe){if(X)return F(X);try{var ue=oe.objectStore(k._dbInfo.storeName),le=!1,pe=ue.openKeyCursor();pe.onsuccess=function(){var _e=pe.result;_e?0===_||le?B(_e.key):(le=!0,_e.advance(_)):B(null)},pe.onerror=function(){F(pe.error)}}catch(_e){F(_e)}})}).catch(F)});return v($,R),$},keys:function Ve(_){var R=this,k=new m(function($,B){R.ready().then(function(){G(R._dbInfo,M,function(F,X){if(F)return B(F);try{var ue=X.objectStore(R._dbInfo.storeName).openKeyCursor(),le=[];ue.onsuccess=function(){var pe=ue.result;pe?(le.push(pe.key),pe.continue()):$(le)},ue.onerror=function(){B(ue.error)}}catch(pe){B(pe)}})}).catch(B)});return v(k,_),k},dropInstance:function ht(_,R){R=b.apply(this,arguments);var B,k=this.config();return(_="function"!=typeof _&&_||{}).name||(_.name=_.name||k.name,_.storeName=_.storeName||k.storeName),v(B=_.name?(_.name===k.name&&this._dbInfo.db?m.resolve(this._dbInfo.db):L(_).then(function(oe){var ue=P[_.name],le=ue.forages;ue.db=oe;for(var pe=0;pe<le.length;pe++)le[pe]._dbInfo.db=oe;return oe})).then(_.storeName?function(oe){if(oe.objectStoreNames.contains(_.storeName)){var ue=oe.version+1;Y(_);var le=P[_.name],pe=le.forages;oe.close();for(var _e=0;_e<pe.length;_e++){var Oe=pe[_e];Oe._dbInfo.db=null,Oe._dbInfo.version=ue}return new m(function(qe,Ye){var Ze=f.open(_.name,ue);Ze.onerror=function(at){Ze.result.close(),Ye(at)},Ze.onupgradeneeded=function(){Ze.result.deleteObjectStore(_.storeName)},Ze.onsuccess=function(){var at=Ze.result;at.close(),qe(at)}}).then(function(qe){le.db=qe;for(var Ye=0;Ye<pe.length;Ye++){var Ze=pe[Ye];Ze._dbInfo.db=qe,te(Ze._dbInfo)}}).catch(function(qe){throw(de(_,qe)||m.resolve()).catch(function(){}),qe})}}:function(oe){Y(_);var ue=P[_.name],le=ue.forages;oe.close();for(var pe=0;pe<le.length;pe++)le[pe]._dbInfo.db=null;return new m(function(ze,qe){var Ye=f.deleteDatabase(_.name);Ye.onerror=function(){var Ze=Ye.result;Ze&&Ze.close(),qe(Ye.error)},Ye.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},Ye.onsuccess=function(){var Ze=Ye.result;Ze&&Ze.close(),ze(Ze)}}).then(function(ze){ue.db=ze;for(var qe=0;qe<le.length;qe++)te(le[qe]._dbInfo)}).catch(function(ze){throw(de(_,ze)||m.resolve()).catch(function(){}),ze})}):m.reject("Invalid arguments"),R),B}};var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=/^~~local_forage_type~([^~]+)~/,x="__lfsc__:",ne="arbf",se="blob",z="si08",wt=Object.prototype.toString;function We(_){var $,F,X,oe,ue,R=.75*_.length,k=_.length,B=0;"="===_[_.length-1]&&(R--,"="===_[_.length-2]&&R--);var le=new ArrayBuffer(R),pe=new Uint8Array(le);for($=0;$<k;$+=4)F=Z.indexOf(_[$]),X=Z.indexOf(_[$+1]),oe=Z.indexOf(_[$+2]),ue=Z.indexOf(_[$+3]),pe[B++]=F<<2|X>>4,pe[B++]=(15&X)<<4|oe>>2,pe[B++]=(3&oe)<<6|63&ue;return le}function St(_){var $,R=new Uint8Array(_),k="";for($=0;$<R.length;$+=3)k+=Z[R[$]>>2],k+=Z[(3&R[$])<<4|R[$+1]>>4],k+=Z[(15&R[$+1])<<2|R[$+2]>>6],k+=Z[63&R[$+2]];return R.length%3==2?k=k.substring(0,k.length-1)+"=":R.length%3==1&&(k=k.substring(0,k.length-2)+"=="),k}var Ot={serialize:function tr(_,R){var k="";if(_&&(k=wt.call(_)),_&&("[object ArrayBuffer]"===k||_.buffer&&"[object ArrayBuffer]"===wt.call(_.buffer))){var $,B=x;_ instanceof ArrayBuffer?($=_,B+=ne):($=_.buffer,"[object Int8Array]"===k?B+=z:"[object Uint8Array]"===k?B+="ui08":"[object Uint8ClampedArray]"===k?B+="uic8":"[object Int16Array]"===k?B+="si16":"[object Uint16Array]"===k?B+="ur16":"[object Int32Array]"===k?B+="si32":"[object Uint32Array]"===k?B+="ui32":"[object Float32Array]"===k?B+="fl32":"[object Float64Array]"===k?B+="fl64":R(new Error("Failed to get type for BinaryArray"))),R(B+St($))}else if("[object Blob]"===k){var F=new FileReader;F.onload=function(){var X="~~local_forage_type~"+_.type+"~"+St(this.result);R(x+se+X)},F.readAsArrayBuffer(_)}else try{R(JSON.stringify(_))}catch(X){console.error("Couldn't convert value into a JSON string: ",_),R(null,X)}},deserialize:function mt(_){if(_.substring(0,9)!==x)return JSON.parse(_);var $,R=_.substring(13),k=_.substring(9,13);if(k===se&&S.test(R)){var B=R.match(S);$=B[1],R=R.substring(B[0].length)}var F=We(R);switch(k){case ne:return F;case se:return p([F],{type:$});case z:return new Int8Array(F);case"ui08":return new Uint8Array(F);case"uic8":return new Uint8ClampedArray(F);case"si16":return new Int16Array(F);case"ur16":return new Uint16Array(F);case"si32":return new Int32Array(F);case"ui32":return new Uint32Array(F);case"fl32":return new Float32Array(F);case"fl64":return new Float64Array(F);default:throw new Error("Unkown type: "+k)}},stringToBuffer:We,bufferToString:St};function je(_,R,k,$){_.executeSql("CREATE TABLE IF NOT EXISTS "+R.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],k,$)}function dt(_,R,k,$,B,F){_.executeSql(k,$,B,function(X,oe){oe.code===oe.SYNTAX_ERR?X.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[R.storeName],function(ue,le){le.rows.length?F(ue,oe):je(ue,R,function(){ue.executeSql(k,$,B,F)},F)},F):F(X,oe)},F)}function Nt(_,R,k,$){var B=this;_=E(_);var F=new m(function(X,oe){B.ready().then(function(){void 0===R&&(R=null);var ue=R,le=B._dbInfo;le.serializer.serialize(R,function(pe,_e){_e?oe(_e):le.db.transaction(function(Oe){dt(Oe,le,"INSERT OR REPLACE INTO "+le.storeName+" (key, value) VALUES (?, ?)",[_,pe],function(){X(ue)},function(ze,qe){oe(qe)})},function(Oe){if(Oe.code===Oe.QUOTA_ERR){if($>0)return void X(Nt.apply(B,[_,ue,k,$-1]));oe(Oe)}})})}).catch(oe)});return v(F,k),F}var Ct={_driver:"webSQLStorage",_initStorage:function cr(_){var R=this,k={db:null};if(_)for(var $ in _)k[$]="string"!=typeof _[$]?_[$].toString():_[$];var B=new m(function(F,X){try{k.db=openDatabase(k.name,String(k.version),k.description,k.size)}catch(oe){return X(oe)}k.db.transaction(function(oe){je(oe,k,function(){R._dbInfo=k,F()},function(ue,le){X(le)})},X)});return k.serializer=Ot,B},_support:function d(){return"function"==typeof openDatabase}(),iterate:function pt(_,R){var k=this,$=new m(function(B,F){k.ready().then(function(){var X=k._dbInfo;X.db.transaction(function(oe){dt(oe,X,"SELECT * FROM "+X.storeName,[],function(ue,le){for(var pe=le.rows,_e=pe.length,Oe=0;Oe<_e;Oe++){var ze=pe.item(Oe),qe=ze.value;if(qe&&(qe=X.serializer.deserialize(qe)),void 0!==(qe=_(qe,ze.key,Oe+1)))return void B(qe)}B()},function(ue,le){F(le)})})}).catch(F)});return v($,R),$},getItem:function rr(_,R){var k=this;_=E(_);var $=new m(function(B,F){k.ready().then(function(){var X=k._dbInfo;X.db.transaction(function(oe){dt(oe,X,"SELECT * FROM "+X.storeName+" WHERE key = ? LIMIT 1",[_],function(ue,le){var pe=le.rows.length?le.rows.item(0).value:null;pe&&(pe=X.serializer.deserialize(pe)),B(pe)},function(ue,le){F(le)})})}).catch(F)});return v($,R),$},setItem:function Dt(_,R,k){return Nt.apply(this,[_,R,k,1])},removeItem:function Cr(_,R){var k=this;_=E(_);var $=new m(function(B,F){k.ready().then(function(){var X=k._dbInfo;X.db.transaction(function(oe){dt(oe,X,"DELETE FROM "+X.storeName+" WHERE key = ?",[_],function(){B()},function(ue,le){F(le)})})}).catch(F)});return v($,R),$},clear:function ye(_){var R=this,k=new m(function($,B){R.ready().then(function(){var F=R._dbInfo;F.db.transaction(function(X){dt(X,F,"DELETE FROM "+F.storeName,[],function(){$()},function(oe,ue){B(ue)})})}).catch(B)});return v(k,_),k},length:function yr(_){var R=this,k=new m(function($,B){R.ready().then(function(){var F=R._dbInfo;F.db.transaction(function(X){dt(X,F,"SELECT COUNT(key) as c FROM "+F.storeName,[],function(oe,ue){var le=ue.rows.item(0).c;$(le)},function(oe,ue){B(ue)})})}).catch(B)});return v(k,_),k},key:function ot(_,R){var k=this,$=new m(function(B,F){k.ready().then(function(){var X=k._dbInfo;X.db.transaction(function(oe){dt(oe,X,"SELECT key FROM "+X.storeName+" WHERE id = ? LIMIT 1",[_+1],function(ue,le){var pe=le.rows.length?le.rows.item(0).key:null;B(pe)},function(ue,le){F(le)})})}).catch(F)});return v($,R),$},keys:function nr(_){var R=this,k=new m(function($,B){R.ready().then(function(){var F=R._dbInfo;F.db.transaction(function(X){dt(X,F,"SELECT key FROM "+F.storeName,[],function(oe,ue){for(var le=[],pe=0;pe<ue.rows.length;pe++)le.push(ue.rows.item(pe).key);$(le)},function(oe,ue){B(ue)})})}).catch(B)});return v(k,_),k},dropInstance:function Br(_,R){R=b.apply(this,arguments);var k=this.config();(_="function"!=typeof _&&_||{}).name||(_.name=_.name||k.name,_.storeName=_.storeName||k.storeName);var B,$=this;return v(B=_.name?new m(function(F){var X;X=_.name===k.name?$._dbInfo.db:openDatabase(_.name,"","",0),F(_.storeName?{db:X,storeNames:[_.storeName]}:function gr(_){return new m(function(R,k){_.transaction(function($){$.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(B,F){for(var X=[],oe=0;oe<F.rows.length;oe++)X.push(F.rows.item(oe).name);R({db:_,storeNames:X})},function(B,F){k(F)})},function($){k($)})})}(X))}).then(function(F){return new m(function(X,oe){F.db.transaction(function(ue){function le(ze){return new m(function(qe,Ye){ue.executeSql("DROP TABLE IF EXISTS "+ze,[],function(){qe()},function(Ze,at){Ye(at)})})}for(var pe=[],_e=0,Oe=F.storeNames.length;_e<Oe;_e++)pe.push(le(F.storeNames[_e]));m.all(pe).then(function(){X()}).catch(function(ze){oe(ze)})},function(ue){oe(ue)})})}):m.reject("Invalid arguments"),R),B}};function ut(_,R){var k=_.name+"/";return _.storeName!==R.storeName&&(k+=_.storeName+"/"),k}function Wt(){return!function $r(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}()||localStorage.length>0}var lr={_driver:"localStorageWrapper",_initStorage:function Lr(_){var k={};if(_)for(var $ in _)k[$]=_[$];return k.keyPrefix=ut(_,this._defaultConfig),Wt()?(this._dbInfo=k,k.serializer=Ot,m.resolve()):m.reject()},_support:function Fr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function it(_,R){var k=this,$=k.ready().then(function(){for(var B=k._dbInfo,F=B.keyPrefix,X=F.length,oe=localStorage.length,ue=1,le=0;le<oe;le++){var pe=localStorage.key(le);if(0===pe.indexOf(F)){var _e=localStorage.getItem(pe);if(_e&&(_e=B.serializer.deserialize(_e)),void 0!==(_e=_(_e,pe.substring(X),ue++)))return _e}}});return v($,R),$},getItem:function ln(_,R){var k=this;_=E(_);var $=k.ready().then(function(){var B=k._dbInfo,F=localStorage.getItem(B.keyPrefix+_);return F&&(F=B.serializer.deserialize(F)),F});return v($,R),$},setItem:function ur(_,R,k){var $=this;_=E(_);var B=$.ready().then(function(){void 0===R&&(R=null);var F=R;return new m(function(X,oe){var ue=$._dbInfo;ue.serializer.serialize(R,function(le,pe){if(pe)oe(pe);else try{localStorage.setItem(ue.keyPrefix+_,le),X(F)}catch(_e){("QuotaExceededError"===_e.name||"NS_ERROR_DOM_QUOTA_REACHED"===_e.name)&&oe(_e),oe(_e)}})})});return v(B,k),B},removeItem:function qr(_,R){var k=this;_=E(_);var $=k.ready().then(function(){localStorage.removeItem(k._dbInfo.keyPrefix+_)});return v($,R),$},clear:function Mr(_){var R=this,k=R.ready().then(function(){for(var $=R._dbInfo.keyPrefix,B=localStorage.length-1;B>=0;B--){var F=localStorage.key(B);0===F.indexOf($)&&localStorage.removeItem(F)}});return v(k,_),k},length:function vr(_){var k=this.keys().then(function($){return $.length});return v(k,_),k},key:function zr(_,R){var k=this,$=k.ready().then(function(){var F,B=k._dbInfo;try{F=localStorage.key(_)}catch{F=null}return F&&(F=F.substring(B.keyPrefix.length)),F});return v($,R),$},keys:function fn(_){var R=this,k=R.ready().then(function(){for(var $=R._dbInfo,B=localStorage.length,F=[],X=0;X<B;X++){var oe=localStorage.key(X);0===oe.indexOf($.keyPrefix)&&F.push(oe.substring($.keyPrefix.length))}return F});return v(k,_),k},dropInstance:function vt(_,R){if(R=b.apply(this,arguments),!(_="function"!=typeof _&&_||{}).name){var k=this.config();_.name=_.name||k.name,_.storeName=_.storeName||k.storeName}var B,$=this;return v(B=_.name?new m(function(F){F(_.storeName?ut(_,$._defaultConfig):_.name+"/")}).then(function(F){for(var X=localStorage.length-1;X>=0;X--){var oe=localStorage.key(X);0===oe.indexOf(F)&&localStorage.removeItem(oe)}}):m.reject("Invalid arguments"),R),B}},br=function(R,k){return R===k||"number"==typeof R&&"number"==typeof k&&isNaN(R)&&isNaN(k)},Ur=function(R,k){for(var $=R.length,B=0;B<$;){if(br(R[B],k))return!0;B++}return!1},_r=Array.isArray||function(_){return"[object Array]"===Object.prototype.toString.call(_)},Gt={},Vt={},Bt={INDEXEDDB:we,WEBSQL:Ct,LOCALSTORAGE:lr},fr=[Bt.INDEXEDDB._driver,Bt.WEBSQL._driver,Bt.LOCALSTORAGE._driver],ir=["dropInstance"],It=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ir),wr={description:"",driver:fr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Wr(_,R){_[R]=function(){var k=arguments;return _.ready().then(function(){return _[R].apply(_,k)})}}function hr(){for(var _=1;_<arguments.length;_++){var R=arguments[_];if(R)for(var k in R)R.hasOwnProperty(k)&&(arguments[0][k]=_r(R[k])?R[k].slice():R[k])}return arguments[0]}var Gr=function(){function _(R){for(var k in function s(_,R){if(!(_ instanceof R))throw new TypeError("Cannot call a class as a function")}(this,_),Bt)if(Bt.hasOwnProperty(k)){var $=Bt[k],B=$._driver;this[k]=B,Gt[B]||this.defineDriver($)}this._defaultConfig=hr({},wr),this._config=hr({},this._defaultConfig,R),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(k){if("object"===(typeof k>"u"?"undefined":i(k))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var $ in k){if("storeName"===$&&(k[$]=k[$].replace(/\W/g,"_")),"version"===$&&"number"!=typeof k[$])return new Error("Database version must be a number.");this._config[$]=k[$]}return!("driver"in k)||!k.driver||this.setDriver(this._config.driver)}return"string"==typeof k?this._config[k]:this._config},_.prototype.defineDriver=function(k,$,B){var F=new m(function(X,oe){try{var ue=k._driver,le=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!k._driver)return void oe(le);for(var pe=It.concat("_initStorage"),_e=0,Oe=pe.length;_e<Oe;_e++){var ze=pe[_e];if((!Ur(ir,ze)||k[ze])&&"function"!=typeof k[ze])return void oe(le)}!function(){for(var Ft=function(Ar){return function(){var Et=new Error("Method "+Ar+" is not implemented by the current driver"),$t=m.reject(Et);return v($t,arguments[arguments.length-1]),$t}},Er=0,dr=ir.length;Er<dr;Er++){var Ht=ir[Er];k[Ht]||(k[Ht]=Ft(Ht))}}();var Ze=function(Ft){Gt[ue]&&console.info("Redefining LocalForage driver: "+ue),Gt[ue]=k,Vt[ue]=Ft,X()};"_support"in k?k._support&&"function"==typeof k._support?k._support().then(Ze,oe):Ze(!!k._support):Ze(!0)}catch(at){oe(at)}});return g(F,$,B),F},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(k,$,B){var F=Gt[k]?m.resolve(Gt[k]):m.reject(new Error("Driver not found."));return g(F,$,B),F},_.prototype.getSerializer=function(k){var $=m.resolve(Ot);return g($,k),$},_.prototype.ready=function(k){var $=this,B=$._driverSet.then(function(){return null===$._ready&&($._ready=$._initDriver()),$._ready});return g(B,k,k),B},_.prototype.setDriver=function(k,$,B){var F=this;_r(k)||(k=[k]);var X=this._getSupportedDrivers(k);function oe(){F._config.driver=F.driver()}function ue(_e){return F._extend(_e),oe(),F._ready=F._initStorage(F._config),F._ready}var pe=null!==this._driverSet?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=pe.then(function(){var _e=X[0];return F._dbInfo=null,F._ready=null,F.getDriver(_e).then(function(Oe){F._driver=Oe._driver,oe(),F._wrapLibraryMethodsWithReady(),F._initDriver=function le(_e){return function(){var Oe=0;return function ze(){for(;Oe<_e.length;){var qe=_e[Oe];return Oe++,F._dbInfo=null,F._ready=null,F.getDriver(qe).then(ue).catch(ze)}oe();var Ye=new Error("No available storage method found.");return F._driverSet=m.reject(Ye),F._driverSet}()}}(X)})}).catch(function(){oe();var _e=new Error("No available storage method found.");return F._driverSet=m.reject(_e),F._driverSet}),g(this._driverSet,$,B),this._driverSet},_.prototype.supports=function(k){return!!Vt[k]},_.prototype._extend=function(k){hr(this,k)},_.prototype._getSupportedDrivers=function(k){for(var $=[],B=0,F=k.length;B<F;B++){var X=k[B];this.supports(X)&&$.push(X)}return $},_.prototype._wrapLibraryMethodsWithReady=function(){for(var k=0,$=It.length;k<$;k++)Wr(this,It[k])},_.prototype.createInstance=function(k){return new _(k)},_}(),hn=new Gr;r.exports=hn},{3:3}]},{},[4])(4)}(Kn);const Yn=Kn.exports;var Zn={exports:{}};!function(o,t){o.exports=function e(r,n,i){function s(u,p){if(!n[u]){if(!r[u]){if(!p&&Ut)return Ut(u);if(c)return c(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var g=n[u]={exports:{}};r[u][0].call(g.exports,function(E){return s(r[u][1][E]||E)},g,g.exports,e,r,n,i)}return n[u].exports}for(var c=Ut,f=0;f<i.length;f++)s(i[f]);return s}({1:[function(e,r,n){var i=e("./utils"),s=e("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var u,p,m,g,E,b,T=[],A=0,P=f.length,N=P,M="string"!==i.getTypeOf(f);A<f.length;)N=P-A,m=M?(u=f[A++],p=A<P?f[A++]:0,A<P?f[A++]:0):(u=f.charCodeAt(A++),p=A<P?f.charCodeAt(A++):0,A<P?f.charCodeAt(A++):0),g=(3&u)<<4|p>>4,E=1<N?(15&p)<<2|m>>6:64,b=2<N?63&m:64,T.push(c.charAt(u>>2)+c.charAt(g)+c.charAt(E)+c.charAt(b));return T.join("")},n.decode=function(f){var u,p,m,v,g,E,b=0,T=0,A="data:";if(f.substr(0,5)===A)throw new Error("Invalid base64 input, it looks like a data url.");var P,N=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===c.charAt(64)&&N--,f.charAt(f.length-2)===c.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(P=s.uint8array?new Uint8Array(0|N):new Array(0|N);b<f.length;)u=c.indexOf(f.charAt(b++))<<2|(v=c.indexOf(f.charAt(b++)))>>4,p=(15&v)<<4|(g=c.indexOf(f.charAt(b++)))>>2,m=(3&g)<<6|(E=c.indexOf(f.charAt(b++))),P[T++]=u,64!==g&&(P[T++]=p),64!==E&&(P[T++]=m);return P}},{"./support":30,"./utils":32}],2:[function(e,r,n){var i=e("./external"),s=e("./stream/DataWorker"),c=e("./stream/Crc32Probe"),f=e("./stream/DataLengthProbe");function u(p,m,v,g,E){this.compressedSize=p,this.uncompressedSize=m,this.crc32=v,this.compression=g,this.compressedContent=E}u.prototype={getContentWorker:function(){var p=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),m=this;return p.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(p,m,v){return p.pipe(new c).pipe(new f("uncompressedSize")).pipe(m.compressWorker(v)).pipe(new f("compressedSize")).withStreamInfo("compression",m)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,r,n){var i=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,r,n){var i=e("./utils"),s=function(){for(var c,f=[],u=0;u<256;u++){c=u;for(var p=0;p<8;p++)c=1&c?3988292384^c>>>1:c>>>1;f[u]=c}return f}();r.exports=function(c,f){return void 0!==c&&c.length?"string"!==i.getTypeOf(c)?function(u,p,m,v){var g=s,E=0+m;u^=-1;for(var b=0;b<E;b++)u=u>>>8^g[255&(u^p[b])];return~u}(0|f,c,c.length):function(u,p,m,v){var g=s,E=0+m;u^=-1;for(var b=0;b<E;b++)u=u>>>8^g[255&(u^p.charCodeAt(b))];return~u}(0|f,c,c.length):0}},{"./utils":32}],5:[function(e,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,r,n){var i;i=typeof Promise<"u"?Promise:e("lie"),r.exports={Promise:i}},{lie:37}],7:[function(e,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=e("pako"),c=e("./utils"),f=e("./stream/GenericWorker"),u=i?"uint8array":"array";function p(m,v){f.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=v,this.meta={}}n.magic="\b\0",c.inherits(p,f),p.prototype.processChunk=function(m){this.meta=m.meta,null===this._pako&&this._createPako(),this._pako.push(c.transformTo(u,m.data),!1)},p.prototype.flush=function(){f.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(v){m.push({data:v,meta:m.meta})}},n.compressWorker=function(m){return new p("Deflate",m)},n.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,r,n){function i(g,E){var b,T="";for(b=0;b<E;b++)T+=String.fromCharCode(255&g),g>>>=8;return T}function s(g,E,b,T,A,P){var N,M,D=g.file,H=g.compression,q=P!==u.utf8encode,Q=c.transformTo("string",P(D.name)),Y=c.transformTo("string",u.utf8encode(D.name)),te=D.comment,de=c.transformTo("string",P(te)),j=c.transformTo("string",u.utf8encode(te)),L=Y.length!==D.name.length,y=j.length!==te.length,J="",xe="",ae="",Ie=D.dir,fe=D.date,Pe={crc32:0,compressedSize:0,uncompressedSize:0};E&&!b||(Pe.crc32=g.crc32,Pe.compressedSize=g.compressedSize,Pe.uncompressedSize=g.uncompressedSize);var G=0;E&&(G|=8),q||!L&&!y||(G|=2048);var ge,Ke,W=0,Ee=0;Ie&&(W|=16),"UNIX"===A?(Ee=798,W|=(Ke=ge=D.unixPermissions,ge||(Ke=Ie?16893:33204),(65535&Ke)<<16)):(Ee=20,W|=function(ge){return 63&(ge||0)}(D.dosPermissions)),N=fe.getUTCHours(),N<<=6,N|=fe.getUTCMinutes(),N<<=5,N|=fe.getUTCSeconds()/2,M=fe.getUTCFullYear()-1980,M<<=4,M|=fe.getUTCMonth()+1,M<<=5,M|=fe.getUTCDate(),L&&(xe=i(1,1)+i(p(Q),4)+Y,J+="up"+i(xe.length,2)+xe),y&&(ae=i(1,1)+i(p(de),4)+j,J+="uc"+i(ae.length,2)+ae);var ve="";return ve+="\n\0",ve+=i(G,2),ve+=H.magic,ve+=i(N,2),ve+=i(M,2),ve+=i(Pe.crc32,4),ve+=i(Pe.compressedSize,4),ve+=i(Pe.uncompressedSize,4),ve+=i(Q.length,2),ve+=i(J.length,2),{fileRecord:m.LOCAL_FILE_HEADER+ve+Q+J,dirRecord:m.CENTRAL_FILE_HEADER+i(Ee,2)+ve+i(de.length,2)+"\0\0\0\0"+i(W,4)+i(T,4)+Q+J+de}}var c=e("../utils"),f=e("../stream/GenericWorker"),u=e("../utf8"),p=e("../crc32"),m=e("../signature");function v(g,E,b,T){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=b,this.encodeFileName=T,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(v,f),v.prototype.push=function(g){var E=g.meta.percent||0,b=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,f.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(E+100*(b-T-1))/b:100}}))},v.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var E=this.streamFiles&&!g.file.dir;if(E){var b=s(g,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(g){this.accumulate=!1;var T,E=this.streamFiles&&!g.file.dir,b=s(g,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),E)this.push({data:(T=g,m.DATA_DESCRIPTOR+i(T.crc32,4)+i(T.compressedSize,4)+i(T.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var g=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var A,P,N,H,T=(A=this.dirRecords.length,P=this.bytesWritten-g,N=g,H=c.transformTo("string",(0,this.encodeFileName)(this.zipComment)),m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(A,2)+i(A,2)+i(P,4)+i(N,4)+i(H.length,2)+H);this.push({data:T,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(g){this._sources.push(g);var E=this;return g.on("data",function(b){E.processChunk(b)}),g.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),g.on("error",function(b){E.error(b)}),this},v.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(g){var E=this._sources;if(!f.prototype.error.call(this,g))return!1;for(var b=0;b<E.length;b++)try{E[b].error(g)}catch{}return!0},v.prototype.lock=function(){f.prototype.lock.call(this);for(var g=this._sources,E=0;E<g.length;E++)g[E].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,r,n){var i=e("../compressions"),s=e("./ZipFileWorker");n.generateWorker=function(c,f,u){var p=new s(f.streamFiles,u,f.platform,f.encodeFileName),m=0;try{c.forEach(function(v,g){m++;var E=function(P,N){var M=P||N,D=i[M];if(!D)throw new Error(M+" is not a valid compression method !");return D}(g.options.compression,f.compression),T=g.dir,A=g.date;g._compressWorker(E,g.options.compressionOptions||f.compressionOptions||{}).withStreamInfo("file",{name:v,dir:T,date:A,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(p)}),p.entriesCount=m}catch(v){p.error(v)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,r,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var c in this)"function"!=typeof this[c]&&(s[c]=this[c]);return s}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(s,c){return(new i).loadAsync(s,c)},i.external=e("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,r,n){var i=e("./utils"),s=e("./external"),c=e("./utf8"),f=e("./zipEntries"),u=e("./stream/Crc32Probe"),p=e("./nodejsUtils");function m(v){return new s.Promise(function(g,E){var b=v.decompressed.getContentWorker().pipe(new u);b.on("error",function(T){E(T)}).on("end",function(){b.streamInfo.crc32!==v.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(v,g){var E=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),p.isNode&&p.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",v,!0,g.optimizedBinaryString,g.base64).then(function(b){var T=new f(g);return T.load(b),T}).then(function(b){var T=[s.Promise.resolve(b)],A=b.files;if(g.checkCRC32)for(var P=0;P<A.length;P++)T.push(m(A[P]));return s.Promise.all(T)}).then(function(b){for(var T=b.shift(),A=T.files,P=0;P<A.length;P++){var N=A[P],M=N.fileNameStr,D=i.resolve(N.fileNameStr);E.file(D,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:g.createFolders}),N.dir||(E.file(D).unsafeOriginalName=M)}return T.zipComment.length&&(E.comment=T.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,r,n){var i=e("../utils"),s=e("../stream/GenericWorker");function c(f,u){s.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(c,s),c.prototype._bindStream=function(f){var u=this;(this._stream=f).pause(),f.on("data",function(p){u.push({data:p,meta:{percent:0}})}).on("error",function(p){u.isPaused?this.generatedError=p:u.error(p)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},c.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,r,n){var i=e("readable-stream").Readable;function s(c,f,u){i.call(this,f),this._helper=c;var p=this;c.on("data",function(m,v){p.push(m)||p._helper.pause(),u&&u(v)}).on("error",function(m){p.emit("error",m)}).on("end",function(){p.push(null)})}e("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,r,n){r.exports={isNode:!0,newBufferFrom:function(i,s){if(re.from&&re.from!==Uint8Array.from)return re.from(i,s);if("number"==typeof i)throw new Error('The "data" argument must not be a number');return new re(i,s)},allocBuffer:function(i){if(re.alloc)return re.alloc(i);var s=new re(i);return s.fill(0),s},isBuffer:function(i){return re.isBuffer(i)},isStream:function(i){return i&&"function"==typeof i.on&&"function"==typeof i.pause&&"function"==typeof i.resume}}},{}],15:[function(e,r,n){function i(D,H,q){var Q,Y=c.getTypeOf(H),te=c.extend(q||{},p);te.date=te.date||new Date,null!==te.compression&&(te.compression=te.compression.toUpperCase()),"string"==typeof te.unixPermissions&&(te.unixPermissions=parseInt(te.unixPermissions,8)),te.unixPermissions&&16384&te.unixPermissions&&(te.dir=!0),te.dosPermissions&&16&te.dosPermissions&&(te.dir=!0),te.dir&&(D=A(D)),te.createFolders&&(Q=T(D))&&P.call(this,Q,!0),q&&void 0!==q.binary||(te.binary=!("string"===Y&&!1===te.binary&&!1===te.base64)),(H instanceof m&&0===H.uncompressedSize||te.dir||!H||0===H.length)&&(te.base64=!1,te.binary=!0,H="",te.compression="STORE",Y="string");var j;j=H instanceof m||H instanceof f?H:E.isNode&&E.isStream(H)?new b(D,H):c.prepareContent(D,H,te.binary,te.optimizedBinaryString,te.base64);var L=new v(D,j,te);this.files[D]=L}var s=e("./utf8"),c=e("./utils"),f=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),p=e("./defaults"),m=e("./compressedObject"),v=e("./zipObject"),g=e("./generate"),E=e("./nodejsUtils"),b=e("./nodejs/NodejsStreamInputAdapter"),T=function(D){"/"===D.slice(-1)&&(D=D.substring(0,D.length-1));var H=D.lastIndexOf("/");return 0<H?D.substring(0,H):""},A=function(D){return"/"!==D.slice(-1)&&(D+="/"),D},P=function(D,H){return H=void 0!==H?H:p.createFolders,D=A(D),this.files[D]||i.call(this,D,null,{dir:!0,createFolders:H}),this.files[D]};function N(D){return"[object RegExp]"===Object.prototype.toString.call(D)}var M={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var H,q,Q;for(H in this.files)Q=this.files[H],(q=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&D(q,Q)},filter:function(D){var H=[];return this.forEach(function(q,Q){D(q,Q)&&H.push(Q)}),H},file:function(D,H,q){if(1!==arguments.length)return i.call(this,D=this.root+D,H,q),this;if(N(D)){var Q=D;return this.filter(function(te,de){return!de.dir&&Q.test(te)})}var Y=this.files[this.root+D];return Y&&!Y.dir?Y:null},folder:function(D){if(!D)return this;if(N(D))return this.filter(function(Y,te){return te.dir&&D.test(Y)});var q=P.call(this,this.root+D),Q=this.clone();return Q.root=q.name,Q},remove:function(D){var H=this.files[D=this.root+D];if(H||("/"!==D.slice(-1)&&(D+="/"),H=this.files[D]),H&&!H.dir)delete this.files[D];else for(var q=this.filter(function(Y,te){return te.name.slice(0,D.length)===D}),Q=0;Q<q.length;Q++)delete this.files[q[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var H,q={};try{if((q=c.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=q.type.toLowerCase(),q.compression=q.compression.toUpperCase(),"binarystring"===q.type&&(q.type="string"),!q.type)throw new Error("No output type specified.");c.checkSupport(q.type),"darwin"!==q.platform&&"freebsd"!==q.platform&&"linux"!==q.platform&&"sunos"!==q.platform||(q.platform="UNIX"),"win32"===q.platform&&(q.platform="DOS"),H=g.generateWorker(this,q,q.comment||this.comment||"")}catch(Y){(H=new f("error")).error(Y)}return new u(H,q.type||"string",q.mimeType)},generateAsync:function(D,H){return this.generateInternalStream(D).accumulate(H)},generateNodeStream:function(D,H){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(H)}};r.exports=M},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,r,n){r.exports=e("stream")},{stream:void 0}],17:[function(e,r,n){var i=e("./DataReader");function s(c){i.call(this,c);for(var f=0;f<this.data.length;f++)c[f]=255&c[f]}e("../utils").inherits(s,i),s.prototype.byteAt=function(c){return this.data[this.zero+c]},s.prototype.lastIndexOfSignature=function(c){for(var f=c.charCodeAt(0),u=c.charCodeAt(1),p=c.charCodeAt(2),m=c.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===f&&this.data[v+1]===u&&this.data[v+2]===p&&this.data[v+3]===m)return v-this.zero;return-1},s.prototype.readAndCheckSignature=function(c){var f=c.charCodeAt(0),u=c.charCodeAt(1),p=c.charCodeAt(2),m=c.charCodeAt(3),v=this.readData(4);return f===v[0]&&u===v[1]&&p===v[2]&&m===v[3]},s.prototype.readData=function(c){if(this.checkOffset(c),0===c)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,r,n){var i=e("../utils");function s(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var f,u=0;for(this.checkOffset(c),f=this.index+c-1;f>=this.index;f--)u=(u<<8)+this.byteAt(f);return this.index+=c,u},readString:function(c){return i.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},r.exports=s},{"../utils":32}],19:[function(e,r,n){var i=e("./Uint8ArrayReader");function s(c){i.call(this,c)}e("../utils").inherits(s,i),s.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,r,n){var i=e("./DataReader");function s(c){i.call(this,c)}e("../utils").inherits(s,i),s.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},s.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},s.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},s.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,r,n){var i=e("./ArrayReader");function s(c){i.call(this,c)}e("../utils").inherits(s,i),s.prototype.readData=function(c){if(this.checkOffset(c),0===c)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,r,n){var i=e("../utils"),s=e("../support"),c=e("./ArrayReader"),f=e("./StringReader"),u=e("./NodeBufferReader"),p=e("./Uint8ArrayReader");r.exports=function(m){var v=i.getTypeOf(m);return i.checkSupport(v),"string"!==v||s.uint8array?"nodebuffer"===v?new u(m):s.uint8array?new p(i.transformTo("uint8array",m)):new c(i.transformTo("array",m)):new f(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,r,n){n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,r,n){var i=e("./GenericWorker"),s=e("../utils");function c(f){i.call(this,"ConvertWorker to "+f),this.destType=f}s.inherits(c,i),c.prototype.processChunk=function(f){this.push({data:s.transformTo(this.destType,f.data),meta:f.meta})},r.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(e,r,n){var i=e("./GenericWorker"),s=e("../crc32");function c(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(c,i),c.prototype.processChunk=function(f){this.streamInfo.crc32=s(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,r,n){var i=e("../utils"),s=e("./GenericWorker");function c(f){s.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}i.inherits(c,s),c.prototype.processChunk=function(f){f&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+f.data.length),s.prototype.processChunk.call(this,f)},r.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(e,r,n){var i=e("../utils"),s=e("./GenericWorker");function c(f){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(p){u.dataIsReady=!0,u.data=p,u.max=p&&p.length||0,u.type=i.getTypeOf(p),u.isPaused||u._tickAndRepeat()},function(p){u.error(p)})}i.inherits(c,s),c.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,u);break;case"uint8array":f=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":f=this.data.slice(this.index,u)}return this.index=u,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(e,r,n){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,c){return this._listeners[s].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,c){if(this._listeners[s])for(var f=0;f<this._listeners[s].length;f++)this._listeners[s][f].call(this,c)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var c=this;return s.on("data",function(f){c.processChunk(f)}),s.on("end",function(){c.end()}),s.on("error",function(f){c.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,c){return this.extraStreamInfo[s]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(e,r,n){var i=e("../utils"),s=e("./ConvertWorker"),c=e("./GenericWorker"),f=e("../base64"),u=e("../support"),p=e("../external"),m=null;if(u.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(E,b,T){var A=b;switch(b){case"blob":case"arraybuffer":A="uint8array";break;case"base64":A="string"}try{this._internalType=A,this._outputType=b,this._mimeType=T,i.checkSupport(A),this._worker=E.pipe(new s(A)),E.lock()}catch(P){this._worker=new c("error"),this._worker.error(P)}}g.prototype={accumulate:function(E){return function v(E,b){return new p.Promise(function(T,A){var P=[],N=E._internalType,M=E._outputType,D=E._mimeType;E.on("data",function(H,q){P.push(H),b&&b(q)}).on("error",function(H){P=[],A(H)}).on("end",function(){try{var H=function(q,Q,Y){switch(q){case"blob":return i.newBlob(i.transformTo("arraybuffer",Q),Y);case"base64":return f.encode(Q);default:return i.transformTo(q,Q)}}(M,function(q,Q){var Y,te=0,de=null,j=0;for(Y=0;Y<Q.length;Y++)j+=Q[Y].length;switch(q){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(de=new Uint8Array(j),Y=0;Y<Q.length;Y++)de.set(Q[Y],te),te+=Q[Y].length;return de;case"nodebuffer":return re.concat(Q);default:throw new Error("concat : unsupported type '"+q+"'")}}(N,P),D);T(H)}catch(q){A(q)}P=[]}).resume()})}(this,E)},on:function(E,b){var T=this;return this._worker.on(E,"data"===E?function(A){b.call(T,A.data,A.meta)}:function(){i.delay(b,arguments,T)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:"nodebuffer"!==this._outputType},E)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=!0,n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),n.blob=0===s.getBlob("application/zip").size}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,r,n){for(var i=e("./utils"),s=e("./support"),c=e("./nodejsUtils"),f=e("./stream/GenericWorker"),u=new Array(256),p=0;p<256;p++)u[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function m(){f.call(this,"utf-8 decode"),this.leftOver=null}function v(){f.call(this,"utf-8 encode")}u[254]=u[254]=1,n.utf8encode=function(g){return s.nodebuffer?c.newBufferFrom(g,"utf-8"):function(E){var b,T,A,P,N,M=E.length,D=0;for(P=0;P<M;P++)55296==(64512&(T=E.charCodeAt(P)))&&P+1<M&&56320==(64512&(A=E.charCodeAt(P+1)))&&(T=65536+(T-55296<<10)+(A-56320),P++),D+=T<128?1:T<2048?2:T<65536?3:4;for(b=s.uint8array?new Uint8Array(D):new Array(D),P=N=0;N<D;P++)55296==(64512&(T=E.charCodeAt(P)))&&P+1<M&&56320==(64512&(A=E.charCodeAt(P+1)))&&(T=65536+(T-55296<<10)+(A-56320),P++),T<128?b[N++]=T:(T<2048?b[N++]=192|T>>>6:(T<65536?b[N++]=224|T>>>12:(b[N++]=240|T>>>18,b[N++]=128|T>>>12&63),b[N++]=128|T>>>6&63),b[N++]=128|63&T);return b}(g)},n.utf8decode=function(g){return s.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(E){var b,T,A,P,N=E.length,M=new Array(2*N);for(b=T=0;b<N;)if((A=E[b++])<128)M[T++]=A;else if(4<(P=u[A]))M[T++]=65533,b+=P-1;else{for(A&=2===P?31:3===P?15:7;1<P&&b<N;)A=A<<6|63&E[b++],P--;1<P?M[T++]=65533:A<65536?M[T++]=A:(M[T++]=55296|(A-=65536)>>10&1023,M[T++]=56320|1023&A)}return M.length!==T&&(M.subarray?M=M.subarray(0,T):M.length=T),i.applyFromCharCode(M)}(g=i.transformTo(s.uint8array?"uint8array":"array",g))},i.inherits(m,f),m.prototype.processChunk=function(g){var E=i.transformTo(s.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var b=E;(E=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),E.set(b,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var T=function(P,N){var M;for((N=N||P.length)>P.length&&(N=P.length),M=N-1;0<=M&&128==(192&P[M]);)M--;return M<0||0===M?N:M+u[P[M]]>N?M:N}(E),A=E;T!==E.length&&(s.uint8array?(A=E.subarray(0,T),this.leftOver=E.subarray(T,E.length)):(A=E.slice(0,T),this.leftOver=E.slice(T,E.length))),this.push({data:n.utf8decode(A),meta:g.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=m,i.inherits(v,f),v.prototype.processChunk=function(g){this.push({data:n.utf8encode(g.data),meta:g.meta})},n.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,r,n){var i=e("./support"),s=e("./base64"),c=e("./nodejsUtils"),f=e("./external");function u(b){return b}function p(b,T){for(var A=0;A<b.length;++A)T[A]=255&b.charCodeAt(A);return T}e("setimmediate"),n.newBlob=function(b,T){n.checkSupport("blob");try{return new Blob([b],{type:T})}catch{try{var A=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return A.append(b),A.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(b,T,A){var P=[],N=0,M=b.length;if(M<=A)return String.fromCharCode.apply(null,b);for(;N<M;)P.push(String.fromCharCode.apply(null,"array"===T||"nodebuffer"===T?b.slice(N,Math.min(N+A,M)):b.subarray(N,Math.min(N+A,M)))),N+=A;return P.join("")},stringifyByChar:function(b){for(var T="",A=0;A<b.length;A++)T+=String.fromCharCode(b[A]);return T},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,c.allocBuffer(1)).length}catch{return!1}}()}};function v(b){var T=65536,A=n.getTypeOf(b),P=!0;if("uint8array"===A?P=m.applyCanBeUsed.uint8array:"nodebuffer"===A&&(P=m.applyCanBeUsed.nodebuffer),P)for(;1<T;)try{return m.stringifyByChunk(b,A,T)}catch{T=Math.floor(T/2)}return m.stringifyByChar(b)}function g(b,T){for(var A=0;A<b.length;A++)T[A]=b[A];return T}n.applyFromCharCode=v;var E={};E.string={string:u,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return E.string.uint8array(b).buffer},uint8array:function(b){return p(b,new Uint8Array(b.length))},nodebuffer:function(b){return p(b,c.allocBuffer(b.length))}},E.array={string:v,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(b)}},E.arraybuffer={string:function(b){return v(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(new Uint8Array(b))}},E.uint8array={string:v,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return c.newBufferFrom(b)}},E.nodebuffer={string:v,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return E.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:u},n.transformTo=function(b,T){if(T=T||"",!b)return T;n.checkSupport(b);var A=n.getTypeOf(T);return E[A][b](T)},n.resolve=function(b){for(var T=b.split("/"),A=[],P=0;P<T.length;P++){var N=T[P];"."===N||""===N&&0!==P&&P!==T.length-1||(".."===N?A.pop():A.push(N))}return A.join("/")},n.getTypeOf=function(b){return"string"==typeof b?"string":"[object Array]"===Object.prototype.toString.call(b)?"array":i.nodebuffer&&c.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var T,A,P="";for(A=0;A<(b||"").length;A++)P+="\\x"+((T=b.charCodeAt(A))<16?"0":"")+T.toString(16).toUpperCase();return P},n.delay=function(b,T,A){setImmediate(function(){b.apply(A||null,T||[])})},n.inherits=function(b,T){function A(){}A.prototype=T.prototype,b.prototype=new A},n.extend=function(){var b,T,A={};for(b=0;b<arguments.length;b++)for(T in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],T)&&void 0===A[T]&&(A[T]=arguments[b][T]);return A},n.prepareContent=function(b,T,A,P,N){return f.Promise.resolve(T).then(function(M){return i.blob&&(M instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(M)))&&typeof FileReader<"u"?new f.Promise(function(D,H){var q=new FileReader;q.onload=function(Q){D(Q.target.result)},q.onerror=function(Q){H(Q.target.error)},q.readAsArrayBuffer(M)}):M}).then(function(M){var H,D=n.getTypeOf(M);return D?("arraybuffer"===D?M=n.transformTo("uint8array",M):"string"===D&&(N?M=s.decode(M):A&&!0!==P&&(M=p(H=M,i.uint8array?new Uint8Array(H.length):new Array(H.length)))),M):f.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,r,n){var i=e("./reader/readerFor"),s=e("./utils"),c=e("./signature"),f=e("./zipEntry"),u=e("./support");function p(m){this.files=[],this.loadOptions=m}p.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(m)+")")}},isSignature:function(m,v){var g=this.reader.index;this.reader.setIndex(m);var E=this.reader.readString(4)===v;return this.reader.setIndex(g),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=s.transformTo(u.uint8array?"uint8array":"array",m);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,v,g,E=this.zip64EndOfCentralSize-44;0<E;)m=this.reader.readInt(2),v=this.reader.readInt(4),g=this.reader.readData(v),this.zip64ExtensibleData[m]={id:m,length:v,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,v;for(m=0;m<this.files.length;m++)this.reader.setIndex((v=this.files[m]).localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(m=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var v=m;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var E=v-g;if(0<E)this.isSignature(v,c.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,r,n){var i=e("./reader/readerFor"),s=e("./utils"),c=e("./compressedObject"),f=e("./crc32"),u=e("./utf8"),p=e("./compressions"),m=e("./support");function v(g,E){this.options=g,this.loadOptions=E}v.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(g){var E,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(E=function(T){for(var A in p)if(Object.prototype.hasOwnProperty.call(p,A)&&p[A].magic===T)return p[A];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,E,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var E=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(E),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==g&&(this.dosPermissions=63&this.externalFileAttributes),3==g&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var E,b,T,A=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<A;)E=g.readInt(2),b=g.readInt(2),T=g.readData(b),this.extraFields[E]={id:E,length:b,value:T};g.setIndex(A)},handleUTF8:function(){var g=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(null!==E)this.fileNameStr=E;else{var b=s.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var T=this.findExtraFieldUnicodeComment();if(null!==T)this.fileCommentStr=T;else{var A=s.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(A)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var E=i(g.value);return 1!==E.readInt(1)||f(this.fileName)!==E.readInt(4)?null:u.utf8decode(E.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var E=i(g.value);return 1!==E.readInt(1)||f(this.fileComment)!==E.readInt(4)?null:u.utf8decode(E.readData(g.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,r,n){function i(E,b,T){this.name=E,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=b,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var s=e("./stream/StreamHelper"),c=e("./stream/DataWorker"),f=e("./utf8"),u=e("./compressedObject"),p=e("./stream/GenericWorker");i.prototype={internalStream:function(E){var b=null,T="string";try{if(!E)throw new Error("No output type specified.");var A="string"===(T=E.toLowerCase())||"text"===T;"binarystring"!==T&&"text"!==T||(T="string"),b=this._decompressWorker();var P=!this._dataBinary;P&&!A&&(b=b.pipe(new f.Utf8EncodeWorker)),!P&&A&&(b=b.pipe(new f.Utf8DecodeWorker))}catch(N){(b=new p("error")).error(N)}return new s(b,T,"")},async:function(E,b){return this.internalStream(E).accumulate(b)},nodeStream:function(E,b){return this.internalStream(E||"nodebuffer").toNodejsStream(b)},_compressWorker:function(E,b){if(this._data instanceof u&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new f.Utf8EncodeWorker)),u.createWorkerFrom(T,E,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof p?this._data:new c(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<m.length;g++)i.prototype[m[g]]=v;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,r,n){(function(i){var s,c,f=i.MutationObserver||i.WebKitMutationObserver;if(f){var u=0,p=new f(E),m=i.document.createTextNode("");p.observe(m,{characterData:!0}),s=function(){m.data=u=++u%2}}else if(i.setImmediate||void 0===i.MessageChannel)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){E(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(E,0)};else{var v=new i.MessageChannel;v.port1.onmessage=E,s=function(){v.port2.postMessage(0)}}var g=[];function E(){var b,T;c=!0;for(var A=g.length;A;){for(T=g,g=[],b=-1;++b<A;)T[b]();A=g.length}c=!1}r.exports=function(b){1!==g.push(b)||c||s()}}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,r,n){var i=e("immediate");function s(){}var c={},f=["REJECTED"],u=["FULFILLED"],p=["PENDING"];function m(A){if("function"!=typeof A)throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,A!==s&&b(this,A)}function v(A,P,N){this.promise=A,"function"==typeof P&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),"function"==typeof N&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function g(A,P,N){i(function(){var M;try{M=P(N)}catch(D){return c.reject(A,D)}M===A?c.reject(A,new TypeError("Cannot resolve promise with itself")):c.resolve(A,M)})}function E(A){var P=A&&A.then;if(A&&("object"==typeof A||"function"==typeof A)&&"function"==typeof P)return function(){P.apply(A,arguments)}}function b(A,P){var N=!1;function M(q){N||(N=!0,c.reject(A,q))}function D(q){N||(N=!0,c.resolve(A,q))}var H=T(function(){P(D,M)});"error"===H.status&&M(H.value)}function T(A,P){var N={};try{N.value=A(P),N.status="success"}catch(M){N.status="error",N.value=M}return N}(r.exports=m).prototype.finally=function(A){if("function"!=typeof A)return this;var P=this.constructor;return this.then(function(N){return P.resolve(A()).then(function(){return N})},function(N){return P.resolve(A()).then(function(){throw N})})},m.prototype.catch=function(A){return this.then(null,A)},m.prototype.then=function(A,P){if("function"!=typeof A&&this.state===u||"function"!=typeof P&&this.state===f)return this;var N=new this.constructor(s);return this.state!==p?g(N,this.state===u?A:P,this.outcome):this.queue.push(new v(N,A,P)),N},v.prototype.callFulfilled=function(A){c.resolve(this.promise,A)},v.prototype.otherCallFulfilled=function(A){g(this.promise,this.onFulfilled,A)},v.prototype.callRejected=function(A){c.reject(this.promise,A)},v.prototype.otherCallRejected=function(A){g(this.promise,this.onRejected,A)},c.resolve=function(A,P){var N=T(E,P);if("error"===N.status)return c.reject(A,N.value);var M=N.value;if(M)b(A,M);else{A.state=u,A.outcome=P;for(var D=-1,H=A.queue.length;++D<H;)A.queue[D].callFulfilled(P)}return A},c.reject=function(A,P){A.state=f,A.outcome=P;for(var N=-1,M=A.queue.length;++N<M;)A.queue[N].callRejected(P);return A},m.resolve=function(A){return A instanceof this?A:c.resolve(new this(s),A)},m.reject=function(A){var P=new this(s);return c.reject(P,A)},m.all=function(A){var P=this;if("[object Array]"!==Object.prototype.toString.call(A))return this.reject(new TypeError("must be an array"));var N=A.length,M=!1;if(!N)return this.resolve([]);for(var D=new Array(N),H=0,q=-1,Q=new this(s);++q<N;)Y(A[q],q);return Q;function Y(te,de){P.resolve(te).then(function(j){D[de]=j,++H!==N||M||(M=!0,c.resolve(Q,D))},function(j){M||(M=!0,c.reject(Q,j))})}},m.race=function(A){if("[object Array]"!==Object.prototype.toString.call(A))return this.reject(new TypeError("must be an array"));var N=A.length,M=!1;if(!N)return this.resolve([]);for(var D=-1,H=new this(s);++D<N;)this.resolve(A[D]).then(function(Q){M||(M=!0,c.resolve(H,Q))},function(Q){M||(M=!0,c.reject(H,Q))});return H}},{immediate:36}],38:[function(e,r,n){var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,r,n){var i=e("./zlib/deflate"),s=e("./utils/common"),c=e("./utils/strings"),f=e("./zlib/messages"),u=e("./zlib/zstream"),p=Object.prototype.toString,m=0,v=-1,g=0,E=8;function b(A){if(!(this instanceof b))return new b(A);this.options=s.assign({level:v,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},A||{});var P=this.options;P.raw&&0<P.windowBits?P.windowBits=-P.windowBits:P.gzip&&0<P.windowBits&&P.windowBits<16&&(P.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var N=i.deflateInit2(this.strm,P.level,P.method,P.windowBits,P.memLevel,P.strategy);if(N!==m)throw new Error(f[N]);if(P.header&&i.deflateSetHeader(this.strm,P.header),P.dictionary){var M;if(M="string"==typeof P.dictionary?c.string2buf(P.dictionary):"[object ArrayBuffer]"===p.call(P.dictionary)?new Uint8Array(P.dictionary):P.dictionary,(N=i.deflateSetDictionary(this.strm,M))!==m)throw new Error(f[N]);this._dict_set=!0}}function T(A,P){var N=new b(P);if(N.push(A,!0),N.err)throw N.msg||f[N.err];return N.result}b.prototype.push=function(A,P){var N,M,D=this.strm,H=this.options.chunkSize;if(this.ended)return!1;M=P===~~P?P:!0===P?4:0,D.input="string"==typeof A?c.string2buf(A):"[object ArrayBuffer]"===p.call(A)?new Uint8Array(A):A,D.next_in=0,D.avail_in=D.input.length;do{if(0===D.avail_out&&(D.output=new s.Buf8(H),D.next_out=0,D.avail_out=H),1!==(N=i.deflate(D,M))&&N!==m)return this.onEnd(N),!(this.ended=!0);0!==D.avail_out&&(0!==D.avail_in||4!==M&&2!==M)||this.onData("string"===this.options.to?c.buf2binstring(s.shrinkBuf(D.output,D.next_out)):s.shrinkBuf(D.output,D.next_out))}while((0<D.avail_in||0===D.avail_out)&&1!==N);return 4===M?(N=i.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===m):2!==M||(this.onEnd(m),!(D.avail_out=0))},b.prototype.onData=function(A){this.chunks.push(A)},b.prototype.onEnd=function(A){A===m&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},n.Deflate=b,n.deflate=T,n.deflateRaw=function(A,P){return(P=P||{}).raw=!0,T(A,P)},n.gzip=function(A,P){return(P=P||{}).gzip=!0,T(A,P)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,r,n){var i=e("./zlib/inflate"),s=e("./utils/common"),c=e("./utils/strings"),f=e("./zlib/constants"),u=e("./zlib/messages"),p=e("./zlib/zstream"),m=e("./zlib/gzheader"),v=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},b||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,0===T.windowBits&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||b&&b.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var A=i.inflateInit2(this.strm,T.windowBits);if(A!==f.Z_OK)throw new Error(u[A]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function E(b,T){var A=new g(T);if(A.push(b,!0),A.err)throw A.msg||u[A.err];return A.result}g.prototype.push=function(b,T){var A,P,N,M,D,H,q=this.strm,Q=this.options.chunkSize,Y=this.options.dictionary,te=!1;if(this.ended)return!1;P=T===~~T?T:!0===T?f.Z_FINISH:f.Z_NO_FLUSH,q.input="string"==typeof b?c.binstring2buf(b):"[object ArrayBuffer]"===v.call(b)?new Uint8Array(b):b,q.next_in=0,q.avail_in=q.input.length;do{if(0===q.avail_out&&(q.output=new s.Buf8(Q),q.next_out=0,q.avail_out=Q),(A=i.inflate(q,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&Y&&(H="string"==typeof Y?c.string2buf(Y):"[object ArrayBuffer]"===v.call(Y)?new Uint8Array(Y):Y,A=i.inflateSetDictionary(this.strm,H)),A===f.Z_BUF_ERROR&&!0===te&&(A=f.Z_OK,te=!1),A!==f.Z_STREAM_END&&A!==f.Z_OK)return this.onEnd(A),!(this.ended=!0);q.next_out&&(0!==q.avail_out&&A!==f.Z_STREAM_END&&(0!==q.avail_in||P!==f.Z_FINISH&&P!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(N=c.utf8border(q.output,q.next_out),M=q.next_out-N,D=c.buf2string(q.output,N),q.next_out=M,q.avail_out=Q-M,M&&s.arraySet(q.output,q.output,N,M,0),this.onData(D)):this.onData(s.shrinkBuf(q.output,q.next_out)))),0===q.avail_in&&0===q.avail_out&&(te=!0)}while((0<q.avail_in||0===q.avail_out)&&A!==f.Z_STREAM_END);return A===f.Z_STREAM_END&&(P=f.Z_FINISH),P===f.Z_FINISH?(A=i.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===f.Z_OK):P!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(q.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===f.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=g,n.inflate=E,n.inflateRaw=function(b,T){return(T=T||{}).raw=!0,E(b,T)},n.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var p=u.shift();if(p){if("object"!=typeof p)throw new TypeError(p+"must be non-object");for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])}}return f},n.shrinkBuf=function(f,u){return f.length===u?f:f.subarray?f.subarray(0,u):(f.length=u,f)};var s={arraySet:function(f,u,p,m,v){if(u.subarray&&f.subarray)f.set(u.subarray(p,p+m),v);else for(var g=0;g<m;g++)f[v+g]=u[p+g]},flattenChunks:function(f){var u,p,m,v,g,E;for(u=m=0,p=f.length;u<p;u++)m+=f[u].length;for(E=new Uint8Array(m),u=v=0,p=f.length;u<p;u++)E.set(g=f[u],v),v+=g.length;return E}},c={arraySet:function(f,u,p,m,v){for(var g=0;g<m;g++)f[v+g]=u[p+g]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,s)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,c))},n.setTyped(i)},{}],42:[function(e,r,n){var i=e("./common"),s=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var f=new i.Buf8(256),u=0;u<256;u++)f[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function p(m,v){if(v<65537&&(m.subarray&&c||!m.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(m,v));for(var g="",E=0;E<v;E++)g+=String.fromCharCode(m[E]);return g}f[254]=f[254]=1,n.string2buf=function(m){var v,g,E,b,T,A=m.length,P=0;for(b=0;b<A;b++)55296==(64512&(g=m.charCodeAt(b)))&&b+1<A&&56320==(64512&(E=m.charCodeAt(b+1)))&&(g=65536+(g-55296<<10)+(E-56320),b++),P+=g<128?1:g<2048?2:g<65536?3:4;for(v=new i.Buf8(P),b=T=0;T<P;b++)55296==(64512&(g=m.charCodeAt(b)))&&b+1<A&&56320==(64512&(E=m.charCodeAt(b+1)))&&(g=65536+(g-55296<<10)+(E-56320),b++),g<128?v[T++]=g:(g<2048?v[T++]=192|g>>>6:(g<65536?v[T++]=224|g>>>12:(v[T++]=240|g>>>18,v[T++]=128|g>>>12&63),v[T++]=128|g>>>6&63),v[T++]=128|63&g);return v},n.buf2binstring=function(m){return p(m,m.length)},n.binstring2buf=function(m){for(var v=new i.Buf8(m.length),g=0,E=v.length;g<E;g++)v[g]=m.charCodeAt(g);return v},n.buf2string=function(m,v){var g,E,b,T,A=v||m.length,P=new Array(2*A);for(g=E=0;g<A;)if((b=m[g++])<128)P[E++]=b;else if(4<(T=f[b]))P[E++]=65533,g+=T-1;else{for(b&=2===T?31:3===T?15:7;1<T&&g<A;)b=b<<6|63&m[g++],T--;1<T?P[E++]=65533:b<65536?P[E++]=b:(P[E++]=55296|(b-=65536)>>10&1023,P[E++]=56320|1023&b)}return p(P,E)},n.utf8border=function(m,v){var g;for((v=v||m.length)>m.length&&(v=m.length),g=v-1;0<=g&&128==(192&m[g]);)g--;return g<0||0===g?v:g+f[m[g]]>v?g:v}},{"./common":41}],43:[function(e,r,n){r.exports=function(i,s,c,f){for(var u=65535&i,p=i>>>16&65535,m=0;0!==c;){for(c-=m=2e3<c?2e3:c;p=p+(u=u+s[f++]|0)|0,--m;);u%=65521,p%=65521}return u|p<<16}},{}],44:[function(e,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,r,n){var i=function(){for(var s,c=[],f=0;f<256;f++){s=f;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;c[f]=s}return c}();r.exports=function(s,c,f,u){var p=i,m=u+f;s^=-1;for(var v=u;v<m;v++)s=s>>>8^p[255&(s^c[v])];return~s}},{}],46:[function(e,r,n){var i,s=e("../utils/common"),c=e("./trees"),f=e("./adler32"),u=e("./crc32"),p=e("./messages"),m=0,g=0,E=-2,A=2,P=8,M=286,D=30,H=19,q=2*M+1,Q=15,Y=3,te=258,de=te+Y+1,j=42,L=113;function Ie(d,Z){return d.msg=p[Z],Z}function fe(d){return(d<<1)-(4<d?9:0)}function Pe(d){for(var Z=d.length;0<=--Z;)d[Z]=0}function G(d){var Z=d.state,K=Z.pending;K>d.avail_out&&(K=d.avail_out),0!==K&&(s.arraySet(d.output,Z.pending_buf,Z.pending_out,K,d.next_out),d.next_out+=K,Z.pending_out+=K,d.total_out+=K,d.avail_out-=K,Z.pending-=K,0===Z.pending&&(Z.pending_out=0))}function W(d,Z){c._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,Z),d.block_start=d.strstart,G(d.strm)}function Ee(d,Z){d.pending_buf[d.pending++]=Z}function ve(d,Z){d.pending_buf[d.pending++]=Z>>>8&255,d.pending_buf[d.pending++]=255&Z}function ge(d,Z){var K,S,x=d.max_chain_length,C=d.strstart,ne=d.prev_length,se=d.nice_match,z=d.strstart>d.w_size-de?d.strstart-(d.w_size-de):0,he=d.window,be=d.w_mask,me=d.prev,Ae=d.strstart+te,Le=he[C+ne-1],Re=he[C+ne];d.prev_length>=d.good_match&&(x>>=2),se>d.lookahead&&(se=d.lookahead);do{if(he[(K=Z)+ne]===Re&&he[K+ne-1]===Le&&he[K]===he[C]&&he[++K]===he[C+1]){C+=2,K++;do{}while(he[++C]===he[++K]&&he[++C]===he[++K]&&he[++C]===he[++K]&&he[++C]===he[++K]&&he[++C]===he[++K]&&he[++C]===he[++K]&&he[++C]===he[++K]&&he[++C]===he[++K]&&C<Ae);if(S=te-(Ae-C),C=Ae-te,ne<S){if(d.match_start=Z,se<=(ne=S))break;Le=he[C+ne-1],Re=he[C+ne]}}}while((Z=me[Z&be])>z&&0!=--x);return ne<=d.lookahead?ne:d.lookahead}function Ue(d){var Z,K,S,x,C,ne,se,z,he,be,me=d.w_size;do{if(x=d.window_size-d.lookahead-d.strstart,d.strstart>=me+(me-de)){for(s.arraySet(d.window,d.window,me,me,0),d.match_start-=me,d.strstart-=me,d.block_start-=me,Z=K=d.hash_size;S=d.head[--Z],d.head[Z]=me<=S?S-me:0,--K;);for(Z=K=me;S=d.prev[--Z],d.prev[Z]=me<=S?S-me:0,--K;);x+=me}if(0===d.strm.avail_in)break;if(se=d.window,z=d.strstart+d.lookahead,be=void 0,(he=x)<(be=(ne=d.strm).avail_in)&&(be=he),K=0===be?0:(ne.avail_in-=be,s.arraySet(se,ne.input,ne.next_in,be,z),1===ne.state.wrap?ne.adler=f(ne.adler,se,be,z):2===ne.state.wrap&&(ne.adler=u(ne.adler,se,be,z)),ne.next_in+=be,ne.total_in+=be,be),d.lookahead+=K,d.lookahead+d.insert>=Y)for(d.ins_h=d.window[C=d.strstart-d.insert],d.ins_h=(d.ins_h<<d.hash_shift^d.window[C+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[C+Y-1])&d.hash_mask,d.prev[C&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=C,C++,d.insert--,!(d.lookahead+d.insert<Y)););}while(d.lookahead<de&&0!==d.strm.avail_in)}function Ke(d,Z){for(var K,S;;){if(d.lookahead<de){if(Ue(d),d.lookahead<de&&Z===m)return 1;if(0===d.lookahead)break}if(K=0,d.lookahead>=Y&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+Y-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),0!==K&&d.strstart-K<=d.w_size-de&&(d.match_length=ge(d,K)),d.match_length>=Y)if(S=c._tr_tally(d,d.strstart-d.match_start,d.match_length-Y),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=Y){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+Y-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,0!=--d.match_length;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else S=c._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(S&&(W(d,!1),0===d.strm.avail_out))return 1}return d.insert=d.strstart<Y-1?d.strstart:Y-1,4===Z?(W(d,!0),0===d.strm.avail_out?3:4):d.last_lit&&(W(d,!1),0===d.strm.avail_out)?1:2}function Ce(d,Z){for(var K,S,x;;){if(d.lookahead<de){if(Ue(d),d.lookahead<de&&Z===m)return 1;if(0===d.lookahead)break}if(K=0,d.lookahead>=Y&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+Y-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=Y-1,0!==K&&d.prev_length<d.max_lazy_match&&d.strstart-K<=d.w_size-de&&(d.match_length=ge(d,K),d.match_length<=5&&(1===d.strategy||d.match_length===Y&&4096<d.strstart-d.match_start)&&(d.match_length=Y-1)),d.prev_length>=Y&&d.match_length<=d.prev_length){for(x=d.strstart+d.lookahead-Y,S=c._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-Y),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=x&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+Y-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),0!=--d.prev_length;);if(d.match_available=0,d.match_length=Y-1,d.strstart++,S&&(W(d,!1),0===d.strm.avail_out))return 1}else if(d.match_available){if((S=c._tr_tally(d,0,d.window[d.strstart-1]))&&W(d,!1),d.strstart++,d.lookahead--,0===d.strm.avail_out)return 1}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(S=c._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<Y-1?d.strstart:Y-1,4===Z?(W(d,!0),0===d.strm.avail_out?3:4):d.last_lit&&(W(d,!1),0===d.strm.avail_out)?1:2}function $e(d,Z,K,S,x){this.good_length=d,this.max_lazy=Z,this.nice_length=K,this.max_chain=S,this.func=x}function Je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*q),this.dyn_dtree=new s.Buf16(2*(2*D+1)),this.bl_tree=new s.Buf16(2*(2*H+1)),Pe(this.dyn_ltree),Pe(this.dyn_dtree),Pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Q+1),this.heap=new s.Buf16(2*M+1),Pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*M+1),Pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ve(d){var Z;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=A,(Z=d.state).pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap?j:L,d.adler=2===Z.wrap?0:1,Z.last_flush=m,c._tr_init(Z),g):Ie(d,E)}function ht(d){var K,Z=Ve(d);return Z===g&&((K=d.state).window_size=2*K.w_size,Pe(K.head),K.max_lazy_match=i[K.level].max_lazy,K.good_match=i[K.level].good_length,K.nice_match=i[K.level].nice_length,K.max_chain_length=i[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=Y-1,K.match_available=0,K.ins_h=0),Z}function we(d,Z,K,S,x,C){if(!d)return E;var ne=1;if(-1===Z&&(Z=6),S<0?(ne=0,S=-S):15<S&&(ne=2,S-=16),x<1||9<x||K!==P||S<8||15<S||Z<0||9<Z||C<0||4<C)return Ie(d,E);8===S&&(S=9);var se=new Je;return(d.state=se).strm=d,se.wrap=ne,se.gzhead=null,se.w_bits=S,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=x+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+Y-1)/Y),se.window=new s.Buf8(2*se.w_size),se.head=new s.Buf16(se.hash_size),se.prev=new s.Buf16(se.w_size),se.lit_bufsize=1<<x+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new s.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=Z,se.strategy=C,se.method=K,ht(d)}i=[new $e(0,0,0,0,function(d,Z){var K=65535;for(K>d.pending_buf_size-5&&(K=d.pending_buf_size-5);;){if(d.lookahead<=1){if(Ue(d),0===d.lookahead&&Z===m)return 1;if(0===d.lookahead)break}d.strstart+=d.lookahead,d.lookahead=0;var S=d.block_start+K;if((0===d.strstart||d.strstart>=S)&&(d.lookahead=d.strstart-S,d.strstart=S,W(d,!1),0===d.strm.avail_out)||d.strstart-d.block_start>=d.w_size-de&&(W(d,!1),0===d.strm.avail_out))return 1}return d.insert=0,4===Z?(W(d,!0),0===d.strm.avail_out?3:4):(d.strstart>d.block_start&&W(d,!1),1)}),new $e(4,4,8,4,Ke),new $e(4,5,16,8,Ke),new $e(4,6,32,32,Ke),new $e(4,4,16,16,Ce),new $e(8,16,32,32,Ce),new $e(8,16,128,128,Ce),new $e(8,32,128,256,Ce),new $e(32,128,258,1024,Ce),new $e(32,258,258,4096,Ce)],n.deflateInit=function(d,Z){return we(d,Z,P,15,8,0)},n.deflateInit2=we,n.deflateReset=ht,n.deflateResetKeep=Ve,n.deflateSetHeader=function(d,Z){return d&&d.state?2!==d.state.wrap?E:(d.state.gzhead=Z,g):E},n.deflate=function(d,Z){var K,S,x,C;if(!d||!d.state||5<Z||Z<0)return d?Ie(d,E):E;if(S=d.state,!d.output||!d.input&&0!==d.avail_in||666===S.status&&4!==Z)return Ie(d,0===d.avail_out?-5:E);if(S.strm=d,K=S.last_flush,S.last_flush=Z,S.status===j)if(2===S.wrap)d.adler=0,Ee(S,31),Ee(S,139),Ee(S,8),S.gzhead?(Ee(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),Ee(S,255&S.gzhead.time),Ee(S,S.gzhead.time>>8&255),Ee(S,S.gzhead.time>>16&255),Ee(S,S.gzhead.time>>24&255),Ee(S,9===S.level?2:2<=S.strategy||S.level<2?4:0),Ee(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(Ee(S,255&S.gzhead.extra.length),Ee(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(d.adler=u(d.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(Ee(S,0),Ee(S,0),Ee(S,0),Ee(S,0),Ee(S,0),Ee(S,9===S.level?2:2<=S.strategy||S.level<2?4:0),Ee(S,3),S.status=L);else{var ne=P+(S.w_bits-8<<4)<<8;ne|=(2<=S.strategy||S.level<2?0:S.level<6?1:6===S.level?2:3)<<6,0!==S.strstart&&(ne|=32),ne+=31-ne%31,S.status=L,ve(S,ne),0!==S.strstart&&(ve(S,d.adler>>>16),ve(S,65535&d.adler)),d.adler=1}if(69===S.status)if(S.gzhead.extra){for(x=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>x&&(d.adler=u(d.adler,S.pending_buf,S.pending-x,x)),G(d),x=S.pending,S.pending!==S.pending_buf_size));)Ee(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>x&&(d.adler=u(d.adler,S.pending_buf,S.pending-x,x)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(73===S.status)if(S.gzhead.name){x=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>x&&(d.adler=u(d.adler,S.pending_buf,S.pending-x,x)),G(d),x=S.pending,S.pending===S.pending_buf_size)){C=1;break}C=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,Ee(S,C)}while(0!==C);S.gzhead.hcrc&&S.pending>x&&(d.adler=u(d.adler,S.pending_buf,S.pending-x,x)),0===C&&(S.gzindex=0,S.status=91)}else S.status=91;if(91===S.status)if(S.gzhead.comment){x=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>x&&(d.adler=u(d.adler,S.pending_buf,S.pending-x,x)),G(d),x=S.pending,S.pending===S.pending_buf_size)){C=1;break}C=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,Ee(S,C)}while(0!==C);S.gzhead.hcrc&&S.pending>x&&(d.adler=u(d.adler,S.pending_buf,S.pending-x,x)),0===C&&(S.status=103)}else S.status=103;if(103===S.status&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&G(d),S.pending+2<=S.pending_buf_size&&(Ee(S,255&d.adler),Ee(S,d.adler>>8&255),d.adler=0,S.status=L)):S.status=L),0!==S.pending){if(G(d),0===d.avail_out)return S.last_flush=-1,g}else if(0===d.avail_in&&fe(Z)<=fe(K)&&4!==Z)return Ie(d,-5);if(666===S.status&&0!==d.avail_in)return Ie(d,-5);if(0!==d.avail_in||0!==S.lookahead||Z!==m&&666!==S.status){var se=2===S.strategy?function(z,he){for(var be;;){if(0===z.lookahead&&(Ue(z),0===z.lookahead)){if(he===m)return 1;break}if(z.match_length=0,be=c._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,be&&(W(z,!1),0===z.strm.avail_out))return 1}return z.insert=0,4===he?(W(z,!0),0===z.strm.avail_out?3:4):z.last_lit&&(W(z,!1),0===z.strm.avail_out)?1:2}(S,Z):3===S.strategy?function(z,he){for(var be,me,Ae,Le,Re=z.window;;){if(z.lookahead<=te){if(Ue(z),z.lookahead<=te&&he===m)return 1;if(0===z.lookahead)break}if(z.match_length=0,z.lookahead>=Y&&0<z.strstart&&(me=Re[Ae=z.strstart-1])===Re[++Ae]&&me===Re[++Ae]&&me===Re[++Ae]){Le=z.strstart+te;do{}while(me===Re[++Ae]&&me===Re[++Ae]&&me===Re[++Ae]&&me===Re[++Ae]&&me===Re[++Ae]&&me===Re[++Ae]&&me===Re[++Ae]&&me===Re[++Ae]&&Ae<Le);z.match_length=te-(Le-Ae),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=Y?(be=c._tr_tally(z,1,z.match_length-Y),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(be=c._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),be&&(W(z,!1),0===z.strm.avail_out))return 1}return z.insert=0,4===he?(W(z,!0),0===z.strm.avail_out?3:4):z.last_lit&&(W(z,!1),0===z.strm.avail_out)?1:2}(S,Z):i[S.level].func(S,Z);if(3!==se&&4!==se||(S.status=666),1===se||3===se)return 0===d.avail_out&&(S.last_flush=-1),g;if(2===se&&(1===Z?c._tr_align(S):5!==Z&&(c._tr_stored_block(S,0,0,!1),3===Z&&(Pe(S.head),0===S.lookahead&&(S.strstart=0,S.block_start=0,S.insert=0))),G(d),0===d.avail_out))return S.last_flush=-1,g}return 4!==Z?g:S.wrap<=0?1:(2===S.wrap?(Ee(S,255&d.adler),Ee(S,d.adler>>8&255),Ee(S,d.adler>>16&255),Ee(S,d.adler>>24&255),Ee(S,255&d.total_in),Ee(S,d.total_in>>8&255),Ee(S,d.total_in>>16&255),Ee(S,d.total_in>>24&255)):(ve(S,d.adler>>>16),ve(S,65535&d.adler)),G(d),0<S.wrap&&(S.wrap=-S.wrap),0!==S.pending?g:1)},n.deflateEnd=function(d){var Z;return d&&d.state?(Z=d.state.status)!==j&&69!==Z&&73!==Z&&91!==Z&&103!==Z&&Z!==L&&666!==Z?Ie(d,E):(d.state=null,Z===L?Ie(d,-3):g):E},n.deflateSetDictionary=function(d,Z){var K,S,x,C,ne,se,z,he,be=Z.length;if(!d||!d.state||2===(C=(K=d.state).wrap)||1===C&&K.status!==j||K.lookahead)return E;for(1===C&&(d.adler=f(d.adler,Z,be,0)),K.wrap=0,be>=K.w_size&&(0===C&&(Pe(K.head),K.strstart=0,K.block_start=0,K.insert=0),he=new s.Buf8(K.w_size),s.arraySet(he,Z,be-K.w_size,K.w_size,0),Z=he,be=K.w_size),ne=d.avail_in,se=d.next_in,z=d.input,d.avail_in=be,d.next_in=0,d.input=Z,Ue(K);K.lookahead>=Y;){for(S=K.strstart,x=K.lookahead-(Y-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[S+Y-1])&K.hash_mask,K.prev[S&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=S,S++,--x;);K.strstart=S,K.lookahead=Y-1,Ue(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=Y-1,K.match_available=0,d.next_in=se,d.input=z,d.avail_in=ne,K.wrap=C,g},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,r,n){r.exports=function(i,s){var c,f,u,p,m,v,g,E,b,T,A,P,N,M,D,H,q,Q,Y,te,de,j,L,y,J;y=i.input,u=(f=i.next_in)+(i.avail_in-5),J=i.output,m=(p=i.next_out)-(s-i.avail_out),v=p+(i.avail_out-257),g=(c=i.state).dmax,E=c.wsize,b=c.whave,T=c.wnext,A=c.window,P=c.hold,N=c.bits,M=c.lencode,D=c.distcode,H=(1<<c.lenbits)-1,q=(1<<c.distbits)-1;e:do{N<15&&(P+=y[f++]<<N,P+=y[f++]<<(N+=8),N+=8),Q=M[P&H];t:for(;;){if(P>>>=Y=Q>>>24,N-=Y,0==(Y=Q>>>16&255))J[p++]=65535&Q;else{if(!(16&Y)){if(!(64&Y)){Q=M[(65535&Q)+(P&(1<<Y)-1)];continue t}if(32&Y){c.mode=12;break e}i.msg="invalid literal/length code",c.mode=30;break e}te=65535&Q,(Y&=15)&&(N<Y&&(P+=y[f++]<<N,N+=8),te+=P&(1<<Y)-1,P>>>=Y,N-=Y),N<15&&(P+=y[f++]<<N,P+=y[f++]<<(N+=8),N+=8),Q=D[P&q];r:for(;;){if(P>>>=Y=Q>>>24,N-=Y,!(16&(Y=Q>>>16&255))){if(!(64&Y)){Q=D[(65535&Q)+(P&(1<<Y)-1)];continue r}i.msg="invalid distance code",c.mode=30;break e}if(de=65535&Q,N<(Y&=15)&&(P+=y[f++]<<N,(N+=8)<Y&&(P+=y[f++]<<N,N+=8)),g<(de+=P&(1<<Y)-1)){i.msg="invalid distance too far back",c.mode=30;break e}if(P>>>=Y,N-=Y,(Y=p-m)<de){if(b<(Y=de-Y)&&c.sane){i.msg="invalid distance too far back",c.mode=30;break e}if(L=A,(j=0)===T){if(j+=E-Y,Y<te){for(te-=Y;J[p++]=A[j++],--Y;);j=p-de,L=J}}else if(T<Y){if(j+=E+T-Y,(Y-=T)<te){for(te-=Y;J[p++]=A[j++],--Y;);if(j=0,T<te){for(te-=Y=T;J[p++]=A[j++],--Y;);j=p-de,L=J}}}else if(j+=T-Y,Y<te){for(te-=Y;J[p++]=A[j++],--Y;);j=p-de,L=J}for(;2<te;)J[p++]=L[j++],J[p++]=L[j++],J[p++]=L[j++],te-=3;te&&(J[p++]=L[j++],1<te&&(J[p++]=L[j++]))}else{for(j=p-de;J[p++]=J[j++],J[p++]=J[j++],J[p++]=J[j++],2<(te-=3););te&&(J[p++]=J[j++],1<te&&(J[p++]=J[j++]))}break}}break}}while(f<u&&p<v);f-=te=N>>3,P&=(1<<(N-=te<<3))-1,i.next_in=f,i.next_out=p,i.avail_in=f<u?u-f+5:5-(f-u),i.avail_out=p<v?v-p+257:257-(p-v),c.hold=P,c.bits=N}},{}],49:[function(e,r,n){var i=e("../utils/common"),s=e("./adler32"),c=e("./crc32"),f=e("./inffast"),u=e("./inftrees"),v=0,g=-2,E=1,b=852,T=592;function A(j){return(j>>>24&255)+(j>>>8&65280)+((65280&j)<<8)+((255&j)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(j){var L;return j&&j.state?(j.total_in=j.total_out=(L=j.state).total=0,j.msg="",L.wrap&&(j.adler=1&L.wrap),L.mode=E,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new i.Buf32(b),L.distcode=L.distdyn=new i.Buf32(T),L.sane=1,L.back=-1,v):g}function M(j){var L;return j&&j.state?((L=j.state).wsize=0,L.whave=0,L.wnext=0,N(j)):g}function D(j,L){var y,J;return j&&j.state?(J=j.state,L<0?(y=0,L=-L):(y=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?g:(null!==J.window&&J.wbits!==L&&(J.window=null),J.wrap=y,J.wbits=L,M(j))):g}function H(j,L){var y,J;return j?(J=new P,(j.state=J).window=null,(y=D(j,L))!==v&&(j.state=null),y):g}var q,Q,Y=!0;function te(j){if(Y){var L;for(q=new i.Buf32(512),Q=new i.Buf32(32),L=0;L<144;)j.lens[L++]=8;for(;L<256;)j.lens[L++]=9;for(;L<280;)j.lens[L++]=7;for(;L<288;)j.lens[L++]=8;for(u(1,j.lens,0,288,q,0,j.work,{bits:9}),L=0;L<32;)j.lens[L++]=5;u(2,j.lens,0,32,Q,0,j.work,{bits:5}),Y=!1}j.lencode=q,j.lenbits=9,j.distcode=Q,j.distbits=5}function de(j,L,y,J){var xe,ae=j.state;return null===ae.window&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new i.Buf8(ae.wsize)),J>=ae.wsize?(i.arraySet(ae.window,L,y-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(J<(xe=ae.wsize-ae.wnext)&&(xe=J),i.arraySet(ae.window,L,y-J,xe,ae.wnext),(J-=xe)?(i.arraySet(ae.window,L,y-J,J,0),ae.wnext=J,ae.whave=ae.wsize):(ae.wnext+=xe,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=xe))),0}n.inflateReset=M,n.inflateReset2=D,n.inflateResetKeep=N,n.inflateInit=function(j){return H(j,15)},n.inflateInit2=H,n.inflate=function(j,L){var y,J,xe,ae,Ie,fe,Pe,G,W,Ee,ve,ge,Ue,Ke,Ce,$e,Je,Ve,ht,we,d,Z,K,S,x=0,C=new i.Buf8(4),ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&0!==j.avail_in)return g;12===(y=j.state).mode&&(y.mode=13),Ie=j.next_out,xe=j.output,ae=j.next_in,J=j.input,G=y.hold,W=y.bits,Ee=fe=j.avail_in,ve=Pe=j.avail_out,Z=v;e:for(;;)switch(y.mode){case E:if(0===y.wrap){y.mode=13;break}for(;W<16;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if(2&y.wrap&&35615===G){C[y.check=0]=255&G,C[1]=G>>>8&255,y.check=c(y.check,C,2,0),W=G=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&G)<<8)+(G>>8))%31){j.msg="incorrect header check",y.mode=30;break}if(8!=(15&G)){j.msg="unknown compression method",y.mode=30;break}if(W-=4,d=8+(15&(G>>>=4)),0===y.wbits)y.wbits=d;else if(d>y.wbits){j.msg="invalid window size",y.mode=30;break}y.dmax=1<<d,j.adler=y.check=1,y.mode=512&G?10:12,W=G=0;break;case 2:for(;W<16;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if(y.flags=G,8!=(255&y.flags)){j.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){j.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=G>>8&1),512&y.flags&&(C[0]=255&G,C[1]=G>>>8&255,y.check=c(y.check,C,2,0)),W=G=0,y.mode=3;case 3:for(;W<32;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}y.head&&(y.head.time=G),512&y.flags&&(C[0]=255&G,C[1]=G>>>8&255,C[2]=G>>>16&255,C[3]=G>>>24&255,y.check=c(y.check,C,4,0)),W=G=0,y.mode=4;case 4:for(;W<16;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}y.head&&(y.head.xflags=255&G,y.head.os=G>>8),512&y.flags&&(C[0]=255&G,C[1]=G>>>8&255,y.check=c(y.check,C,2,0)),W=G=0,y.mode=5;case 5:if(1024&y.flags){for(;W<16;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}y.length=G,y.head&&(y.head.extra_len=G),512&y.flags&&(C[0]=255&G,C[1]=G>>>8&255,y.check=c(y.check,C,2,0)),W=G=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&(fe<(ge=y.length)&&(ge=fe),ge&&(y.head&&(d=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),i.arraySet(y.head.extra,J,ae,ge,d)),512&y.flags&&(y.check=c(y.check,J,ge,ae)),fe-=ge,ae+=ge,y.length-=ge),y.length))break e;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(0===fe)break e;for(ge=0;d=J[ae+ge++],y.head&&d&&y.length<65536&&(y.head.name+=String.fromCharCode(d)),d&&ge<fe;);if(512&y.flags&&(y.check=c(y.check,J,ge,ae)),fe-=ge,ae+=ge,d)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(0===fe)break e;for(ge=0;d=J[ae+ge++],y.head&&d&&y.length<65536&&(y.head.comment+=String.fromCharCode(d)),d&&ge<fe;);if(512&y.flags&&(y.check=c(y.check,J,ge,ae)),fe-=ge,ae+=ge,d)break e}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;W<16;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if(G!==(65535&y.check)){j.msg="header crc mismatch",y.mode=30;break}W=G=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),j.adler=y.check=0,y.mode=12;break;case 10:for(;W<32;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}j.adler=y.check=A(G),W=G=0,y.mode=11;case 11:if(0===y.havedict)return j.next_out=Ie,j.avail_out=Pe,j.next_in=ae,j.avail_in=fe,y.hold=G,y.bits=W,2;j.adler=y.check=1,y.mode=12;case 12:if(5===L||6===L)break e;case 13:if(y.last){G>>>=7&W,W-=7&W,y.mode=27;break}for(;W<3;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}switch(y.last=1&G,W-=1,3&(G>>>=1)){case 0:y.mode=14;break;case 1:if(te(y),y.mode=20,6!==L)break;G>>>=2,W-=2;break e;case 2:y.mode=17;break;case 3:j.msg="invalid block type",y.mode=30}G>>>=2,W-=2;break;case 14:for(G>>>=7&W,W-=7&W;W<32;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if((65535&G)!=(G>>>16^65535)){j.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&G,W=G=0,y.mode=15,6===L)break e;case 15:y.mode=16;case 16:if(ge=y.length){if(fe<ge&&(ge=fe),Pe<ge&&(ge=Pe),0===ge)break e;i.arraySet(xe,J,ae,ge,Ie),fe-=ge,ae+=ge,Pe-=ge,Ie+=ge,y.length-=ge;break}y.mode=12;break;case 17:for(;W<14;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if(y.nlen=257+(31&G),W-=5,y.ndist=1+(31&(G>>>=5)),W-=5,y.ncode=4+(15&(G>>>=5)),G>>>=4,W-=4,286<y.nlen||30<y.ndist){j.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;W<3;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}y.lens[ne[y.have++]]=7&G,G>>>=3,W-=3}for(;y.have<19;)y.lens[ne[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,Z=u(0,y.lens,0,19,y.lencode,0,y.work,K={bits:y.lenbits}),y.lenbits=K.bits,Z){j.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;$e=(x=y.lencode[G&(1<<y.lenbits)-1])>>>16&255,Je=65535&x,!((Ce=x>>>24)<=W);){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if(Je<16)G>>>=Ce,W-=Ce,y.lens[y.have++]=Je;else{if(16===Je){for(S=Ce+2;W<S;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if(G>>>=Ce,W-=Ce,0===y.have){j.msg="invalid bit length repeat",y.mode=30;break}d=y.lens[y.have-1],ge=3+(3&G),G>>>=2,W-=2}else if(17===Je){for(S=Ce+3;W<S;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}W-=Ce,d=0,ge=3+(7&(G>>>=Ce)),G>>>=3,W-=3}else{for(S=Ce+7;W<S;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}W-=Ce,d=0,ge=11+(127&(G>>>=Ce)),G>>>=7,W-=7}if(y.have+ge>y.nlen+y.ndist){j.msg="invalid bit length repeat",y.mode=30;break}for(;ge--;)y.lens[y.have++]=d}}if(30===y.mode)break;if(0===y.lens[256]){j.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,Z=u(1,y.lens,0,y.nlen,y.lencode,0,y.work,K={bits:y.lenbits}),y.lenbits=K.bits,Z){j.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,Z=u(2,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,K={bits:y.distbits}),y.distbits=K.bits,Z){j.msg="invalid distances set",y.mode=30;break}if(y.mode=20,6===L)break e;case 20:y.mode=21;case 21:if(6<=fe&&258<=Pe){j.next_out=Ie,j.avail_out=Pe,j.next_in=ae,j.avail_in=fe,y.hold=G,y.bits=W,f(j,ve),Ie=j.next_out,xe=j.output,Pe=j.avail_out,ae=j.next_in,J=j.input,fe=j.avail_in,G=y.hold,W=y.bits,12===y.mode&&(y.back=-1);break}for(y.back=0;$e=(x=y.lencode[G&(1<<y.lenbits)-1])>>>16&255,Je=65535&x,!((Ce=x>>>24)<=W);){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if($e&&!(240&$e)){for(Ve=Ce,ht=$e,we=Je;$e=(x=y.lencode[we+((G&(1<<Ve+ht)-1)>>Ve)])>>>16&255,Je=65535&x,!(Ve+(Ce=x>>>24)<=W);){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}G>>>=Ve,W-=Ve,y.back+=Ve}if(G>>>=Ce,W-=Ce,y.back+=Ce,y.length=Je,0===$e){y.mode=26;break}if(32&$e){y.back=-1,y.mode=12;break}if(64&$e){j.msg="invalid literal/length code",y.mode=30;break}y.extra=15&$e,y.mode=22;case 22:if(y.extra){for(S=y.extra;W<S;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}y.length+=G&(1<<y.extra)-1,G>>>=y.extra,W-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;$e=(x=y.distcode[G&(1<<y.distbits)-1])>>>16&255,Je=65535&x,!((Ce=x>>>24)<=W);){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if(!(240&$e)){for(Ve=Ce,ht=$e,we=Je;$e=(x=y.distcode[we+((G&(1<<Ve+ht)-1)>>Ve)])>>>16&255,Je=65535&x,!(Ve+(Ce=x>>>24)<=W);){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}G>>>=Ve,W-=Ve,y.back+=Ve}if(G>>>=Ce,W-=Ce,y.back+=Ce,64&$e){j.msg="invalid distance code",y.mode=30;break}y.offset=Je,y.extra=15&$e,y.mode=24;case 24:if(y.extra){for(S=y.extra;W<S;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}y.offset+=G&(1<<y.extra)-1,G>>>=y.extra,W-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){j.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(0===Pe)break e;if(y.offset>(ge=ve-Pe)){if((ge=y.offset-ge)>y.whave&&y.sane){j.msg="invalid distance too far back",y.mode=30;break}Ue=ge>y.wnext?y.wsize-(ge-=y.wnext):y.wnext-ge,ge>y.length&&(ge=y.length),Ke=y.window}else Ke=xe,Ue=Ie-y.offset,ge=y.length;for(Pe<ge&&(ge=Pe),Pe-=ge,y.length-=ge;xe[Ie++]=Ke[Ue++],--ge;);0===y.length&&(y.mode=21);break;case 26:if(0===Pe)break e;xe[Ie++]=y.length,Pe--,y.mode=21;break;case 27:if(y.wrap){for(;W<32;){if(0===fe)break e;fe--,G|=J[ae++]<<W,W+=8}if(j.total_out+=ve-=Pe,y.total+=ve,ve&&(j.adler=y.check=y.flags?c(y.check,xe,ve,Ie-ve):s(y.check,xe,ve,Ie-ve)),ve=Pe,(y.flags?G:A(G))!==y.check){j.msg="incorrect data check",y.mode=30;break}W=G=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;W<32;){if(0===fe)break e;fe--,G+=J[ae++]<<W,W+=8}if(G!==(4294967295&y.total)){j.msg="incorrect length check",y.mode=30;break}W=G=0}y.mode=29;case 29:Z=1;break e;case 30:Z=-3;break e;case 31:return-4;default:return g}return j.next_out=Ie,j.avail_out=Pe,j.next_in=ae,j.avail_in=fe,y.hold=G,y.bits=W,(y.wsize||ve!==j.avail_out&&y.mode<30&&(y.mode<27||4!==L))&&de(j,j.output,j.next_out,ve-j.avail_out)?(y.mode=31,-4):(ve-=j.avail_out,j.total_in+=Ee-=j.avail_in,j.total_out+=ve,y.total+=ve,y.wrap&&ve&&(j.adler=y.check=y.flags?c(y.check,xe,ve,j.next_out-ve):s(y.check,xe,ve,j.next_out-ve)),j.data_type=y.bits+(y.last?64:0)+(12===y.mode?128:0)+(20===y.mode||15===y.mode?256:0),(0==Ee&&0===ve||4===L)&&Z===v&&(Z=-5),Z)},n.inflateEnd=function(j){if(!j||!j.state)return g;var L=j.state;return L.window&&(L.window=null),j.state=null,v},n.inflateGetHeader=function(j,L){var y;return j&&j.state&&2&(y=j.state).wrap?((y.head=L).done=!1,v):g},n.inflateSetDictionary=function(j,L){var y,J=L.length;return j&&j.state?0!==(y=j.state).wrap&&11!==y.mode?g:11===y.mode&&s(1,L,J,0)!==y.check?-3:de(j,L,J,J)?(y.mode=31,-4):(y.havedict=1,v):g},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,r,n){var i=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(p,m,v,g,E,b,T,A){var P,N,M,D,H,q,Q,Y,te,de=A.bits,j=0,L=0,y=0,J=0,xe=0,ae=0,Ie=0,fe=0,Pe=0,G=0,W=null,Ee=0,ve=new i.Buf16(16),ge=new i.Buf16(16),Ue=null,Ke=0;for(j=0;j<=15;j++)ve[j]=0;for(L=0;L<g;L++)ve[m[v+L]]++;for(xe=de,J=15;1<=J&&0===ve[J];J--);if(J<xe&&(xe=J),0===J)return E[b++]=20971520,E[b++]=20971520,A.bits=1,0;for(y=1;y<J&&0===ve[y];y++);for(xe<y&&(xe=y),j=fe=1;j<=15;j++)if(fe<<=1,(fe-=ve[j])<0)return-1;if(0<fe&&(0===p||1!==J))return-1;for(ge[1]=0,j=1;j<15;j++)ge[j+1]=ge[j]+ve[j];for(L=0;L<g;L++)0!==m[v+L]&&(T[ge[m[v+L]]++]=L);if(q=0===p?(W=Ue=T,19):1===p?(W=s,Ee-=257,Ue=c,Ke-=257,256):(W=f,Ue=u,-1),j=y,H=b,Ie=L=G=0,M=-1,D=(Pe=1<<(ae=xe))-1,1===p&&852<Pe||2===p&&592<Pe)return 1;for(;;){for(Q=j-Ie,te=T[L]<q?(Y=0,T[L]):T[L]>q?(Y=Ue[Ke+T[L]],W[Ee+T[L]]):(Y=96,0),P=1<<j-Ie,y=N=1<<ae;E[H+(G>>Ie)+(N-=P)]=Q<<24|Y<<16|te,0!==N;);for(P=1<<j-1;G&P;)P>>=1;if(0!==P?(G&=P-1,G+=P):G=0,L++,0==--ve[j]){if(j===J)break;j=m[v+T[L]]}if(xe<j&&(G&D)!==M){for(0===Ie&&(Ie=xe),H+=y,fe=1<<(ae=j-Ie);ae+Ie<J&&!((fe-=ve[ae+Ie])<=0);)ae++,fe<<=1;if(Pe+=1<<ae,1===p&&852<Pe||2===p&&592<Pe)return 1;E[M=G&D]=xe<<24|ae<<16|H-b}}return 0!==G&&(E[H+G]=j-Ie<<24|64<<16),A.bits=xe,0}},{"../utils/common":41}],51:[function(e,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,r,n){var i=e("../utils/common");function f(x){for(var C=x.length;0<=--C;)x[C]=0}var m=256,v=286,g=30,T=15,A=16,q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=new Array(576);f(de);var j=new Array(60);f(j);var L=new Array(512);f(L);var y=new Array(256);f(y);var J=new Array(29);f(J);var xe,ae,Ie,fe=new Array(g);function Pe(x,C,ne,se,z){this.static_tree=x,this.extra_bits=C,this.extra_base=ne,this.elems=se,this.max_length=z,this.has_stree=x&&x.length}function G(x,C){this.dyn_tree=x,this.max_code=0,this.stat_desc=C}function W(x){return x<256?L[x]:L[256+(x>>>7)]}function Ee(x,C){x.pending_buf[x.pending++]=255&C,x.pending_buf[x.pending++]=C>>>8&255}function ve(x,C,ne){x.bi_valid>A-ne?(x.bi_buf|=C<<x.bi_valid&65535,Ee(x,x.bi_buf),x.bi_buf=C>>A-x.bi_valid,x.bi_valid+=ne-A):(x.bi_buf|=C<<x.bi_valid&65535,x.bi_valid+=ne)}function ge(x,C,ne){ve(x,ne[2*C],ne[2*C+1])}function Ue(x,C){for(var ne=0;ne|=1&x,x>>>=1,ne<<=1,0<--C;);return ne>>>1}function Ke(x,C,ne){var se,z,he=new Array(T+1),be=0;for(se=1;se<=T;se++)he[se]=be=be+ne[se-1]<<1;for(z=0;z<=C;z++){var me=x[2*z+1];0!==me&&(x[2*z]=Ue(he[me]++,me))}}function Ce(x){var C;for(C=0;C<v;C++)x.dyn_ltree[2*C]=0;for(C=0;C<g;C++)x.dyn_dtree[2*C]=0;for(C=0;C<19;C++)x.bl_tree[2*C]=0;x.dyn_ltree[512]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function $e(x){8<x.bi_valid?Ee(x,x.bi_buf):0<x.bi_valid&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function Je(x,C,ne,se){var z=2*C,he=2*ne;return x[z]<x[he]||x[z]===x[he]&&se[C]<=se[ne]}function Ve(x,C,ne){for(var se=x.heap[ne],z=ne<<1;z<=x.heap_len&&(z<x.heap_len&&Je(C,x.heap[z+1],x.heap[z],x.depth)&&z++,!Je(C,se,x.heap[z],x.depth));)x.heap[ne]=x.heap[z],ne=z,z<<=1;x.heap[ne]=se}function ht(x,C,ne){var se,z,he,be,me=0;if(0!==x.last_lit)for(;se=x.pending_buf[x.d_buf+2*me]<<8|x.pending_buf[x.d_buf+2*me+1],z=x.pending_buf[x.l_buf+me],me++,0===se?ge(x,z,C):(ge(x,(he=y[z])+m+1,C),0!==(be=q[he])&&ve(x,z-=J[he],be),ge(x,he=W(--se),ne),0!==(be=Q[he])&&ve(x,se-=fe[he],be)),me<x.last_lit;);ge(x,256,C)}function we(x,C){var ne,se,z,he=C.dyn_tree,be=C.stat_desc.static_tree,me=C.stat_desc.has_stree,Ae=C.stat_desc.elems,Le=-1;for(x.heap_len=0,x.heap_max=573,ne=0;ne<Ae;ne++)0!==he[2*ne]?(x.heap[++x.heap_len]=Le=ne,x.depth[ne]=0):he[2*ne+1]=0;for(;x.heap_len<2;)he[2*(z=x.heap[++x.heap_len]=Le<2?++Le:0)]=1,x.depth[z]=0,x.opt_len--,me&&(x.static_len-=be[2*z+1]);for(C.max_code=Le,ne=x.heap_len>>1;1<=ne;ne--)Ve(x,he,ne);for(z=Ae;ne=x.heap[1],x.heap[1]=x.heap[x.heap_len--],Ve(x,he,1),se=x.heap[1],x.heap[--x.heap_max]=ne,x.heap[--x.heap_max]=se,he[2*z]=he[2*ne]+he[2*se],x.depth[z]=(x.depth[ne]>=x.depth[se]?x.depth[ne]:x.depth[se])+1,he[2*ne+1]=he[2*se+1]=z,x.heap[1]=z++,Ve(x,he,1),2<=x.heap_len;);x.heap[--x.heap_max]=x.heap[1],function(Re,et){var ct,st,wt,We,St,tr,mt=et.dyn_tree,Ot=et.max_code,je=et.stat_desc.static_tree,cr=et.stat_desc.has_stree,dt=et.stat_desc.extra_bits,rr=et.stat_desc.extra_base,pt=et.stat_desc.max_length,Nt=0;for(We=0;We<=T;We++)Re.bl_count[We]=0;for(mt[2*Re.heap[Re.heap_max]+1]=0,ct=Re.heap_max+1;ct<573;ct++)pt<(We=mt[2*mt[2*(st=Re.heap[ct])+1]+1]+1)&&(We=pt,Nt++),mt[2*st+1]=We,Ot<st||(Re.bl_count[We]++,St=0,rr<=st&&(St=dt[st-rr]),Re.opt_len+=(tr=mt[2*st])*(We+St),cr&&(Re.static_len+=tr*(je[2*st+1]+St)));if(0!==Nt){do{for(We=pt-1;0===Re.bl_count[We];)We--;Re.bl_count[We]--,Re.bl_count[We+1]+=2,Re.bl_count[pt]--,Nt-=2}while(0<Nt);for(We=pt;0!==We;We--)for(st=Re.bl_count[We];0!==st;)Ot<(wt=Re.heap[--ct])||(mt[2*wt+1]!==We&&(Re.opt_len+=(We-mt[2*wt+1])*mt[2*wt],mt[2*wt+1]=We),st--)}}(x,C),Ke(he,Le,x.bl_count)}function d(x,C,ne){var se,z,he=-1,be=C[1],me=0,Ae=7,Le=4;for(0===be&&(Ae=138,Le=3),C[2*(ne+1)+1]=65535,se=0;se<=ne;se++)z=be,be=C[2*(se+1)+1],++me<Ae&&z===be||(me<Le?x.bl_tree[2*z]+=me:0!==z?(z!==he&&x.bl_tree[2*z]++,x.bl_tree[32]++):me<=10?x.bl_tree[34]++:x.bl_tree[36]++,he=z,Le=(me=0)===be?(Ae=138,3):z===be?(Ae=6,3):(Ae=7,4))}function Z(x,C,ne){var se,z,he=-1,be=C[1],me=0,Ae=7,Le=4;for(0===be&&(Ae=138,Le=3),se=0;se<=ne;se++)if(z=be,be=C[2*(se+1)+1],!(++me<Ae&&z===be)){if(me<Le)for(;ge(x,z,x.bl_tree),0!=--me;);else 0!==z?(z!==he&&(ge(x,z,x.bl_tree),me--),ge(x,16,x.bl_tree),ve(x,me-3,2)):me<=10?(ge(x,17,x.bl_tree),ve(x,me-3,3)):(ge(x,18,x.bl_tree),ve(x,me-11,7));he=z,Le=(me=0)===be?(Ae=138,3):z===be?(Ae=6,3):(Ae=7,4)}}f(fe);var K=!1;function S(x,C,ne,se){var z,he,be;ve(x,0+(se?1:0),3),he=C,be=ne,$e(z=x),Ee(z,be),Ee(z,~be),i.arraySet(z.pending_buf,z.window,he,be,z.pending),z.pending+=be}n._tr_init=function(x){K||(function(){var C,ne,se,z,he,be=new Array(T+1);for(z=se=0;z<28;z++)for(J[z]=se,C=0;C<1<<q[z];C++)y[se++]=z;for(y[se-1]=z,z=he=0;z<16;z++)for(fe[z]=he,C=0;C<1<<Q[z];C++)L[he++]=z;for(he>>=7;z<g;z++)for(fe[z]=he<<7,C=0;C<1<<Q[z]-7;C++)L[256+he++]=z;for(ne=0;ne<=T;ne++)be[ne]=0;for(C=0;C<=143;)de[2*C+1]=8,C++,be[8]++;for(;C<=255;)de[2*C+1]=9,C++,be[9]++;for(;C<=279;)de[2*C+1]=7,C++,be[7]++;for(;C<=287;)de[2*C+1]=8,C++,be[8]++;for(Ke(de,287,be),C=0;C<g;C++)j[2*C+1]=5,j[2*C]=Ue(C,5);xe=new Pe(de,q,257,v,T),ae=new Pe(j,Q,0,g,T),Ie=new Pe(new Array(0),Y,0,19,7)}(),K=!0),x.l_desc=new G(x.dyn_ltree,xe),x.d_desc=new G(x.dyn_dtree,ae),x.bl_desc=new G(x.bl_tree,Ie),x.bi_buf=0,x.bi_valid=0,Ce(x)},n._tr_stored_block=S,n._tr_flush_block=function(x,C,ne,se){var z,he,be=0;0<x.level?(2===x.strm.data_type&&(x.strm.data_type=function(me){var Ae,Le=4093624447;for(Ae=0;Ae<=31;Ae++,Le>>>=1)if(1&Le&&0!==me.dyn_ltree[2*Ae])return 0;if(0!==me.dyn_ltree[18]||0!==me.dyn_ltree[20]||0!==me.dyn_ltree[26])return 1;for(Ae=32;Ae<m;Ae++)if(0!==me.dyn_ltree[2*Ae])return 1;return 0}(x)),we(x,x.l_desc),we(x,x.d_desc),be=function(me){var Ae;for(d(me,me.dyn_ltree,me.l_desc.max_code),d(me,me.dyn_dtree,me.d_desc.max_code),we(me,me.bl_desc),Ae=18;3<=Ae&&0===me.bl_tree[2*te[Ae]+1];Ae--);return me.opt_len+=3*(Ae+1)+5+5+4,Ae}(x),(he=x.static_len+3+7>>>3)<=(z=x.opt_len+3+7>>>3)&&(z=he)):z=he=ne+5,ne+4<=z&&-1!==C?S(x,C,ne,se):4===x.strategy||he===z?(ve(x,2+(se?1:0),3),ht(x,de,j)):(ve(x,4+(se?1:0),3),function(me,Ae,Le,Re){var et;for(ve(me,Ae-257,5),ve(me,Le-1,5),ve(me,Re-4,4),et=0;et<Re;et++)ve(me,me.bl_tree[2*te[et]+1],3);Z(me,me.dyn_ltree,Ae-1),Z(me,me.dyn_dtree,Le-1)}(x,x.l_desc.max_code+1,x.d_desc.max_code+1,be+1),ht(x,x.dyn_ltree,x.dyn_dtree)),Ce(x),se&&$e(x)},n._tr_tally=function(x,C,ne){return x.pending_buf[x.d_buf+2*x.last_lit]=C>>>8&255,x.pending_buf[x.d_buf+2*x.last_lit+1]=255&C,x.pending_buf[x.l_buf+x.last_lit]=255&ne,x.last_lit++,0===C?x.dyn_ltree[2*ne]++:(x.matches++,C--,x.dyn_ltree[2*(y[ne]+m+1)]++,x.dyn_dtree[2*W(C)]++),x.last_lit===x.lit_bufsize-1},n._tr_align=function(x){var C;ve(x,2,3),ge(x,256,de),16===(C=x).bi_valid?(Ee(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):8<=C.bi_valid&&(C.pending_buf[C.pending++]=255&C.bi_buf,C.bi_buf>>=8,C.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,r,n){(function(i){!function(s,c){if(!s.setImmediate){var f,u,p,m,v=1,g={},E=!1,b=s.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(s);T=T&&T.setTimeout?T:s,f="[object process]"==={}.toString.call(s.process)?function(M){zt.nextTick(function(){P(M)})}:function(){if(s.postMessage&&!s.importScripts){var M=!0,D=s.onmessage;return s.onmessage=function(){M=!1},s.postMessage("","*"),s.onmessage=D,M}}()?(m="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",N,!1):s.attachEvent("onmessage",N),function(M){s.postMessage(m+M,"*")}):s.MessageChannel?((p=new MessageChannel).port1.onmessage=function(M){P(M.data)},function(M){p.port2.postMessage(M)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(M){var D=b.createElement("script");D.onreadystatechange=function(){P(M),D.onreadystatechange=null,u.removeChild(D),D=null},u.appendChild(D)}):function(M){setTimeout(P,0,M)},T.setImmediate=function(M){"function"!=typeof M&&(M=new Function(""+M));for(var D=new Array(arguments.length-1),H=0;H<D.length;H++)D[H]=arguments[H+1];return g[v]={callback:M,args:D},f(v),v++},T.clearImmediate=A}function A(M){delete g[M]}function P(M){if(E)setTimeout(P,0,M);else{var D=g[M];if(D){E=!0;try{!function(H){var q=H.callback,Q=H.args;switch(Q.length){case 0:q();break;case 1:q(Q[0]);break;case 2:q(Q[0],Q[1]);break;case 3:q(Q[0],Q[1],Q[2]);break;default:q.apply(c,Q)}}(D)}finally{A(M),E=!1}}}}function N(M){M.source===s&&"string"==typeof M.data&&0===M.data.indexOf(m)&&P(+M.data.slice(m.length))}}(typeof self>"u"?void 0===i?this:i:self)}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}(Zn);const Or=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),As=Or?Promise.resolve().then(function(){return Ds}):Promise.resolve().then(function(){return Cs});function cn(){return cn=(0,O.A)(function*(...o){return(yield As).default(...o)}),cn.apply(this,arguments)}Or?Promise.resolve().then(function(){return js}):Promise.resolve().then(function(){return Fs});const ks=Or?Promise.resolve().then(function(){return Os}):Promise.resolve().then(function(){return Ls});function un(){return un=(0,O.A)(function*(...o){return(yield ks).default(...o)}),un.apply(this,arguments)}const Ps=function(){var o=(0,O.A)(function*(t){const e=yield t.getFile();return e.handle=t,e});return function(e){return o.apply(this,arguments)}}();var Ss=function(){var o=(0,O.A)(function*(t=[{}]){Array.isArray(t)||(t=[t]);const e=[];t.forEach((i,s)=>{e[s]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(c=>{e[s].accept[c]=i.extensions||[]}):e[s].accept["*/*"]=i.extensions||[]});const r=yield window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),n=yield Promise.all(r.map(Ps));return t[0].multiple?n:n[0]});return function(){return o.apply(this,arguments)}}(),Ds={__proto__:null,default:Ss};function Nr(o){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then(function(n){return{value:n,done:r}})}return Nr=function(e){this.s=e,this.n=e.next},Nr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Nr(o)}const Qn=function(){var o=(0,O.A)(function*(t,e,r=t.name,n){const i=[],s=[];var c,f=!1,u=!1;try{for(var p,m=function(v){var g,E,b,T=2;for(typeof Symbol<"u"&&(E=Symbol.asyncIterator,b=Symbol.iterator);T--;){if(E&&null!=(g=v[E]))return g.call(v);if(b&&null!=(g=v[b]))return new Nr(g.call(v));E="@@asyncIterator",b="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());f=!(p=yield m.next()).done;f=!1){const v=p.value,g=`${r}/${v.name}`;"file"===v.kind?s.push(v.getFile().then(E=>(E.directoryHandle=t,E.handle=v,Object.defineProperty(E,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>g})))):"directory"!==v.kind||!e||n&&n(v)||i.push(Qn(v,e,g,n))}}catch(v){u=!0,c=v}finally{try{f&&null!=m.return&&(yield m.return())}finally{if(u)throw c}}return[...(yield Promise.all(i)).flat(),...yield Promise.all(s)]});return function(e,r){return o.apply(this,arguments)}}();var Is=function(){var o=(0,O.A)(function*(t={}){t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=yield window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(yield(yield e.values()).next()).done?[e]:Qn(e,t.recursive,void 0,t.skipDirectory)});return function(){return o.apply(this,arguments)}}(),js={__proto__:null,default:Is},Rs=function(){var o=(0,O.A)(function*(t,e=[{}],r=null,n=!1,i=null){Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let c=null;if(t instanceof Blob&&t.type?c=t.type:t.headers&&t.headers.get("content-type")&&(c=t.headers.get("content-type")),e.forEach((p,m)=>{s[m]={description:p.description||"Files",accept:{}},p.mimeTypes?(0===m&&c&&p.mimeTypes.push(c),p.mimeTypes.map(v=>{s[m].accept[v]=p.extensions||[]})):c?s[m].accept[c]=p.extensions||[]:s[m].accept["*/*"]=p.extensions||[]}),r)try{yield r.getFile()}catch(p){if(r=null,n)throw p}const f=r||(yield window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}));!r&&i&&i(f);const u=yield f.createWritable();return"stream"in t?(yield t.stream().pipeTo(u),f):"body"in t?(yield t.body.pipeTo(u),f):(yield u.write(yield t),yield u.close(),f)});return function(e){return o.apply(this,arguments)}}(),Os={__proto__:null,default:Rs},Ns=function(){var o=(0,O.A)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),new Promise((e,r)=>{const n=document.createElement("input");n.type="file";const i=[...t.map(u=>u.mimeTypes||[]),...t.map(u=>u.extensions||[])].join();n.multiple=t[0].multiple||!1,n.accept=i||"",n.style.display="none",document.body.append(n);const s=u=>{"function"==typeof c&&c(),e(u)},c=t[0].legacySetup&&t[0].legacySetup(s,()=>c(r),n),f=()=>{window.removeEventListener("focus",f),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",f)}),n.addEventListener("change",()=>{window.removeEventListener("focus",f),n.remove(),s(n.multiple?Array.from(n.files):n.files[0])}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})});return function(){return o.apply(this,arguments)}}(),Cs={__proto__:null,default:Ns},Bs=function(){var o=(0,O.A)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,r)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const i=c=>{"function"==typeof s&&s(),e(c)},s=t[0].legacySetup&&t[0].legacySetup(i,()=>s(r),n);n.addEventListener("change",()=>{let c=Array.from(n.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(c=c.filter(f=>f.webkitRelativePath.split("/").every(u=>!t[0].skipDirectory({name:u,kind:"directory"})))):c=c.filter(f=>2===f.webkitRelativePath.split("/").length),i(c)}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})});return function(){return o.apply(this,arguments)}}(),Fs={__proto__:null,default:Bs},$s=function(){var o=(0,O.A)(function*(t,e={}){Array.isArray(e)&&(e=e[0]);const r=document.createElement("a");let n=t;var c;"body"in t&&(n=yield(c=(0,O.A)(function*(f,u){const p=f.getReader(),m=new ReadableStream({start:E=>function(){var b=(0,O.A)(function*(){return p.read().then(({done:A,value:P})=>{if(!A)return E.enqueue(P),T();E.close()})});function T(){return b.apply(this,arguments)}return T}()()}),v=new Response(m),g=yield v.blob();return p.releaseLock(),new Blob([g],{type:u})}),function(f,u){return c.apply(this,arguments)})(t.body,t.headers.get("content-type"))),r.download=e.fileName||"Untitled",r.href=URL.createObjectURL(yield n);const i=()=>{"function"==typeof s&&s()},s=e.legacySetup&&e.legacySetup(i,()=>s(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),i()}),r.click(),null});return function(e){return o.apply(this,arguments)}}(),Ls={__proto__:null,default:$s};const Xn=class{constructor(o){(0,Zt.r)(this,o),this.importProgress=(0,Zt.c)(this,"jeepSqliteImportProgress",7),this.exportProgress=(0,Zt.c)(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=(0,Zt.c)(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=(0,Zt.c)(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=(0,Zt.c)(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(o){this.innerAutoSave=o}parseTypeOrm(o){this.innerTypeOrm=o}parseWasmPath(o){this.innerWasmPath=o}parsePickText(o){this.innerPickText=o}parseSaveText(o){this.innerSaveText=o}parseButtonOptions(o){this.innerButtonOptions=JSON.parse(o);const t=Object.keys(this.innerButtonOptions);for(const e of t)switch(e){case"top":this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[e]);break;case"right":this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[e]);break;case"fontSize":this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[e]);break;case"padding":this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[e]);break;case"backgroundColor":this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[e]);break;case"color":this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[e])}}echo(o){return(0,O.A)(function*(){return o})()}createConnection(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=o.version?o.version:1,i=!!o.readonly&&o.readonly;try{return yield t._createConnection(r,n,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}isConnection(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly,i=yield t._isConnection(r,n);return Promise.resolve(i)})()}closeConnection(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._closeConnection(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}open(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._open(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}close(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._close(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}getVersion(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._getVersion(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}beginTransaction(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(o.readonly&&o.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const i=yield t._beginTransaction(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}commitTransaction(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(o.readonly&&o.readonly)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{const i=yield t._commitTransaction(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}rollbackTransaction(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(o.readonly&&o.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const i=yield t._rollbackTransaction(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}isTransactionActive(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(o.readonly&&o.readonly)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{const i=yield t._isTransactionActive(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}execute(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statements")||0===o.statements.length)return Promise.reject("Must provide raw SQL statements");const r=o.database,n=o.statements;let i=!0;const s=!!o.readonly&&o.readonly;e.includes("transaction")&&(i=o.transaction);try{const c=yield t._execute(r,n,i,s);return Promise.resolve(c)}catch(c){return Promise.reject(c)}})()}executeSet(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("set")||0===o.set.length)return Promise.reject("Must provide a non-empty set of SQL statements");const r=o.database,n=o.set;let i=!0;e.includes("transaction")&&(i=o.transaction);const s=!!o.readonly&&o.readonly,c=o.returnMode?o.returnMode:"no";try{const f=yield t._executeSet(r,n,i,s,c);return Promise.resolve(f)}catch(f){return Promise.reject(f)}})()}run(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statement")||0===o.statement.length)return Promise.reject("Must provide a run statement");const r=o.database,n=o.statement;let i=[];e.includes("values")&&(i=o.values.length>0?o.values:[]);let s=!0;e.includes("transaction")&&(s=o.transaction);const c=!!o.readonly&&o.readonly,f=o.returnMode?o.returnMode:"no";try{const u=yield t._run(r,n,i,s,c,f);return Promise.resolve(u)}catch(u){return Promise.reject(u)}})()}query(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statement")||0===o.statement.length)return Promise.reject("Must provide a query statement");let r=[];e.includes("values")&&(r=o.values.length>0?o.values:[]);const n=o.database,i=o.statement,s=!!o.readonly&&o.readonly;try{const c=yield t._query(n,i,r,s);return Promise.resolve(c)}catch(c){return Promise.reject(c)}})()}getTableList(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._getTableList(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}isDBExists(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._isDBExists(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}isDBOpen(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._isDBOpen(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}deleteDatabase(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._deleteDatabase(r,n)}catch(i){return Promise.reject(i)}})()}isStoreOpen(){var o=this;return(0,O.A)(function*(){return Promise.resolve(o.isStore)})()}copyFromAssets(o){var t=this;return(0,O.A)(function*(){let e;if(e=null==o||!Object.keys(o).includes("overwrite")||o.overwrite,!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);try{return yield t._copyFromAssets(e),Promise.resolve()}catch(r){return Promise.reject(r)}})()}isTableExists(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(!e.includes("table"))return Promise.reject("Must provide a table name");const n=o.table,i=!!o.readonly&&o.readonly;try{const s=yield t._isTableExists(r,n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}createSyncTable(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._createSyncTable(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}getSyncDate(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._getSyncDate(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}setSyncDate(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const r=o.database,n=o.syncdate,i=!!o.readonly&&o.readonly;try{return yield t._setSyncDate(r,n,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}isJsonValid(o){var t=this;return(0,O.A)(function*(){if(!Object.keys(o).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=o.jsonstring;try{const n=yield t._isJsonValid(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})()}importFromJson(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=o.jsonstring;try{const n=yield t._importFromJson(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})()}exportToJson(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const r=o.database,n=o.jsonexportmode,i=!!o.readonly&&o.readonly;try{const s=yield t._exportToJson(r,n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}deleteExportedRows(o){var t=this;return(0,O.A)(function*(){if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._deleteExportedRows(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}addUpgradeStatement(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const r=o.database,n=o.upgrade;for(const i of n){const s=Object.keys(i);if(!s.includes("toVersion")||!s.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if("number"!=typeof i.toVersion)return Promise.reject("upgrade.toVersion must be a number");if(t._versionUpgrades[r])t._versionUpgrades[r][i.toVersion]=i;else{const c={};c[i.toVersion]=i,t._versionUpgrades[r]=c}}return Promise.resolve()})()}isDatabase(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;try{const n=yield t._isDatabase(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})()}getDatabaseList(){var o=this;return(0,O.A)(function*(){if(!o.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${o.storeName} is not opened`);try{const t=yield o._getDatabaseList();return Promise.resolve(t)}catch(t){return Promise.reject(t)}})()}checkConnectionsConsistency(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(o);if(!e.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const r=o.dbNames;if(!e.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const n=o.openModes;try{const i=yield t._checkConnectionsConsistency(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}saveToStore(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._saveToStore(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}saveToLocalDisk(o){var t=this;return(0,O.A)(function*(){if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;try{return yield t._saveToLocalDisk(r),Promise.resolve()}catch(n){return Promise.reject(n)}})()}getFromLocalDiskToStore(o){var t=this;return(0,O.A)(function*(){const e=!o.overwrite||o.overwrite;console.log(Or?"Using the File System Access API.":"Using the fallback implementation.");try{return yield t._getFromLocalDiskToStore(e),Promise.resolve()}catch(r){return Promise.reject(r)}})()}getFromHTTPRequest(o){var t=this;return(0,O.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("url"))return Promise.reject("Must provide an url");const r=o.url,n=!o.overwrite||o.overwrite;try{return yield t._getFromHTTPRequest(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}connectedCallback(){this.parseAutoSave(void 0!==this.autoSave&&this.autoSave),this.parseTypeOrm(void 0!==this.typeOrm&&this.typeOrm),this.parseWasmPath(void 0!==this.wasmPath?this.wasmPath:"/assets"),this.parseSaveText(void 0!==this.saveText?this.saveText:"Save"),this.parsePickText(void 0!==this.pickText?this.pickText:"Pick a database"),void 0!==this.buttonOptions&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(o=>{this.isStore=o})}componentWillLoad(){}componentDidLoad(){var o=this;return(0,O.A)(function*(){o._element=o.el.shadowRoot,o.isStore||console.log("jeep-sqlite isStore = false")})()}_createConnection(o,t,e){var r=this;return(0,O.A)(function*(){let n={};const i=Object.keys(r._versionUpgrades);0!==i.length&&i.includes(o)&&(n=r._versionUpgrades[o]);const s=Object.keys(r._dbDict);let c;try{return c=s.length>0&&(s.includes("RW_"+o)||s.includes("RO_"+o))?s.includes("RW_"+o)?r._dbDict["RW_"+o]:r._dbDict["RO_"+o]:new Hn(o+"SQLite.db",t,n,r.store,r.innerAutoSave,r.innerWasmPath),r._dbDict[e?"RO_"+o:"RW_"+o]=c,Promise.resolve()}catch(f){return Promise.reject(f.message?f.message:f)}})()}_isConnection(o,t){var e=this;return(0,O.A)(function*(){return Object.keys(e._dbDict).includes(t?"RO_"+o:"RW_"+o)?{result:!0}:{result:!1}})()}_closeConnection(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`CloseConnection: No available connection for ${o}`);const i=e._dbDict[n];try{return i.isDBOpen()&&(yield i.close()),delete e._dbDict[n],Promise.resolve()}catch(s){return Promise.reject(`CloseConnection: ${s.message?s.message:s}`)}})()}_open(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${o}`);const i=e._dbDict[n];try{return yield i.open(),Promise.resolve()}catch(s){return Promise.reject(`Open: ${s.message?s.message:s}`)}})()}_close(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`Close: No available connection for ${o}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`Close: ${o} database not opened`);try{return yield i.close(),Promise.resolve()}catch(s){return Promise.reject(`Close: ${s.message?s.message:s}`)}})()}_saveToStore(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`SaveToStore: No available connection for ${o}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`SaveToStore: ${o} database not opened`);try{return yield i.saveToStore(),Promise.resolve()}catch(s){return Promise.reject(`SaveToStore: ${s.message?s.message:s}`)}})()}_saveToLocalDisk(o){var t=this;return(0,O.A)(function*(){try{const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`SaveToLocalDisk: No available connection for ${o}`);const n=t._dbDict[r];if(!n.isDBOpen())return Promise.reject(`SaveToLocalDisk: ${o} database not opened`);const i=yield n.exportDB();t._blob=yield t.uint2blob(i);const s=`${o}SQLite.db`;return t._opts={fileName:s,extensions:[".db"],startIn:"documents"},t._buttonSaveEl=document.createElement("button"),t._buttonSaveEl.setAttribute("id","saveButton"),t._buttonSaveEl.innerHTML=`${t.innerSaveText} ${s}`,t._element.appendChild(t._buttonSaveEl),t._buttonSaveEl.addEventListener("click",t.saveFile.bind(t)),Promise.resolve()}catch(e){return Promise.reject(`SaveToLocalDisk: ${e.message?e.message:e}`)}})()}_getFromLocalDiskToStore(o){var t=this;return(0,O.A)(function*(){return t._buttonPickEl=document.createElement("button"),t._buttonPickEl.setAttribute("id","pickButton"),t._buttonPickEl.innerHTML=`${t.innerPickText}`,t._element.appendChild(t._buttonPickEl),t._buttonPickEl.addEventListener("click",t.pickDatabase.bind(t)),t._overwrite=o,Promise.resolve()})()}pickDatabase(){var o=this;return(0,O.A)(function*(){try{const t=yield function Ts(){return cn.apply(this,arguments)}({extensions:[".db"]});let e=yield o.blob2uint(t);const r=o.removePathSuffix(t.name),n=o.setPathSuffix(t.name);(yield Fe.isDBInStore(n,o.store))?o._overwrite?(yield Fe.removeDBFromStore(n,o.store),yield Fe.saveDBToStore(n,e,o.store)):o.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${n}`}):yield Fe.saveDBToStore(n,e,o.store),o._element.removeChild(o._buttonPickEl),o.PickDatabaseEnded.emit({db_name:r})}catch(t){o.PickDatabaseEnded.emit({message:t.message?t.message:t})}})()}saveFile(){var o=this;return(0,O.A)(function*(){try{yield function xs(){return un.apply(this,arguments)}(o._blob,[o._opts]);const t=o._opts.fileName;o._element.removeChild(o._buttonSaveEl),o.SaveDatabaseEnded.emit({db_name:t})}catch(t){o.SaveDatabaseEnded.emit({message:t.message?t.message:t})}})()}_getVersion(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${o}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`GetVersion: ${o} database not opened`);try{const s=yield i.getVersion(),c={};return c.version=s,Promise.resolve(c)}catch(s){return Promise.reject(`Open: ${s.message?s.message:s}`)}})()}_beginTransaction(o){var t=this;return(0,O.A)(function*(){const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`BeginTransaction: No available connection for ${o}`);const n=t._dbDict[r];if(!n.isDBOpen())return Promise.reject(`BeginTransaction: ${o} database not opened`);let i={};return i={changes:{changes:yield n.beginTransaction()}},Promise.resolve(i)})()}_commitTransaction(o){var t=this;return(0,O.A)(function*(){const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`CommitTransaction: No available connection for ${o}`);const n=t._dbDict[r];if(!n.isDBOpen())return Promise.reject(`CommitTransaction: ${o} database not opened`);let i={};return i={changes:{changes:yield n.commitTransaction()}},Promise.resolve(i)})()}_rollbackTransaction(o){var t=this;return(0,O.A)(function*(){const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`RollbackTransaction: No available connection for ${o}`);const n=t._dbDict[r];if(!n.isDBOpen())return Promise.reject(`RollbackTransaction: ${o} database not opened`);let i={};return i={changes:{changes:yield n.rollbackTransaction()}},Promise.resolve(i)})()}_isTransactionActive(o){var t=this;return(0,O.A)(function*(){const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`IsTransactionActive: No available connection for ${o}`);const n=t._dbDict[r];if(!n.isDBOpen())return Promise.reject(`IsTransactionActive: ${o} database not opened`);let i={};return i={result:n.isTransActive()},Promise.resolve(i)})()}_execute(o,t,e,r){var n=this;return(0,O.A)(function*(){const i=Object.keys(n._dbDict),s="RW_"+o;if(!i.includes(s))return Promise.reject(`Execute: No available connection for ${o}`);const c=n._dbDict[s];if(!c.isDBOpen())return Promise.reject(`Execute: ${o} database not opened`);if(r)return Promise.reject("Execute: not allowed in read-only mode");let f={};const u=t.substring(0,6);if(n.innerAutoSave&&"COMMIT"===u&&n.innerTypeOrm)return f={changes:{changes:0}},Promise.resolve(f);try{return f={changes:{changes:yield c.executeSQL(t,e)}},Promise.resolve(f)}catch(p){return Promise.reject(`Execute: ${p.message?p.message:p}`)}})()}_executeSet(o,t,e,r,n){var i=this;return(0,O.A)(function*(){const s=Object.keys(i._dbDict),c="RW_"+o;if(!s.includes(c))return Promise.reject(`ExecuteSet: No available connection for ${o}`);const f=i._dbDict[c];if(!f.isDBOpen())return Promise.reject(`ExecuteSet: ${o} database not opened`);if(r)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const u of t)if(!("statement"in u)||!("values"in u))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const u=yield f.execSet(t,e,n);return Promise.resolve({changes:{changes:u.changes,lastId:u.lastId,values:u.values}})}catch(u){return Promise.reject(`ExecuteSet: ${u.message?u.message:u}`)}})()}_run(o,t,e,r,n,i){var s=this;return(0,O.A)(function*(){const c=Object.keys(s._dbDict),f="RW_"+o;if(!c.includes(f))return Promise.reject(`Run: No available connection for ${o}`);const u=s._dbDict[f];if(!u.isDBOpen())return Promise.reject(`Run: ${o} database not opened`);if(n)return Promise.reject("Run: not allowed in read-only mode");let p={};const m=t.substring(0,6);if(s.innerAutoSave&&"COMMIT"===m)return p={changes:{changes:0}},Promise.resolve(p);try{const v=yield u.runSQL(t,e,r,i);return p={changes:{changes:v.changes,lastId:v.lastId,values:v.values}},Promise.resolve(p)}catch(v){return Promise.reject(`Run: ${v.message?v.message:v}`)}})()}_query(o,t,e,r){var n=this;return(0,O.A)(function*(){const i=Object.keys(n._dbDict),s=r?"RO_"+o:"RW_"+o;if(!i.includes(s))return Promise.reject(`Query: No available connection for ${o}`);const c=n._dbDict[s];if(!c.isDBOpen())return Promise.reject(`Query: ${o} database not opened`);let f=[];const u=t.substring(0,6);if(n.innerAutoSave&&"COMMIT"===u)return Promise.resolve({values:f});try{return f=yield c.selectSQL(t,e),Promise.resolve({values:f})}catch(p){return Promise.reject(`Query failed: ${p.message?p.message:p}`)}})()}_getTableList(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`GetTableList: No available connection for ${o}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`GetTableList: ${o} database not opened`);let s=[];try{return s=yield i.getTableNames(),Promise.resolve({values:s})}catch(c){return Promise.reject(`GetTableList failed: ${c.message?c.message:c}`)}})()}_isDBExists(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`IsDBExists: No available connection for ${o}`);const i=e._dbDict[n];try{const c={result:yield i.isDBExists(o+"SQLite.db")};return Promise.resolve(c)}catch(s){return Promise.reject(`IsDBExists: ${s.message?s.message:s}`)}})()}_isDBOpen(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`IsDBOpen: No available connection for ${o}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.resolve({result:!1});try{const c={result:yield i.isDBOpen(o+"SQLite.db")};return Promise.resolve(c)}catch(s){return Promise.reject(`IsDBOpen: ${s.message?s.message:s}`)}})()}_deleteDatabase(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n="RW_"+o;if(!r.includes(n))return Promise.reject(`DeleteDatabase: No available connection for ${o}`);const i=e._dbDict[n];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return yield i.deleteDB(o+"SQLite.db"),Promise.resolve()}catch(s){return Promise.reject(`DeleteDatabase: ${s.message?s.message:s}`)}})()}_isTableExists(o,t,e){var r=this;return(0,O.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+o:"RW_"+o;if(!n.includes(i))return Promise.reject(`IsTableExists: No available connection for ${o}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`IsTableExists: ${o} database not opened`);try{const f={result:yield s.isTable(t)};return Promise.resolve(f)}catch(c){return Promise.reject(`IsTableExists: ${c.message?c.message:c}`)}})()}_createSyncTable(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n="RW_"+o;if(!r.includes(n))return Promise.reject(`CreateSyncTable: No available connection for ${o}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`CreateSyncTable: ${o} database not opened`);if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const s=yield i.createSyncTable();return Promise.resolve({changes:{changes:s}})}catch(s){return Promise.reject(`CreateSyncTable: ${s.message?s.message:s}`)}})()}_getSyncDate(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`GetSyncDate: No available connection for ${o}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`GetSyncDate: ${o} database not opened`);try{const s=yield i.getSyncDate();return Promise.resolve({syncDate:s})}catch(s){return Promise.reject(`GetSyncDate: ${s.message?s.message:s}`)}})()}_setSyncDate(o,t,e){var r=this;return(0,O.A)(function*(){const n=Object.keys(r._dbDict),i="RW_"+o;if(!n.includes(i))return Promise.reject(`SetSyncDate: No available connection for ${o}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`SetSyncDate: ${o} database not opened`);if(e)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const c=yield s.setSyncDate(t);return c.result?Promise.resolve():Promise.reject(`SetSyncDate: ${c.message}`)}catch(c){return Promise.reject(`SetSyncDate: ${c.message?c.message:c}`)}})()}_isJsonValid(o){return(0,O.A)(function*(){const t=JSON.parse(o);return(yield Ge.isJsonSQLite(t))?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")})()}_importFromJson(o){var t=this;return(0,O.A)(function*(){var e,r;const n=JSON.parse(o);if(!(yield Ge.isJsonSQLite(n)))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const s=n,c=`${s.database}SQLite.db`,f=null!==(e=s.version)&&void 0!==e?e:1,u=s.mode,p=null!==(r=s.overwrite)&&void 0!==r&&r,m=new Hn(c,f,{},t.store,t.innerAutoSave,t.innerWasmPath);try{p&&"full"===u&&Fe.isDBInStore(c,t.store)&&(yield Fe.removeDBFromStore(c,t.store)),yield m.open();const v=yield m.getTableNames();if("full"===u&&v.length>0){const E=yield m.getVersion();if(f<E)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${E}`);if(E===f)return Promise.resolve({changes:{changes:0}})}const g=yield m.importJson(s,t.importProgress);return yield m.close(),Promise.resolve({changes:{changes:g}})}catch(v){return Promise.reject(`ImportFromJson: ${v.message?v.message:v}`)}})()}_exportToJson(o,t,e){var r=this;return(0,O.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+o:"RW_"+o;if(!n.includes(i))return Promise.reject(`ExportToJson: No available connection for ${o}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`ExportToJson: ${o} database not opened`);try{const c=yield s.exportJson(t,r.exportProgress);return Object.keys(c).includes("message")?Promise.reject(`ExportToJson: ${c.message}`):Promise.resolve({export:c})}catch(c){return Promise.reject(`ExportToJson: ${c.message?c.message:c}`)}})()}_deleteExportedRows(o,t){var e=this;return(0,O.A)(function*(){const r=Object.keys(e._dbDict),n="RW_"+o;if(!r.includes(n))return Promise.reject(`DeleteExportedRows: No available connection for ${o}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`DeleteExportedRows: ${o} database not opened`);if(t)return Promise.reject("DeleteExportedRows: not allowed in read-only mode");try{yield i.deleteExportedRows()}catch(s){return Promise.reject(`DeleteExportedRows: ${s.message?s.message:s}`)}})()}_copyFromAssets(o){var t=this;return(0,O.A)(function*(){const e=yield t.loadJSON("/assets/databases/databases.json");if(null==e)return Promise.reject("CopyFromAssets: no databases.json file in /assets/databases folder");if(t.databaseList=JSON.parse(e),!Object.keys(t.databaseList).includes("databaseList"))return Promise.reject("CopyFromAssets: no key databaseList in databases.json");try{for(const n of t.databaseList.databaseList)".db"===n.substring(n.length-3)&&(yield t.copyDatabase(`/assets/databases/${n}`,o)),".zip"===n.substring(n.length-4)&&(yield t.unzipDatabase(`/assets/databases/${n}`,o));return Promise.resolve()}catch(n){return Promise.reject(`CopyFromAssets: ${n.message?n.message:n}`)}})()}_getFromHTTPRequest(o,t){var e=this;return(0,O.A)(function*(){try{let n;switch(e.getFileExtensionInUrl(o)){case"db":yield e.copyDatabase(o,t),n="db";break;case"zip":yield e.unzipDatabase(o,t),n="zip";break;default:n="Unknown file type in url."}return e.HTTPRequestEnded.emit({message:n}),Promise.resolve()}catch(r){return Promise.reject(`GetFromHTTPRequest: ${r.message?r.message:r}`)}})()}_isDatabase(o){var t=this;return(0,O.A)(function*(){try{const r={result:yield Fe.isDBInStore(o+"SQLite.db",t.store)};return Promise.resolve(r)}catch(e){return Promise.reject(`IsDatabase: ${e.message?e.message:e}`)}})()}_getDatabaseList(){var o=this;return(0,O.A)(function*(){try{const e={values:yield Fe.getDBListFromStore(o.store)};return Promise.resolve(e)}catch(t){return Promise.reject(`GetDatabaseList: ${t.message?t.message:t}`)}})()}_checkConnectionsConsistency(o,t){var e=this;return(0,O.A)(function*(){const r={result:!1},n=[];o.forEach((i,s)=>{n.push(`${t[s]}_${i}`)});try{let i=new Set(Object.keys(e._dbDict));const s=new Set(n);if(0===s.size)return yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r);if(i.size<s.size)return yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r);if(i.size>s.size){const c={};for(const f of i)if(!Array.from(s.keys()).includes(f)){let u=!1;"RO_"===f.substring(0,3)&&(u=!0),c.database=f.substring(3),c.readonly=u,yield e._closeConnection(c.database,c.readonly)}}return i=new Set(Object.keys(e._dbDict)),i.size===s.size&&0===(yield e.symmetricDifference(i,s)).size?(r.result=!0,Promise.resolve(r)):(yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r))}catch(i){return Promise.reject(`CheckConnectionsConsistency: ${i.message?i.message:i}`)}})()}_resetDbDict(o){var t=this;return(0,O.A)(function*(){try{for(const e of o){const r={};let n=!1;"RO_"===e.substring(0,3)&&(n=!0),r.database=e.substring(3),r.readonly=n,yield t._closeConnection(r.database,r.readonly)}}catch(e){return Promise.reject(`ResetDbDict: ${e.message?e.message:e}`)}})()}symmetricDifference(o,t){return(0,O.A)(function*(){let e=new Set;o.forEach(n=>{e.add(n.substring(3))});let r=new Set;t.forEach(n=>{r.add(n.substring(3))});for(const n of r)e.has(n)?e.delete(n):e.add(n);return e})()}unzipDatabase(o,t){var e=this;return(0,O.A)(function*(){return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",o,!0),i.responseType="arraybuffer",i.onerror=()=>{n(new Error("unzipDatabase: failed"))},i.onload=()=>{Zn.exports.loadAsync(i.response).then(function(){var s=(0,O.A)(function*(c){const f=Object.keys(c.files);try{for(const u of f)yield e.retrieveDBFromZip(c.files,u,t);r()}catch(u){n(new Error(`unzipDatabase Error: ${u.message?u.message:u}`))}});return function(c){return s.apply(this,arguments)}}())},i.send()})})()}retrieveDBFromZip(o,t,e){var r=this;return(0,O.A)(function*(){return new Promise((n,i)=>{o[t].async("nodebuffer").then(function(){var s=(0,O.A)(function*(c){try{const f=new Uint8Array(c),u=r.setPathSuffix(t);(yield Fe.isDBInStore(u,r.store))?e?(yield Fe.removeDBFromStore(u,r.store),yield Fe.saveDBToStore(u,f,r.store)):i(new Error(`retrieveDBFromZip: cannot overwrite ${u}`)):yield Fe.saveDBToStore(u,f,r.store),n()}catch(f){i(new Error(`retrieveDBFromZip:: ${f.message?f.message:f}`))}});return function(c){return s.apply(this,arguments)}}())})})()}copyDatabase(o,t){var e=this;return(0,O.A)(function*(){return new Promise((r,n)=>{var s,i=new XMLHttpRequest;i.open("GET",o,!0),i.responseType="arraybuffer",i.onerror=()=>{n(new Error("CopyDatabase: failed"))},i.onload=()=>{s=new Uint8Array(i.response)},i.onloadend=(0,O.A)(function*(){const c=e.setPathSuffix(o);(yield Fe.isDBInStore(c,e.store))?t?(yield Fe.removeDBFromStore(c,e.store),yield Fe.saveDBToStore(c,s,e.store)):n(new Error(`CopyDatabase Error: cannot overwrite ${c}`)):yield Fe.saveDBToStore(c,s,e.store),r()}),i.send()})})()}loadJSON(o){return(0,O.A)(function*(){return new Promise((t,e)=>{var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",o,!0),r.onerror=()=>{e(new Error("LoadJSON: failed"))},r.onreadystatechange=function(){404==r.status&&t(null),4==r.readyState&&200==r.status&&t(r.responseText)},r.send(null)})})()}openStore(o,t){var e=this;return(0,O.A)(function*(){let r=!1;const n=e.setConfig(o,t);return e.store=Yn.createInstance(n),null!=e.store&&(e.storeName=o,r=!0),r})()}setConfig(o,t){return{name:o,storeName:t,driver:[Yn.INDEXEDDB],version:1}}removePathSuffix(o){return o.includes("SQLite.db")?o.split("SQLite.db")[0]:".db"===o.substring(o.length-3)?o.slice(0,o.lastIndexOf(".")):o}setPathSuffix(o){let t=o.slice(o.lastIndexOf("/")+1);return".db"===o.substring(o.length-3)&&(o.includes("SQLite.db")||(t=o.slice(o.lastIndexOf("/")+1,-3)+"SQLite.db")),t}blob2uint(o){return(0,O.A)(function*(){return new Response(o).arrayBuffer().then(t=>new Uint8Array(t))})()}uint2blob(o){return(0,O.A)(function*(){const t=new Blob([o.buffer]);return Promise.resolve(t)})()}getFileExtensionInUrl(o){const t=o.match(/\.([a-zA-Z0-9]+)(?:[\?#]|$)/);return t?t[1].toLowerCase():null}render(){}static get assetsDirs(){return["assets"]}get el(){return(0,Zt.g)(this)}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}};Xn.style=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}"}}]);