"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1983],{334:(M,v,r)=>{r.d(v,{s3:()=>_});const _=(0,r(5083).F3)("Keyboard")},1983:(M,v,r)=>{r.r(v),r.d(v,{SearchPageModule:()=>tt});var g=r(177),f=r(9417),m=r(8974),_=r(3021),d=r(467),x=r(56),b=r(2849),O=r(9441),D=r(3649),k=r(334),t=r(4438),C=r(5402);let w=(()=>{var i;class h{constructor(n){this.modalCtrl=n}ngOnInit(){}hadleAudioSearch(){this.modalCtrl.dismiss("search")}}return(i=h).\u0275fac=function(n){return new(n||i)(t.rXU(m.W3))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-recording-alert"]],decls:15,vars:6,consts:[["lines","none"],[1,"record_audio"],[1,"msg_speak"],[1,"circle_ripple"],[1,"circle_ripple-2"],[1,"circle"],[1,"circle-2"],["aria-hidden","true","src","assets/icon/mic.svg"],[1,"search_div"],[3,"click"]],template:function(n,e){1&n&&(t.j41(0,"div")(1,"ion-item",0)(2,"ion-label",1),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",2),t.nrm(6,"div",3)(7,"div",4),t.j41(8,"div",5)(9,"div",6),t.nrm(10,"ion-icon",7),t.k0s()()(),t.j41(11,"div",8)(12,"ion-button",9),t.bIt("click",function(){return e.hadleAudioSearch()}),t.EFF(13),t.nI1(14,"translate"),t.k0s()()()),2&n&&(t.R7$(3),t.JRh(t.bMT(4,2,"Speak...")),t.R7$(10),t.JRh(t.bMT(14,4,"Search")))},dependencies:[m.Jm,m.iq,m.uz,m.he,C.D9],styles:[".record_audio[_ngcontent-%COMP%]{font-size:20px;margin:.5rem 0 0 .5rem}.search_div[_ngcontent-%COMP%]{position:absolute;top:33%;left:50%;transform:translate(-50%,-50%)}.msg_speak[_ngcontent-%COMP%]{position:absolute;left:40%;top:-2%;bottom:100%;transform:translate(-50%)}.msg_speak[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:2rem!important;width:2rem!important}.circle_ripple[_ngcontent-%COMP%]{height:50px;width:50px;background:#36b37e;border-radius:50%;animation:_ngcontent-%COMP%_ripple 2s infinite;position:absolute;left:10px;top:110px;z-index:0}.circle_ripple-2[_ngcontent-%COMP%]{height:50px;width:50px;background:#36b37e;border-radius:50%;animation:_ngcontent-%COMP%_ripple-2 2s infinite;position:absolute;left:10px;top:110px}@keyframes _ngcontent-%COMP%_ripple{0%{transform:scale(1)}50%{transform:scale(2);opacity:.3}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_ripple-2{0%{transform:scale(1)}50%{transform:scale(2.5);opacity:.3}to{transform:scale(1)}}.circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:#eaeaea;position:absolute;left:5px;top:105px}.circle-2[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:#fff;position:absolute;left:5px;top:5px;box-shadow:0 0 8px #00000029;z-index:2}.circle-2[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;position:absolute;left:10px;top:10px}"]}),h})();var T=r(8666),R=r(7420),y=r(5293),S=r(2904),A=r(9836),I=r(2186),B=r(444),j=r(5173),G=r(2297),F=r(4254);const $=["searchInput"],X=()=>[0,1,2,3,4,5,6,7,8];function U(i,h){1&i&&(t.j41(0,"ion-item",16)(1,"div",17),t.nrm(2,"app-skeleton-item",18),t.k0s(),t.j41(3,"ion-label",19),t.nrm(4,"app-skeleton-item",20)(5,"app-skeleton-item",21),t.k0s(),t.j41(6,"ion-label",22),t.nrm(7,"app-skeleton-item",23),t.k0s()())}function Y(i,h){1&i&&(t.j41(0,"ion-list",12)(1,"ion-item",13)(2,"ion-label",14),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.DNE(5,U,8,0,"ion-item",15),t.k0s()),2&i&&(t.R7$(3),t.JRh(t.bMT(4,2,"Searching...")),t.R7$(2),t.Y8G("ngForOf",t.lJ4(4,X)))}function E(i,h){if(1&i&&(t.j41(0,"ion-list")(1,"ion-item",13)(2,"ion-label",24),t.EFF(3),t.nI1(4,"translate"),t.k0s()()()),2&i){const a=t.XpG();t.R7$(3),t.JRh(t.bMT(4,1,a.errMsg))}}function N(i,h){if(1&i&&t.nrm(0,"img",33),2&i){const a=t.XpG().$implicit;t.Y8G("src",null!=a&&null!=a.metaData&&a.metaData.thumbnail&&!a.metaData.identifier.startsWith("do_")?null==a||null==a.metaData?null:a.metaData.thumbnail:"assets/images/Audio.png",t.B4B)}}function V(i,h){if(1&i&&t.nrm(0,"img",34),2&i){const a=t.XpG().$implicit;t.Y8G("appThumbnail",null==a?null:a.metaData)}}function L(i,h){if(1&i&&t.nrm(0,"img",33),2&i){const a=t.XpG().$implicit;t.Y8G("src",null!=a&&null!=a.metaData&&a.metaData.thumbnail&&!a.metaData.identifier.startsWith("do_")?null==a||null==a.metaData?null:a.metaData.thumbnail:"assets/images/Video.png",t.B4B)}}function K(i,h){if(1&i&&t.nrm(0,"img",33),2&i){const a=t.XpG().$implicit;t.Y8G("src",null!=a&&null!=a.metaData&&a.metaData.thumbnail&&!a.metaData.identifier.startsWith("do_")?null==a||null==a.metaData?null:a.metaData.thumbnail:"assets/images/PDF.png",t.B4B)}}function W(i,h){if(1&i&&t.nrm(0,"img",33),2&i){const a=t.XpG().$implicit;t.Y8G("src",null!=a&&null!=a.metaData&&a.metaData.thumbnail&&!a.metaData.identifier.startsWith("do_")?null==a||null==a.metaData?null:a.metaData.thumbnail:"assets/images/LINK.png",t.B4B)}}function H(i,h){if(1&i){const a=t.RV6();t.j41(0,"ion-item",26),t.bIt("click",function(e){const o=t.eBV(a).$implicit,l=t.XpG(2);return t.Njj(l.playContent(e,o))}),t.j41(1,"div",27),t.DNE(2,N,1,1,"img",28)(3,V,1,1,"img",29)(4,L,1,1,"img",28)(5,K,1,1,"img",28)(6,W,1,1,"img",28),t.k0s(),t.j41(7,"div",30)(8,"div",31),t.EFF(9),t.k0s(),t.j41(10,"ion-icon",32),t.bIt("click",function(e){const o=t.eBV(a).$implicit;return t.XpG(2).moreOtions(o),t.Njj(e.stopPropagation())}),t.k0s()()()}if(2&i){const a=h.$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("ngIf",a.metaData.mimetype===n.mimeType.AUDIO),t.R7$(),t.Y8G("ngIf",(null==a||null==a.metaData?null:a.metaData.mimetype)===n.mimeType.YOUTUBE&&!a.play),t.R7$(),t.Y8G("ngIf",a.metaData.mimetype===n.mimeType.MP4),t.R7$(),t.Y8G("ngIf",a.metaData.mimetype===n.mimeType.PDF),t.R7$(),t.Y8G("ngIf",a.metaData.mimetype===n.mimeType.LINK),t.R7$(3),t.JRh(null==a.metaData?null:a.metaData.name)}}function J(i,h){if(1&i&&(t.j41(0,"ion-list"),t.DNE(1,H,11,6,"ion-item",25),t.k0s()),2&i){const a=t.XpG();t.R7$(),t.Y8G("ngForOf",a.searchContentResult)}}const z=[{path:"",component:(()=>{var i;class h{constructor(n,e,o,l,s,u,c,p,P,et){this.headerService=n,this.location=e,this.record=o,this.searchApi=l,this.modalCtrl=s,this.contentService=u,this.router=c,this.telemetryGeneratorService=p,this.storage=P,this.platformLocation=et,this.showSheenAnimation=!1,this.searchKeywords="",this.searchContentResult=[],this.optModalOpen=!1,this.mimeType=x.Cc,this.noSearchData=!1,this.errMsg="",this.modalPresent=!1,this.disabled=!1,this.startRecording=!1,this.duration=0,this.durationDisplay="",this.platformLocation.onPopState(()=>{console.log("Back button pressed")})}onPopState(n){this.location.back()}tabViewWillEnter(){this.headerService.hideHeader(),this.headerService.showStatusBar(!1)}ngOnInit(){}navigateBack(){this.router.navigate(["/tabs/home"])}ionViewWillEnter(){this.headerService.hideHeader(),this.headerService.showStatusBar(!1)}ngOnDestroy(){var n=this;return(0,d.A)(function*(){const e=yield n.modalCtrl.getTop();e&&e.dismiss()})()}handleSearch(n){var e=this;return(0,d.A)(function*(o,l=!1){if(l){e.showSheenAnimation=!0;let c=yield e.makeSearchContextApiCall(o,l);null!=c&&c.audioText?(c.audioText&&(e.searchKeywords=c.audioText),e.handleContentSearch(c,l)):(e.disabled=!1,e.showSheenAnimation=!1,e.noSearchData=!0,e.searchContentResult=[],e.errMsg="Sorry, please try again!")}else if(e.searchKeywords.replace(/\s/g,"").length>0){var s;e.showSheenAnimation=!0,k.s3.hide();let c=yield e.makeSearchContextApiCall(e.searchKeywords,l);var u;null!=c&&null!==(s=c.input)&&void 0!==s&&s.sourceText&&(e.searchKeywords=null==c||null===(u=c.input)||void 0===u?void 0:u.sourceText),e.handleContentSearch(c,!1)}}).apply(this,arguments)}makeSearchContextApiCall(n,e){var o=this;return(0,d.A)(function*(){return yield o.searchApi.postSearchContext({text:n,currentLang:yield o.storage.getData("lang")},e).then(l=>l).catch(l=>{var s;e?(o.disabled=!1,o.showSheenAnimation=!1,o.noSearchData=!0,o.searchContentResult=[],o.errMsg="unsupported language!"==(null==l||null===(s=l.body)||void 0===s||null===(s=s.detail)||void 0===s?void 0:s.toLowerCase())?"Sorry, this language is not currently supported.":"Sorry, please try again!"):o.handleContentSearch("",!1)})})()}handleContentSearch(n){var e=this;return(0,d.A)(function*(o,l=!1){var s;let u={name:null!==(s=null==o?void 0:o.context)&&void 0!==s?s:e.searchKeywords};yield e.searchApi.postContentSearch(u,yield e.storage.getData("lang")).then(c=>{if(e.telemetryGeneratorService.generateSearchTelemetry(l?"audio":"text",l?"":e.searchKeywords,c.length,"search",""),e.disabled=!1,c.length>0){e.showSheenAnimation=!1,e.noSearchData=!1;let p={};e.searchContentResult=[],c.forEach(P=>{p={},p.source="djp",p.sourceType="djp-content",p.metaData=P,e.searchContentResult.push(p)})}else e.showSheenAnimation=!1,e.noSearchData=!0,e.searchContentResult=[],e.errMsg="No Result"}).catch(c=>{var p;e.disabled=!1,e.showSheenAnimation=!1,e.noSearchData=!0,e.searchContentResult=[],e.errMsg="unsupported language!"==(null==c||null===(p=c.body)||void 0===p||null===(p=p.detail)||void 0===p?void 0:p.toLowerCase())?"Sorry, this language is not currently supported.":"Sorry, please try again!"})}).apply(this,arguments)}moreOtions(n){var e=this;return(0,d.A)(function*(){let o;e.optModalOpen||(e.optModalOpen=!0,o=yield e.modalCtrl.create({component:b.q,componentProps:{content:n},cssClass:"sheet-modal",breakpoints:[.25],showBackdrop:!1,initialBreakpoint:.25,handle:!1,handleBehavior:"none"}),yield o.present()),o.onDidDismiss().then(function(){var l=(0,d.A)(function*(s){e.optModalOpen=!1,s.data&&"addToPitara"===s.data.type?e.addContentToMyPitara(s.data.content||n):s.data&&"like"==s.data.type&&(e.contentService.likeContent(s.data.content||n,"guest",!0),s.data.content.metaData.isLiked&&(yield T.Q.play({assetId:"windchime"}),(0,R.A)({startVelocity:30,particleCount:400,spread:360,ticks:60,origin:{y:.5,x:.5},colors:["#a864fd","#29cdff","#78ff44","#ff718d","#fdff6a"]})),e.telemetryGeneratorService.generateInteractTelemetry("TOUCH","content-liked","search","search",new D.$i(null==n?void 0:n.metaData.identifier,null==n?void 0:n.metaData.mimetype,"")))});return function(s){return l.apply(this,arguments)}}())})()}addContentToMyPitara(n){var e=this;return(0,d.A)(function*(){const o=yield e.modalCtrl.create({component:O.$,componentProps:{content:n},cssClass:"add-to-pitara",breakpoints:[0,1],showBackdrop:!1,initialBreakpoint:1,handle:!1,handleBehavior:"none"});yield o.present(),o.onWillDismiss().then(l=>{})})()}playContent(n,e){var o=this;return(0,d.A)(function*(){o.contentService.markContentAsViewed(e),yield o.router.navigate(["/player"],{state:{content:e}})})()}onLongPressStart(){var n=this;return(0,d.A)(function*(){n.searchKeywords="",(yield(yield y.R.hasAudioRecordingPermission()).value)?(n.record.startRecognition("search"),n.disabled=!0,n.startRecording=!0,n.presentPopover(event),n.calculation()):yield y.R.requestAudioRecordingPermission()})()}presentPopover(n){var e=this;return(0,d.A)(function*(){e.modal=yield e.modalCtrl.create({component:w,cssClass:"sheet-modal",breakpoints:[.4],showBackdrop:!1,initialBreakpoint:.4,handle:!1,handleBehavior:"none"}),e.modalPresent=!0,yield e.modal.present(),yield e.modal.onDidDismiss().then(o=>{"search"===o.data&&e.onLongPressEnd()})})()}calculation(){if(!this.startRecording)return this.duration=0,void(this.durationDisplay="");this.duration+=1;const n=Math.floor(this.duration/60),e=(this.duration%60).toString().padStart(2,"0");this.durationDisplay=`${n}:${e}`,this.durationDisplay>"0:05"&&this.onLongPressEnd(),setTimeout(()=>{this.calculation()},1e3)}onLongPressEnd(){var n=this;return(0,d.A)(function*(){yield n.record.stopRecognition("search").then(function(){var e=(0,d.A)(function*(o){n.modalPresent&&(n.modalPresent=!1,yield n.modal.dismiss()),n.startRecording=!1,n.handleSearch(o,!0)});return function(o){return e.apply(this,arguments)}}())})()}}return(i=h).\u0275fac=function(n){return new(n||i)(t.rXU(S.Ux),t.rXU(g.aZ),t.rXU(A.X),t.rXU(I.S),t.rXU(m.W3),t.rXU(B.f),t.rXU(_.Ix),t.rXU(j.O),t.rXU(S.n$),t.rXU(g.Vw))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-search"]],viewQuery:function(n,e){if(1&n&&t.GBs($,5),2&n){let o;t.mGM(o=t.lsd())&&(e.searchBar=o.first)}},hostBindings:function(n,e){1&n&&t.bIt("popstate",function(l){return e.onPopState(l)},!1,t.tSv)},decls:16,vars:9,consts:[["searchInput",""],[1,"custom-header"],[1,"header-content"],["slot","start",1,"start-icon"],[3,"click"],["aria-hidden","true","src","assets/icon/back.svg"],["type","search","fill","outline","shape","round",3,"keyup.enter","ngModelChange","disabled","ngModel","placeholder"],["slot","end"],[3,"click","disabled"],["aria-hidden","true","src","assets/icon/mic.svg"],["class","m-n",4,"ngIf"],[4,"ngIf"],[1,"m-n"],["lines","none"],[1,"ion-text-center"],["lines","none","style","padding: 5px;",4,"ngFor","ngForOf"],["lines","none",2,"padding","5px"],["item-start","",2,"border-radius","16px"],["height","100px","width","200px","radius","16px",2,"border-radius","16px"],[2,"padding-left","10px"],["height","12px","width","100px",2,"padding-bottom","8px"],["height","12px","width","80px",2,"padding-bottom","8px"],[2,"padding-left","30px"],["height","12px","width","10px",2,"padding-bottom","8px"],[1,"no-data"],["lines","none",3,"click",4,"ngFor","ngForOf"],["lines","none",3,"click"],[1,"card__img"],["alt","",3,"src",4,"ngIf"],["appThumbnail","","alt","",3,"appThumbnail",4,"ngIf"],[1,"card__metadata"],[1,"card__title"],["aria-hidden","true","src","assets/icon/kabab-icon.svg",3,"click"],["alt","",3,"src"],["appThumbnail","","alt","",3,"appThumbnail"]],template:function(n,e){if(1&n){const o=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"div",2)(3,"ion-buttons",3)(4,"ion-button",4),t.bIt("click",function(){return t.eBV(o),t.Njj(e.navigateBack())}),t.nrm(5,"ion-icon",5),t.k0s()(),t.j41(6,"ion-input",6,0),t.nI1(8,"translate"),t.bIt("keyup.enter",function(){return t.eBV(o),t.Njj(e.handleSearch())})("ngModelChange",function(){return t.eBV(o),t.Njj(!e.searchContentResult)}),t.mxI("ngModelChange",function(s){return t.eBV(o),t.DH7(e.searchKeywords,s)||(e.searchKeywords=s),t.Njj(s)}),t.k0s(),t.j41(9,"ion-buttons",7)(10,"ion-button",8),t.bIt("click",function(){return t.eBV(o),t.Njj(e.onLongPressStart())}),t.nrm(11,"ion-icon",9),t.k0s()()()()(),t.j41(12,"ion-content"),t.DNE(13,Y,6,5,"ion-list",10)(14,E,5,3,"ion-list",11)(15,J,2,1,"ion-list",11),t.k0s()}2&n&&(t.R7$(6),t.Y8G("disabled",e.disabled),t.R50("ngModel",e.searchKeywords),t.Y8G("placeholder",t.bMT(8,7,"SEARCH_HINT")),t.R7$(4),t.Y8G("disabled",e.disabled),t.R7$(3),t.Y8G("ngIf",e.showSheenAnimation),t.R7$(),t.Y8G("ngIf",!e.showSheenAnimation&&e.noSearchData),t.R7$(),t.Y8G("ngIf",!e.showSheenAnimation&&e.searchContentResult.length>0))},dependencies:[g.Sq,g.bT,f.BC,f.vS,m.Jm,m.QW,m.W9,m.eU,m.iq,m.$w,m.uz,m.he,m.nf,m.ai,m.Gw,G.O,F.g,C.D9],styles:[".cards-container[_ngcontent-%COMP%]{padding:.2rem 1rem}.cards-container[_ngcontent-%COMP%]   .bot-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 1rem 1rem}.cards-container[_ngcontent-%COMP%]   .bot-section[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative}.cards-container[_ngcontent-%COMP%]   .bot-section[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .image-title[_ngcontent-%COMP%]{position:absolute;bottom:.625rem;color:var(--ion-color-primary-contrast);left:0;right:0;text-align:center}.card[_ngcontent-%COMP%]{position:relative;padding-bottom:1rem}.card__img[_ngcontent-%COMP%]{height:194px;width:100%;overflow:hidden}.card__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;width:100%;height:100%;border-radius:1rem}.card__metadata[_ngcontent-%COMP%]{padding-top:.5rem;display:flex;align-items:center;justify-content:space-between}.card__metadata[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:1.75rem;width:1.75rem}.card__action-btns[_ngcontent-%COMP%]{display:flex;align-items:center}.card__action-btns[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;margin-right:1rem}.card__action-btns[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:last-child{margin-left:auto;margin-right:0}.card__title[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400;width:90%;text-transform:capitalize;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.no-data[_ngcontent-%COMP%]{text-align:center}#content-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(5,1fr);grid-column-gap:0px;grid-row-gap:0px}@media (max-width: 700px){#content-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,1fr);grid-template-rows:repeat(5,1fr);grid-column-gap:0px;grid-row-gap:0px}}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-content[_ngcontent-%COMP%]{--padding-top: 0 !important}.header-content[_ngcontent-%COMP%]{display:flex}  .toolbar-container{padding:0!important;min-height:auto}ion-input[_ngcontent-%COMP%]{margin-top:.5rem;min-height:3rem!important;--border-color: var(--ion-color-medium) !important;--highlight-color: var(--ion-color-secondary-contrast) !important}ion-icon[_ngcontent-%COMP%]{width:1.75rem;height:1.75rem;margin-left:0}.card__img[_ngcontent-%COMP%]{width:40%;height:auto}.card__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:90%!important}.card__metadata[_ngcontent-%COMP%]{padding-top:0;padding-left:1rem;align-items:center;width:60%;height:90%}ion-list[_ngcontent-%COMP%]{background-color:transparent}ion-item[_ngcontent-%COMP%]{--background: transparent}.search_text[_ngcontent-%COMP%]{text-align:center}"]}),h})()}];let Q=(()=>{var i;class h{}return(i=h).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[_.iI.forChild(z),_.iI]}),h})();var Z=r(3721),q=r(5553);let tt=(()=>{var i;class h{}return(i=h).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[g.MD,f.YN,m.bv,Q,C.h,q.h,Z.h]}),h})()}}]);